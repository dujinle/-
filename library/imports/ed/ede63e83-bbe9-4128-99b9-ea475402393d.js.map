{"version":3,"sources":["../../../../../assets/Script/common/assets/Script/common/feed_back.js"],"names":["cc","Class","extends","Component","properties","edit_box","EditBox","bg_sprite","Node","title","tid","text_info","choice_radios","type","default","onLoad","node","on","switchRadio","eventManager","addListener","event","EventListener","TOUCH_ONE_BY_ONE","swallowTouches","onTouchBegan","touch","onTouchMoved","onTouchEnded","target","getCurrentTarget","local","convertToNodeSpace","getLocation","s","getContentSize","rect","width","height","rectContainsPoint","log","edit_start","string","edit_change","edit_end","index","getComponent","i","length","item","pitchOn","lifeUp","button_ok","self","size","director","getVisibleSize","Servers","feedback","g_user","playerId","data","code","util","show_error_info","button_close","active","destroy"],"mappings":"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","file":"feed_back.js","sourceRoot":"../../../../../assets/Script/common","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n\t\tedit_box:cc.EditBox,\n\t\tbg_sprite:cc.Node,\n\t\ttitle:null,\n\t\ttid:0,\n\t\ttext_info:null,\n\t\tchoice_radios:{\n\t\t\ttype:cc.Node,\n\t\t\tdefault:[],\t\n\t\t}\n    },\n\tonLoad () {\n\t\tthis.tid = 0;\n\t\tthis.title = \"意见\";\n\t\tthis.node.on(\"pressed\", this.switchRadio, this);\n        cc.eventManager.addListener({\n            event: cc.EventListener.TOUCH_ONE_BY_ONE,\n            swallowTouches: true,\n            // 设置是否吞没事件，在 onTouchBegan 方法返回 true 时吞没\n            onTouchBegan: function (touch, event) {\n                return true;\n            },\n            onTouchMoved: function (touch, event) {            // 触摸移动时触发\n            },\n            onTouchEnded: function (touch, event) {            // 点击事件结束处理\n\t\t\t\tvar target=event.getCurrentTarget();\n\t\t\t\tvar local=target.convertToNodeSpace(touch.getLocation());\n\t\t\t\tvar s = target.getContentSize();\n\t\t\t\tvar rect = cc.rect(0, 0, s.width, s.height);\n\t\t\t\tif (cc.rectContainsPoint(rect, local)){\n\t\t\t\t\tcc.log(\"ok touch in the region......\");\n\t\t\t\t}else{\n\t\t\t\t\tcc.log(\"touch remove from parent\");\n\t\t\t\t\t//self.node.active = false;\n\t\t\t\t}\n\t\t\t}\n         }, this.bg_sprite);\n    },\n\tedit_start(){\n\t\tcc.log(\"start:\" + this.edit_box.string);\n\t},\n\tedit_change(){\n\t\tcc.log(\"change:\" + this.edit_box.string);\n\t},\n\tedit_end(){\n\t\tcc.log(\"end:\" + this.edit_box.string);\n\t},\n\tswitchRadio(event) {\n        var index = event.target.getComponent(\"one_choice\").index;\n\t\tvar type = event.target.getComponent(\"one_choice\").type;\n\t\tcc.log(\"switchRadio : index:\" + index + \" type:\" + type);\n\t\t\n        for(let i = 0; i < this.choice_radios.length; i++){\n\t\t\tvar item = this.choice_radios[i].getComponent(\"one_choice\");\n            if(item.index == index){\n\t\t\t\tthis.tid = index;\n\t\t\t\tif(index == 0){\n\t\t\t\t\tthis.title = \"意见\";\n\t\t\t\t}else if(index == 1){\n\t\t\t\t\tthis.title = \"Bug\";\n\t\t\t\t}else if(index == 2){\n\t\t\t\t\tthis.title = \"体验\";\n\t\t\t\t}else if(index == 3){\n\t\t\t\t\tthis.title = \"其他\";\n\t\t\t\t}\n                item.pitchOn();\n            }else{\n                item.lifeUp();\n            }\n        }\n\t\tcc.log(\"title : \" + this.title + \" tid:\" + this.tid);\n    },\n\tbutton_ok(){\n\t\tvar self = this;\n\t\tvar size = cc.director.getVisibleSize();\n\t\tif(this.edit_box.string.length > 0){\n\t\t\tServers.feedback(g_user.playerId,\"all\",this.edit_box.string,function(data){\n\t\t\t\tcc.log(data);\n\t\t\t\tif(data.code != 200){\n\t\t\t\t\tutil.show_error_info(self,size,\"信息提交失败\");\n\t\t\t\t}else{\n\t\t\t\t\tutil.show_error_info(self,size,\"信息提交成功\");\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\tutil.show_error_info(self,size,\"没有输入内容\");\n\t\t}\n\t},\n\tbutton_close(){\n\t\tthis.node.active = false;\n\t\tthis.node.destroy();\n\t}\n});\n"]}