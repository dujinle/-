{"version":3,"sources":["../../../../../assets/Script/game_room/assets/Script/game_room/zjh_game_room.js"],"names":["cc","Class","extends","Component","properties","bet","sumBet","count","fapai_count","roomNum","playerNum","roomState","master_name","total_count","danzhu","comparableState","currentGetPowerPlayerPosition","master_label","Label","room_num_label","danzhu_label","zongzhu_label","huihe_label","zhunbei_button","Node","bipai_button","kaipai_button","qipai_button","genzhu_button","jiazhu_button","players","type","default","onLoad","g_betArray","g_roomData","g_roomMasterName","g_totalCount","startDealCardPosition1","startDealCardPosition","betPhotoArray","Array","myselfCards","init_head_info","initButtonEnableAfterComeInRoom","initPlayersAndPlayer_noPower","initPlayerCardsPosition","schedule","showRoomMessageUpdate","REPEAT_FOREVER","start","log","audioSource","node","getComponent","AudioSource","g_music_key","sys","localStorage","getItem","MUSIC_KEY","BOOL","YES","play","init_count_timer","pomelo_on","size","director","getWinSize","lmaster","string","lroom_num","ldanzhu","lzongzhu","lhuihe","position","convertToNodeSpaceAR","p","width","height","g_dealCardBack","getContentSize","setPosition","addChild","msage_scroll","instantiate","g_assets","x","y","Button","interactable","initButtonEnableAfterThrow","self","JSON","stringify","g_playerData","i","length","g_user","playerId","g_myselfPlayerPos","idx","player_stc","player","player_com","init","player_position","is_power","g_players_noPower","push","g_players","active","tmp_allplayers","concat","position_server","start_timer","m","calc_player_card_position","my_cards","callback_zhunbei","pomelo","request","util","getGameRoute","process","location","data","msg","callback_kaipai","callback_genzhu","callback_qipai","callback_bipai","left_position","right_position","left_player_com","right_player_com","location1","location2","getVisibleSize","pop_bipai_select","pop_bipai_select_com","select_pos","set_which_select","set_callback","biPaiSelectCallBack","getSiblingIndex","callback_jiazhu","pop_add_chip","pop_add_chip_com","index","add_chip","console","getPositionY","mobile_sprite","callback_setting","pop_setting","pop_setting_com","NO","pause","callback_gameback","onExit","loadScene","callback_uinfo","event","id","send_from","send_to","betString","sumBetString","countFlowingString","on","onReady_function","bind","onAdd_function","onNoRound_function","onFapai_function","onGetUinfo_function","onShoupai_function","onOpen_function","onThrow_function","onFollow_function","onLeave_function","onChangePlayer_function","onBipai_function","onEnd_function","onEndPai_function","onAddChip_function","onUserBroadcast_function","splice","setSpriteStatus","stop_timer","playerInfo","t_player","instruction_faPai","removeFromParent","remove_cards","init_cards","check_card","abandon","hide_status_sprite","actionBottomBet","getPosition","resetMoneyLabel","my_gold","cardType","suit","rank","card","j","set_card_sprite","parseInt","myselfCardsReach","acMoveDown","moveTo","callFuncActionDealCard","callFunc","actionFaPai","runAction","sequence","EaseOut","all_players","playerName","backCardSeq","delayTime","hide","backCamera","rotateBy","backSpawn","spawn","frontSeq","show","frontCamera","frontSpawn","sprite_back","sprite","m_playerId","actionFollowBet","isFind","rotationPlayerPositionServer","winnerPositionServer","playerPositionServer1","playerPositionServer2","loserPositionServer","delayCompare","DelayTime","callbackSetRoomStateCompare","setRoomStateCompare","actionBiPai","playerPositionServer","bipai_ui","isValid","compareTime","get_cur_time","waitGetBetTime","callBackWinnerGetBet","actionWinnerGetBet","winnerCardType","cardString","parse","tmp_card","suit1","rank1","suit2","rank2","suit3","rank3","initCardSprite","callbackOpenAllCard","openAllCard","msage_scroll_com","set_string","golds_info","tplayers","key","pop_game_finish","pop_game_finish_com","init_info","uinfo","uinfo_com","actionSendGift","pnode","s_player","e_player","active_name","move","rotation","sendAction","anim","Animation","destroy","animStatus","wrapMode","WrapMode","Normal","Loop","repeatCount","playerArrayPosition","setPlayerCardsPosition","acMoveUp","moveBy","acMoveUp1","EaseIn","acInitMenuItemCallback","startFirstRotationPosition","acMoveDown1","acToCardPlayer","left_player","right_player","cardPosition","cardPositionOther","bipai_ui_com","nick_name","card_pos","get_card_position","left_cards","bipai_position","moveToBiPaiPosition","moveToOriginPosition","_seqBack","right_cards","bipai_start","displayWaitTime","setDisplayLoserCallback","displayLoser","countNumber","chip","Math","random","move_pos","moveBet","isCheckCard","chipNum","mythis","getPositionX","card_len","setPlayerCardsBackPosition","rotationPlayerIndexOf","my_this","playerPosition","getBetAction","localtion1","localtion2","pomelo_removeListener","removeListener"],"mappings":"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","file":"zjh_game_room.js","sourceRoot":"../../../../../assets/Script/game_room","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n\t\tbet:0,\n\t\tsumBet:0,\n\t\tcount:0,\n\t\tfapai_count:0,\n\t\troomNum:0,\n\t\tplayerNum:0,\n\t\troomState:0,\n\t\tmaster_name:null,\n\t\ttotal_count:0,\n\t\tdanzhu:100,\n\t\tcomparableState:false,\n\t\tcurrentGetPowerPlayerPosition:0,\n\t\t//head label info\n\t\tmaster_label:cc.Label,\n\t\troom_num_label:cc.Label,\n\t\tdanzhu_label:cc.Label,\n\t\tzongzhu_label:cc.Label,\n\t\thuihe_label:cc.Label,\n\t\t//buttons for game\n\t\tzhunbei_button:cc.Node,\n\t\tbipai_button:cc.Node,\n\t\tkaipai_button:cc.Node,\n\t\tqipai_button:cc.Node,\n\t\tgenzhu_button:cc.Node,\n\t\tjiazhu_button:cc.Node,\n\t\tplayers:{\n\t\t\ttype:cc.Node,\n\t\t\tdefault:[],\n\t\t}\n    },\n\n    onLoad () {\n\t\tthis.bet = g_betArray[0];\n        this.sumBet = g_roomData[1];\n\t\tthis.count = g_roomData[2];\n\t\tthis.roomNum = g_roomData[3];\n        this.playerNum = g_roomData[4];\n        this.roomState = g_roomData[5];\n\t\tthis.currentGetPowerPlayerPosition = g_roomData[6];\n\t\tthis.master_name = g_roomMasterName;\n\t\tthis.total_count = g_totalCount;\n\t\tthis.startDealCardPosition1 = 0;\n\t\tthis.startDealCardPosition = 0;\n\t\tthis.comparableState = false;\n\t\tthis.betPhotoArray = new Array();\n\t\tthis.myselfCards = new Array();\n\t\tthis.init_head_info();\n\t\tthis.initButtonEnableAfterComeInRoom();\n\t\tthis.initPlayersAndPlayer_noPower();\n\t\tif(this.roomState == 1){\n\t\t\t/*进来的时候 有玩家正在玩牌 则初始化他们的牌位置*/\n\t\t\tthis.initPlayerCardsPosition();\n\t\t}\n\t\tthis.schedule(this.showRoomMessageUpdate,1.0/60,cc.REPEAT_FOREVER,0);\n\t},\n\tstart(){\n\t\tcc.log(\"go into zjh game room scene start\");\n\t\tthis.audioSource = this.node.getComponent(cc.AudioSource);\n\t\tg_music_key = cc.sys.localStorage.getItem(MUSIC_KEY);\n\t\tif(g_music_key == BOOL.YES){\n\t\t\tthis.audioSource.play();\n\t\t}\n\t\tthis.init_count_timer();\n\t\tthis.pomelo_on();\n\t},\n\tinit_head_info(){\n\t\tvar size = cc.director.getWinSize();\n\t\tvar lmaster = this.master_label.getComponent(cc.Label);\n\t\tlmaster.string = this.master_name;\n\t\t\n\t\tvar lroom_num = this.room_num_label.getComponent(cc.Label);\n\t\tlroom_num.string = this.roomNum;\n\t\t\n\t\tvar ldanzhu = this.danzhu_label.getComponent(cc.Label);\n\t\tldanzhu.string = this.bet;\n\t\t\n\t\tvar lzongzhu = this.zongzhu_label.getComponent(cc.Label);\n\t\tlzongzhu.string = this.sumBet;\n\t\t\n\t\tvar lhuihe = this.huihe_label.getComponent(cc.Label);\n\t\tlhuihe.string = this.count + \"/\" + this.total_count;\n\t\t\n\t\tvar position = this.node.convertToNodeSpaceAR(cc.p(\n\t\t\tsize.width/2,size.height + g_dealCardBack.getContentSize().height/2));\n\t\tg_dealCardBack.setPosition(position);\n\t\tthis.node.addChild(g_dealCardBack);\n\t\t\n\t\t//添加滚动字幕\n\t\tthis.msage_scroll = cc.instantiate(g_assets[\"msage_scroll\"]);\n\t\tthis.node.addChild(this.msage_scroll);\n\t\tvar x = size.width/2;\n\t\tvar y = size.height - 120;\n\t\tthis.msage_scroll.setPosition(this.node.convertToNodeSpaceAR(cc.p(x,y)));\n\t},\n\tinitButtonEnableAfterComeInRoom(){\n\t\tthis.bipai_button.getComponent(cc.Button).interactable = false;\n\t\tthis.kaipai_button.getComponent(cc.Button).interactable = false;\n\t\tthis.qipai_button.getComponent(cc.Button).interactable = false;\n\t\tthis.genzhu_button.getComponent(cc.Button).interactable = false;\n\t\tthis.jiazhu_button.getComponent(cc.Button).interactable = false;\n\t\t//正在游戏中则新加入的玩家不可以准备\n\t\tif(this.roomState == 1){\n\t\t\tthis.zhunbei_button.getComponent(cc.Button).interactable = false;\n\t\t}else{\n\t\t\tthis.zhunbei_button.getComponent(cc.Button).interactable = true;\n\t\t}\n    },\n\tinitButtonEnableAfterThrow(){\n\t\tthis.bipai_button.getComponent(cc.Button).interactable = false;\n\t\tthis.kaipai_button.getComponent(cc.Button).interactable = false;\n\t\tthis.qipai_button.getComponent(cc.Button).interactable = false;\n\t\tthis.genzhu_button.getComponent(cc.Button).interactable = false;\n\t\tthis.jiazhu_button.getComponent(cc.Button).interactable = false;\n\t\tthis.zhunbei_button.getComponent(cc.Button).interactable = false;\n    },\n    initPlayersAndPlayer_noPower(){\n\t\tvar self = this;\n\t\tcc.log(\"initPlayersAndPlayer_noPower\" + JSON.stringify(g_playerData));\n\t\tfor(var i = 0;i < g_playerData.length;i++){\n\t\t\tif(g_playerData[i][0] == g_user.playerId){\n\t\t\t\tg_myselfPlayerPos = g_playerData[i][1];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tvar position = new Array();\n\t\t//寻找玩家自己，确定自己的服务器位置和客户端位置\n\t\tfor(var i = 0;i < g_playerData.length;i++){\n\t\t\tvar idx = -1;\n\t\t\tvar player_stc = g_playerData[i];\n\t\t\tif(player_stc[1] == g_myselfPlayerPos){\n\t\t\t\tidx = 0;\n\t\t\t}else if(player_stc[1] > g_myselfPlayerPos){\n\t\t\t\tvar idx = player_stc[1] - g_myselfPlayerPos;\n\t\t\t}else if(player_stc[1] < g_myselfPlayerPos){\n\t\t\t\tvar idx = this.players.length - g_myselfPlayerPos + player_stc[1];\n\t\t\t}\n\t\t\tif(idx >= 0){\n\t\t\t\tposition[idx] = player_stc;\n\t\t\t}\n\t\t}\n\t\tfor(var i = 0; i < this.players.length;i++){\n\t\t\tvar player_stc = position[i];\n\t\t\tif(player_stc == null){\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tvar player = this.players[i];\n\t\t\tvar player_com = player.getComponent(\"zjh_player\");\n\t\t\tplayer_com.init(player_stc);\n\t\t\tplayer_com.player_position = i + 1;\n\t\t\tif(player_com.is_power == 0){\n\t\t\t\tg_players_noPower.push(player);\n\t\t\t}else{\n\t\t\t\tg_players.push(player);\n\t\t\t}\n\t\t\tplayer.active = true;\n\t\t}\n\t},\n    init_count_timer(){\n\t\tvar tmp_allplayers = g_players_noPower.concat(g_players);\n    \tfor(var i = 0;i < tmp_allplayers.length;i++){\n\t\t\tvar player_com = tmp_allplayers[i].getComponent(\"zjh_player\");\n\t\t\tif(player_com.position_server == g_myselfPlayerPos){\n\t\t\t\tplayer_com.start_timer();\n    \t\t\tbreak;\n    \t\t}\n    \t}\n    },\n\tinitPlayerCardsPosition(){\n        for(var i=0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"zjh_player\");\n            if(player_com.is_power == 2){\n\t\t\t\tfor(var m = 0;m < 3;m++){\n\t\t\t\t\tvar position = this.calc_player_card_position(player,m);\n\t\t\t\t\tplayer_com.my_cards[m].setPosition(position);\n\t\t\t\t}\n\t\t\t}\n        }\n\t},\n\t\n\t//按钮回调函数\n\tcallback_zhunbei(){\n\t\tthis.zhunbei_button.getComponent(cc.Button).interactable = false;\n\t\tpomelo.request(util.getGameRoute(),{\n\t\t\tprocess:\"ready\",\n\t\t\tlocation:g_myselfPlayerPos\n\t\t},function(data){\n\t\t\tcc.log(data.msg);\n\t\t});\n    },\n\tcallback_kaipai(){\n\t\tthis.kaipai_button.getComponent(cc.Button).interactable = false;\n        pomelo.request(util.getGameRoute(),{\n            process:\"open\",\n            location:g_myselfPlayerPos\n        },function(data){\n            cc.log(data.msg);\n        });\n    },\n\tcallback_genzhu(){\n\t\tthis.genzhu_button.getComponent(cc.Button).interactable = false;\n\t\tpomelo.request(util.getGameRoute(),{\n\t\t\tprocess:\"follow\",\n\t\t\tlocation:g_myselfPlayerPos\n\t\t},function(data){\n\t\t\tcc.log(data.msg);\n\t\t});\n\t},\n\tcallback_qipai(){\n\t\tthis.qipai_button.getComponent(cc.Button).interactable = false;\n\t\tpomelo.request(util.getGameRoute(),{\n\t\t\tprocess:\"throw\",\n\t\t\tlocation:g_myselfPlayerPos\n\t\t},function(data){\n\t\t\tcc.log(data.msg);\n\t\t});\n\t},\n\tcallback_bipai(){\n\t\tif(g_players.length == 2) {\n\t\t\tthis.bipai_button.getComponent(cc.Button).interactable = false;\n\t\t\tthis.jiazhu_button.getComponent(cc.Button).interactable = false;\n\t\t\tthis.genzhu_button.getComponent(cc.Button).interactable = false;\n\t\t\tthis.qipai_button.getComponent(cc.Button).interactable = false;\n\t\t\tvar left_position = 0;\n\t\t\tvar right_position = 0;\n\t\t\tvar left_player_com = g_players[0].getComponent(\"zjh_player\");\n\t\t\tvar right_player_com = g_players[1].getComponent(\"zjh_player\");\n\t\t\tif (left_player_com.position_server == g_myselfPlayerPos) {\n\t\t\t\tleft_position = left_player_com.position_server;\n\t\t\t\tright_position = right_player_com.position_server;\n\t\t\t}else {\n\t\t\t\tleft_position = right_player_com.position_server;\n\t\t\t\tright_position = left_player_com.position_server;\n\t\t\t}\n\n\t\t\tpomelo.request(util.getGameRoute(), {\n\t\t\t\tprocess: \"bipai\",\n\t\t\t\tlocation1: left_position,\n\t\t\t\tlocation2: right_position\n\t\t\t}, function (data) {\n\t\t\t\tcc.log(JSON.stringify(data));\n\t\t\t});\n\t\t}else if(g_players.length > 2){\n\t\t\tthis.bipai_button.getComponent(cc.Button).interactable = false;\n\t\t\tthis.jiazhu_button.getComponent(cc.Button).interactable = false;\n\t\t\tthis.genzhu_button.getComponent(cc.Button).interactable = false;\n\t\t\tthis.qipai_button.getComponent(cc.Button).interactable = false;\n\t\t\tvar size = cc.director.getVisibleSize();\n\t\t\tvar pop_bipai_select = cc.instantiate(g_assets[\"pop_bipai_select\"]);\n\t\t\tvar pop_bipai_select_com = pop_bipai_select.getComponent(\"select_compare\");\n\t\t\tvar select_pos = new Array();\n\t\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\t\tvar player_com = g_players[i].getComponent(\"zjh_player\");\n\t\t\t\tif(player_com.position_server == g_myselfPlayerPos){\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tselect_pos.push(player_com.player_position);\n\t\t\t}\n\t\t\tpop_bipai_select_com.set_which_select(select_pos);\n\t\t\tpop_bipai_select_com.set_callback(this.biPaiSelectCallBack);\n\t\t\tthis.node.addChild(pop_bipai_select);\n\t\t\tpop_bipai_select.setPosition(this.node.convertToNodeSpaceAR(cc.p(size.width/2,size.height/2)));\n\t\t\tcc.log(\"SiblingIndex\",pop_bipai_select.getSiblingIndex());\n        }\n    },\n\tcallback_jiazhu(){\n\t\tvar size = cc.director.getVisibleSize();\n\t\tvar pop_add_chip = cc.instantiate(g_assets[\"pop_add_chip\"]);\n\t\tvar pop_add_chip_com = pop_add_chip.getComponent(\"add_chip\");\n\t\tpop_add_chip_com.set_callback(function(index){\n\t\t\tpomelo.request(util.getGameRoute(),{\n\t\t\t\tprocess:\"add\",\n\t\t\t\tadd_chip:g_betArray[index],\n\t\t\t\tlocation:g_myselfPlayerPos\n\t\t\t},function(data){\n\t\t\t\tconsole.log(data.msg);\n\t\t\t});\n\t\t});\n\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"zjh_player\");\n\t\t\tif(player_com.position_server == g_myselfPlayerPos){\n\t\t\t\tvar x = 0;\n\t\t\t\tvar y = player.getPositionY() + player_com.mobile_sprite.node.height + 30;\n\t\t\t\tthis.node.addChild(pop_add_chip);\n\t\t\t\tpop_add_chip.setPosition(cc.p(x,y));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t},\n\tcallback_setting(){\n\t\tvar self = this;\n\t\tvar size = cc.director.getVisibleSize();\n\t\tvar pop_setting = cc.instantiate(g_assets[\"pop_setting_scene\"]);\n\t\tvar pop_setting_com = pop_setting.getComponent(\"pop_set_scene\");\n\t\tpop_setting_com.set_callback(function(index){\n\t\t\tif(index == 0){\n\t\t\t\tif(g_music_key == BOOL.NO){\n\t\t\t\t\tself.audioSource.pause();\n\t\t\t\t}else{\n\t\t\t\t\tself.audioSource.play();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tvar x = size.width/2;\n\t\tvar y = size.height/2;\n\t\tthis.node.addChild(pop_setting);\n\t\tpop_setting.setPosition(this.node.convertToNodeSpaceAR(cc.p(x,y)));\n\t},\n\tcallback_gameback(){\n\t\tvar self = this;\n\t\tpomelo.request(util.getGameRoute(),{\n            process : 'quitRoom'\n        },function(data){\n            console.log(\"-----quit------\"+JSON.stringify(data));\n\t\t\tself.onExit();\n            cc.director.loadScene(\"MainScene\");\n        })\n\t},\n\tcallback_uinfo(event,id){\n\t\tvar self = this;\n\t\tvar player = this.players[id];\n\t\tvar player_com = player.getComponent(\"zjh_player\");\n\t\tpomelo.request(util.getGameRoute(),{\n            process : 'get_uinfo',\n\t\t\tsend_from:g_myselfPlayerPos,\n\t\t\tsend_to:player_com.position_server\n        },function(data){\n            console.log(\"-----quit------\"+JSON.stringify(data));\n        })\n\t},\n\tshowRoomMessageUpdate(){\n\t\tvar betString = this.bet;\n\t\tthis.danzhu_label.string = betString;\n\n\t\tvar sumBetString = this.sumBet;\n\t\tthis.zongzhu_label.string = sumBetString;\n\n\t\tvar countFlowingString = this.count + \"/\" + this.total_count;\n\t\tthis.huihe_label.string = countFlowingString;\n\t},\n\tpomelo_on(){\n    \tpomelo.on('onReady',this.onReady_function.bind(this));\n\t\tpomelo.on('onAdd',this.onAdd_function.bind(this));\n\t\tpomelo.on('onNoRound',this.onNoRound_function.bind(this));\n\t\tpomelo.on('onFapai',this.onFapai_function.bind(this));\n\t\tpomelo.on('onGetUinfo',this.onGetUinfo_function.bind(this));\n\t\tpomelo.on('onShoupai',this.onShoupai_function.bind(this));\n\t\tpomelo.on('onOpen',this.onOpen_function.bind(this));\n\t\tpomelo.on('onThrow',this.onThrow_function.bind(this));\n\t\tpomelo.on('onFollow',this.onFollow_function.bind(this));\n\t\tpomelo.on('onLeave',this.onLeave_function.bind(this));\n\t\tpomelo.on('onChangePlayer',this.onChangePlayer_function.bind(this));\n\t\tpomelo.on('onBipai',this.onBipai_function.bind(this));\n\t\tpomelo.on('onEnd',this.onEnd_function.bind(this));\n\t\tpomelo.on('onEndPai',this.onEndPai_function.bind(this));\n\t\tpomelo.on('onAddChip',this.onAddChip_function.bind(this));\n\t\tpomelo.on('onActBroadcast',this.onUserBroadcast_function.bind(this));\n    },\n\tonReady_function(data){\n\t\tcc.log(\"pomelo on Ready:\" + data.location+\" is ready\");\n\t\t/*如果玩家进来时正在游戏中则准备后 放入g_players中*/\n\t\tfor(var i = 0;i < g_players_noPower.length;i++){\n\t\t\tvar player = g_players_noPower[i];\n\t\t\tvar player_com = player.getComponent(\"zjh_player\");\n\t\t\tif(player_com.position_server == data.location){\n\t\t\t\tg_players.push(player);\n\t\t\t\tg_players_noPower.splice(i,1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"zjh_player\");\n\t\t\tif(player_com.position_server == data.location){\n\t\t\t\tplayer_com.is_power = 1;\n\t\t\t\tplayer_com.setSpriteStatus(\"yizhunbei\");\n\t\t\t\tplayer_com.stop_timer();\n\t\t\t\t//准备状态表示\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t},\n\tonAdd_function(data){\n\t\tcc.log(\"onAdd:\" + JSON.stringify(data));\n\t\tvar player = null;\n\t\tvar playerInfo=data[\"user\"];\n\n\t\tvar t_player=new Array();\n\t\tt_player.push(playerInfo[\"id\"]);\n\t\tt_player.push(playerInfo[\"location\"]);\n\t\tt_player.push(playerInfo[\"isGame\"]);\n\t\tt_player.push(playerInfo[\"nickName\"]);\n\t\tt_player.push(playerInfo[\"gold\"]);\n\t\tt_player.push(playerInfo[\"gender\"]);\n\t\tt_player.push(playerInfo[\"mark\"]);\n\t\t\n\t\t//确定新加入玩家的客户端位置\n\t\tvar idx = 0;\n\t\tif(t_player[1] > g_myselfPlayerPos){\n\t\t\tidx = t_player[1] - g_myselfPlayerPos;\n\t\t}else{\n\t\t\tidx = this.players.length - g_myselfPlayerPos + t_player[1];\n\t\t}\n\t\tvar player = this.players[idx];\n\t\tvar player_com = player.getComponent(\"zjh_player\");\n\t\tplayer_com.init(t_player);\n\t\tplayer_com.player_position = idx + 1;\n\t\tif(this.roomState == 1){\n\t\t\tg_players_noPower.push(player);\n\t\t}else{\n\t\t\tg_players.push(player);\n\t\t}\n\t\tplayer.active = true;\n\t\t/*\n\t\t//为新加入的玩家头像添加个人信息按钮\n\t\tvar menuSprite1=new cc.Sprite(res.Mobile_jpg);\n\t\tvar menuSprite2=new cc.Sprite(res.Mobile_jpg);\n\t\tvar menuSprite3=new cc.Sprite(res.Mobile_jpg);\n\t\tvar menuItem = new cc.MenuItemSprite(menuSprite1,menuSprite2,menuSprite3,this.menuCallbackPersonalMessage,this);\n\t\tmenuItem.setName(player.player_position.toString());\n\t\tmenuItem.attr({\n\t\t\tx : 0,\n\t\t\ty : 0,\n\t\t\tanchorX : 0,\n\t\t\tanchorY : 0\n\t\t});\n\t\tvar menu=new cc.Menu(menuItem);\n\t\tmenu.attr({\n\t\t\tx : 0,\n\t\t\ty : 0,\n\t\t\tanchorX : 0,\n\t\t\tanchorY : 0\n\t\t});\n\t\tplayer.spritePhotoMobile.addChild(menu);\n\t\t*/\n\t\tthis.playerNum++;\n\t},\n\tonFapai_function(data){\n\t\tcc.log(\"onFapai\" + JSON.stringify(data));\n\t\tvar instruction_faPai = data[\"msg\"];\n\t\tthis.count = data[\"round\"];\n\t\tif(instruction_faPai==\"fapaile!\"){\n\t\t\t/*更新房间状态和玩家信息*/\n\t\t\t//初始化发牌的位置\n\t\t\tthis.currentGetPowerPlayerPosition = data[\"location\"];\n\t\t\tthis.startDealCardPosition1 = data[\"location\"];\n\t\t\tthis.startDealCardPosition = data[\"location\"];\n\t\t\t\n\t\t\t//更新房间状态\n\t\t\tthis.roomState=1;\n\t\t\tfor(var i = 0;i < this.betPhotoArray.length;i++){\n\t\t\t\tthis.betPhotoArray[i].removeFromParent();\n\t\t\t}\n\t\t\tthis.betPhotoArray.length=0;\n\t\t\t//更新玩家信息\n\t\t\tfor(var i=0;i<g_players.length;i++){\n\t\t\t\t//清除玩家手中上一局的牌，\n\t\t\t\tvar player_com = g_players[i].getComponent(\"zjh_player\");\n\t\t\t\tplayer_com.remove_cards();\n\t\t\t}\n\t\t\tthis.bet = g_betArray[0];\n\t\t\tthis.sumBet = data[\"all_chip\"];\n\n\t\t\t/*初始化玩家手中的牌（背面），权限isPower,开牌checkCard弃牌abandon,失败提示精灵loserSprite*/\n\t\t\tfor(var i=0;i < g_players.length;i++){\n\t\t\t\tvar player_com = g_players[i].getComponent(\"zjh_player\");\n\t\t\t\tplayer_com.init_cards();\n\t\t\t\tplayer_com.is_power = 2;\n\t\t\t\tplayer_com.check_card = false;\n\t\t\t\tplayer_com.abandon = false;\n\t\t\t\tplayer_com.hide_status_sprite();\n\t\t\t}\n\t\t\t//玩家收牌状态更新\n\t\t\tfor(var i=0;i < g_players.length;i++){\n\t\t\t\tvar player = g_players[i];\n\t\t\t\tvar player_com = player.getComponent(\"zjh_player\");\n\t\t\t\tthis.actionBottomBet(player.getPosition());\n\t\t\t\tplayer_com.resetMoneyLabel(player_com.my_gold - this.bet);\n\t\t\t\tif(player_com.position_server == this.currentGetPowerPlayerPosition){\n\t\t\t\t\tplayer_com.setSpriteStatus(\"shou\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tonShoupai_function(data){\n\t\tcc.log(\"onShoupai:\" + JSON.stringify(data));\n\n\t\t//初始化myselfCards数组\n\t\tthis.myselfCards.splice(0,this.myselfCards.length);\n\n\t\tvar cardType = data[\"paixing\"];\n\t\tfor(i = 1;i < 4;i++){\n\t\t\tvar suit=cardType[\"s\" + i];\n\t\t\tvar rank=cardType[\"p\" + i];\n\t\t\tvar card = new Array();\n\t\t\tcard.push(suit);\n\t\t\tcard.push(rank);\n\t\t\tthis.myselfCards.push(card);\n\t\t}\n\n\t\t//初始化玩家自己的正面牌并放好位置\n\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"zjh_player\");\n\t\t\tif(player_com.position_server == g_myselfPlayerPos){\n\t\t\t\tfor(var j = 0; j < 3;j++){\n\t\t\t\t\tvar card = this.myselfCards[j];\n\t\t\t\t\tplayer_com.set_card_sprite(j,parseInt(card[0]),parseInt(card[1]));\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tthis.myselfCardsReach=true;\n\t\t//给玩家发牌动作，由于服务器还没有给开始发牌位置信息，目前默认为从客户端位置最小的开始发牌\n\t\tvar size = cc.director.getVisibleSize();\n\t\tvar acMoveDown = cc.moveTo(0.5,this.node.convertToNodeSpaceAR(cc.p(size.width/2,size.height)));\n\t\tcc.log(\"startFaPaiPosition:\" + this.currentGetPowerPlayerPosition);\n\t\tvar callFuncActionDealCard = cc.callFunc(this.actionFaPai,this);\n\t\tg_dealCardBack.runAction(cc.sequence(new cc.EaseOut(acMoveDown,20),callFuncActionDealCard));\n\t},\n\tonOpen_function(data){\n\t\tcc.log(\"onOpen:\" + JSON.stringify(data));\n\t\tvar all_players = g_players.concat(g_players_noPower);\n\t\tvar playerName = data[\"user\"];\n\t\tfor(var i = 0;i < all_players.length;i++){\n\t\t\tvar player_com = all_players[i].getComponent(\"zjh_player\");\n\t\t\tif(player_com.id == playerName){\n\t\t\t\tplayer_com.check_card = true;\n\t\t\t\tif(player_com.position_server == g_myselfPlayerPos){\n\t\t\t\t\t//如果是自己则执行翻牌动作\n\t\t\t\t\tfor(var j = 0;j < 3;j++){\n\t\t\t\t\t\tvar backCardSeq = cc.sequence(cc.delayTime(0.45),cc.hide());\n\t\t\t\t\t\tvar backCamera = cc.rotateBy(0.45,0,-90);\n\t\t\t\t\t\tvar backSpawn = cc.spawn(backCardSeq,backCamera);\n\t\t\t\t\t\tvar frontSeq = cc.sequence(cc.delayTime(0.45),cc.show());\n\t\t\t\t\t\tvar frontCamera = cc.rotateBy(0.6,0,-360);\n\t\t\t\t\t\tvar frontSpawn = cc.spawn(frontSeq,frontCamera);\n\t\t\t\t\t\tvar card = player_com.my_cards[j].getComponent(\"zjh_card\");\n\t\t\t\t\t\tcard.sprite_back.node.runAction(backSpawn);\n\t\t\t\t\t\tcard.sprite.runAction(frontSpawn);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//重置定时器\n\t\t\t\tif(player_com.position_server == this.currentGetPowerPlayerPosition){\n\t\t\t\t\tplayer_com.stop_timer();\n\t\t\t\t\tplayer_com.start_timer();\n\t\t\t\t}\n\t\t\t\tplayer_com.setSpriteStatus(\"kan\");\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t},\n\tonThrow_function(data){\n\t\tcc.log(\"onThrow:\" + JSON.stringify(data));\n\t\tvar all_players = g_players.concat(g_players_noPower);\n\t\tvar playerName = data[\"user\"];\n\t\tfor(var i = 0;i < all_players.length;i++){\n\t\t\tvar player = all_players[i];\n\t\t\tvar player_com = player.getComponent(\"zjh_player\");\n\t\t\tif(player_com.id == playerName){\n\t\t\t\tplayer_com.abandon = true;\n\t\t\t\tif(player_com.position_server == g_myselfPlayerPos){\n\t\t\t\t\tthis.initButtonEnableAfterThrow();\n\t\t\t\t}\n\t\t\t\tplayer_com.setSpriteStatus(\"qi\");\n\t\t\t\t//将玩家移到player_noPower数组\n\t\t\t\tg_players_noPower.push(player);\n\t\t\t\tg_players.splice(i,1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t},\n\tonFollow_function(data){\n\t\tcc.log(\"onFollow:\" + JSON.stringify(data));\n\t\tvar m_playerId = data[\"player_id\"];\n\t\tthis.sumBet = data[\"all_chip\"];\n\t\tvar all_players = g_players.concat(g_players_noPower);\n\t\tfor(var i=0;i < all_players.length;i++){\n\t\t\tvar player = all_players[i];\n\t\t\tvar player_com = player.getComponent(\"zjh_player\");\n\t\t\tif(player_com.id == m_playerId){\n\t\t\t\tplayer_com.resetMoneyLabel(parseInt(data[\"my_gold\"]));\n\t\t\t\tthis.actionFollowBet(player.getPosition(),player_com.check_card);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t},\n\tonAddChip_function(data){\n\t\tconsole.log(\"onAddChip:\" + JSON.stringify(data));\n\t\tvar m_playerId = data[\"player_id\"];\n\t\tthis.bet = data[\"current_chip\"];\n\t\tthis.sumBet = data[\"all_chip\"];\n\t\tvar all_players = g_players.concat(g_players_noPower);\n\t\tfor(var i=0;i < all_players.length;i++){\n\t\t\tvar player = all_players[i];\n\t\t\tvar player_com = player.getComponent(\"zjh_player\");\n\t\t\tif(player_com.id == m_playerId){\n\t\t\t\tplayer_com.resetMoneyLabel(parseInt(data[\"my_gold\"]));\n\t\t\t\tthis.actionFollowBet(player.getPosition(),player_com.check_card);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t},\n\tonLeave_function(data){\n\t\tcc.log(\"onLeave:\" + JSON.stringify(data));\n\t\tvar playerName = data[\"user\"];\n\t\tvar isFind = false;\n\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"zjh_player\");\n\t\t\tif(player_com.id == playerName){\n\t\t\t\tcc.log(\"quit from zjh room g_players\");\n\t\t\t\tplayer_com.remove_cards();\n\t\t\t\tplayer.active = false;\n\t\t\t\tg_players.splice(i,1);\n\t\t\t\tisFind = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif(isFind==false){\n\t\t\tfor(var i = 0;i < g_players_noPower.length;i++){\n\t\t\t\tvar player = g_players_noPower[i];\n\t\t\t\tvar player_com = player.getComponent(\"zjh_player\");\n\t\t\t\tif(player_com.id == playerName){\n\t\t\t\t\tcc.log(\"quit from zjh room g_players_noPower\");\n\t\t\t\t\tplayer_com.remove_cards();\n\t\t\t\t\tplayer.active = false;\n\t\t\t\t\tg_players_noPower.splice(i,1);\n\t\t\t\t\tisFind = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.playerNum--;\n\t},\n\tonChangePlayer_function(data){\n\t\tcc.log(\"onChangePlayer:\" + JSON.stringify(data));\n\t\tvar rotationPlayerPositionServer = data[\"location\"];\n\t\t//暂停当前玩家定时器,并初始化玩家按钮定时器\n\t\tvar tmp_allplayers = g_players_noPower.concat(g_players);\n\t\tfor(var i=0;i < tmp_allplayers.length;i++){\n\t\t\tvar player_com = tmp_allplayers[i].getComponent(\"zjh_player\");\n\t\t\tif(player_com.position_server == this.currentGetPowerPlayerPosition){\n\t\t\t\tplayer_com.stop_timer();\n\t\t\t\tif(this.currentGetPowerPlayerPosition == g_myselfPlayerPos){\n\t\t\t\t\tthis.bipai_button.getComponent(cc.Button).interactable = false;\n\t\t\t\t\tthis.genzhu_button.getComponent(cc.Button).interactable = false;\n\t\t\t\t\tthis.jiazhu_button.getComponent(cc.Button).interactable = false;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t//开启轮换到的玩家\n\t\tif(g_players.length >= 2) {\n\t\t\tthis.currentGetPowerPlayerPosition = rotationPlayerPositionServer;\n\t\t\tfor (var i = 0; i < g_players.length; i++) {\n\t\t\t\tvar player_com = g_players[i].getComponent(\"zjh_player\");\n\t\t\t\tif (player_com.position_server == rotationPlayerPositionServer) {\n\t\t\t\t\tplayer_com.start_timer();\n\t\t\t\t\tif (rotationPlayerPositionServer == g_myselfPlayerPos) {\n\t\t\t\t\t\tthis.bipai_button.getComponent(cc.Button).interactable = true;\n\t\t\t\t\t\tthis.genzhu_button.getComponent(cc.Button).interactable = true;\n\t\t\t\t\t\tthis.jiazhu_button.getComponent(cc.Button).interactable = true;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tonBipai_function(data){\n\t\tcc.log(\"onBipai:\" + JSON.stringify(data));\n\t\tvar winnerPositionServer = data[\"winner\"];\n\t\tthis.sumBet = data[\"all_chip\"];\n\t\tvar playerPositionServer1 = data[\"position1\"];\n\t\tvar playerPositionServer2 = data[\"position2\"];\n\n\t\tvar loserPositionServer=null;\n\t\tif(playerPositionServer1 == winnerPositionServer){\n\t\t\tloserPositionServer = playerPositionServer2;\n\t\t}else{\n\t\t\tloserPositionServer = playerPositionServer1;\n\t\t}\n\t\tcc.log(\"loserPositionServer:\" + loserPositionServer);\n\n\t\t//置房间状态为比牌状态并定时重置回来\n\t\tthis.comparableState=true;\n\t\tvar delayCompare = new cc.DelayTime(4.8);\n\t\tvar callbackSetRoomStateCompare = cc.callFunc(this.setRoomStateCompare,this);\n\t\tthis.node.runAction(cc.sequence(delayCompare,callbackSetRoomStateCompare));\n\n\t\t//停止当前定时器进度条\n\t\tvar tmp_allplayers = g_players_noPower.concat(g_players);\n\t\tfor(var i = 0;i < tmp_allplayers.length;i++){\n\t\t\tvar player_com = tmp_allplayers[i].getComponent(\"zjh_player\");\n\t\t\tif(player_com.position_server == this.currentGetPowerPlayerPosition){\n\t\t\t\tplayer_com.stop_timer();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t//和自己相关的比牌时，为避免影响比牌的动作动画，先关闭开牌和弃牌按钮，比牌完毕再回复\n\t\tif(playerPositionServer1 == g_myselfPlayerPos ||playerPositionServer2 == g_myselfPlayerPos){\n\t\t\tthis.bipai_button.getComponent(cc.Button).interactable = false;\n\t\t\tthis.jiazhu_button.getComponent(cc.Button).interactable = false;\n\t\t\tthis.genzhu_button.getComponent(cc.Button).interactable = false;\n\t\t\tthis.qipai_button.getComponent(cc.Button).interactable = false;\n\t\t\tthis.kaipai_button.getComponent(cc.Button).interactable = false;\n\t\t}\n\n\t\t//发起比牌的玩家执行跟注动作\n\t\tcc.log(\"start 发起比牌的玩家执行跟注动作\" + tmp_allplayers.length);\n\t\tfor(var i = 0;i < tmp_allplayers.length;i++){\n\t\t\tvar player = tmp_allplayers[i];\n\t\t\tvar player_com = player.getComponent(\"zjh_player\");\n\t\t\tif(player_com.position_server == playerPositionServer1){\n\t\t\t\tplayer_com.resetMoneyLabel(parseInt(data[\"my_gold\"]));\n\t\t\t\tthis.actionFollowBet(player.getPosition(),player_com.check_card);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t//执行比牌动画\n\t\tthis.actionBiPai(playerPositionServer1,playerPositionServer2,loserPositionServer);\n\t},\n\tonEnd_function(data){\n\t\tcc.log(\"onEnd:\" + JSON.stringify(data));\n\t\tvar all_players = g_players.concat(g_players_noPower);\n\t\tvar playerPositionServer = data[\"winner\"];\n\t\tfor(var i = 0;i < all_players.length;i++){\n\t\t\tvar player = all_players[i];\n\t\t\tvar player_com = player.getComponent(\"zjh_player\");\n\t\t\tif(player_com.position_server == playerPositionServer){\n\t\t\t\t//如果房间属于比牌状态，需要等到比牌动作完成才执行获取金币动作\n\t\t\t\tif(this.comparableState == true){\n\t\t\t\t\tif(this.bipai_ui.isValid == true){\n\t\t\t\t\t\tvar compareTime = 4.8 - this.bipai_ui.getComponent(\"zjh_compare\").get_cur_time();\n\n\t\t\t\t\t\tvar waitGetBetTime=new cc.DelayTime(compareTime);\n\t\t\t\t\t\tvar callBackWinnerGetBet= cc.callFunc(\n\t\t\t\t\t\t\tthis.actionWinnerGetBet,this,player.getPosition());\n\t\t\t\t\t\tthis.runAction(cc.sequence(waitGetBetTime,callBackWinnerGetBet));\n\t\t\t\t\t\tcc.log(\"compareTime:\" + compareTime);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.actionWinnerGetBet(this,player.getPosition());\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis.actionWinnerGetBet(this,player.getPosition());\n\t\t\t\t}\n\t\t\t\tplayer_com.resetMoneyLabel(player_com.my_gold + parseInt(data[\"all_chip\"]));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t/* 结束则把玩家放入noPower中*/\n\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\tg_players_noPower.push(g_players[i]);\n\t\t}\n\t\tg_players.splice(0,g_players.length);\n\t},\n\tonEndPai_function(data){\n\t\tcc.log(\"onEndPai:\"+JSON.stringify(data));\n\t\t//获胜者的牌型\n\t\tvar winnerCardType = data[\"winner_pai\"];\n\t\tvar tmp_allplayers = g_players_noPower.concat(g_players);\n\t\t//位置1的牌型\n\t\tfor(i = 1; i < 6; i++){\n\t\t\tvar cardString = data[\"location\" + i];\n\t\t\tif(cardString != null&& cardString !=\"null\" && g_myselfPlayerPos != i){\n\t\t\t\tconsole.log(\"location:num:\" + i);\n\t\t\t\tcardString=JSON.parse(cardString);\n\t\t\t\tvar tmp_card = new Array();\n\t\t\t\t\n\t\t\t\tvar suit1=cardString[\"s1\"];\n\t\t\t\tvar rank1=cardString[\"p1\"];\n\t\t\t\tvar suit2=cardString[\"s2\"];\n\t\t\t\tvar rank2=cardString[\"p2\"];\n\t\t\t\tvar suit3=cardString[\"s3\"];\n\t\t\t\tvar rank3=cardString[\"p3\"];\n\t\t\t\tfor(var j = 0;j < tmp_allplayers.length;j++){\n\t\t\t\t\tvar player = tmp_allplayers[j];\n\t\t\t\t\tvar player_com = player.getComponent(\"zjh_player\");\n\t\t\t\t\tif(player_com.position_server == i){\n\t\t\t\t\t\tfor(var m = 0;m < 3;m++){\n\t\t\t\t\t\t\tvar card = player_com.my_cards[m].getComponent(\"zjh_card\");\n\t\t\t\t\t\t\tcard.initCardSprite(parseInt(cardString[\"s\" + (m + 1)]),parseInt(cardString[\"p\" + (m + 1)]));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t/*打开所有牌的*/\n\t\t//如果房间属于比牌状态，需要等到比牌动作完成才执行打开所有牌的动作\n\t\tif(this.comparableState == true){\n\t\t\tif(this.bipai_ui.isValid == true){\n\t\t\t\tvar compareTime = 1.5 + 4.8 - this.bipai_ui.getComponent(\"zjh_compare\").get_cur_time();\n\t\t\t\tvar waitGetBetTime=new cc.DelayTime(compareTime);\n\t\t\t\tvar callbackOpenAllCard = cc.callFunc(this.openAllCard,this,winnerCardType);\n\t\t\t\tthis.runAction(cc.sequence(waitGetBetTime,callbackOpenAllCard));\n\t\t\t\tconsole.log(\"compareTime:\"+compareTime);\n\t\t\t}else{\n\t\t\t\tthis.openAllCard(null,winnerCardType);\n\t\t\t}\n\t\t\tconsole.log(\"room is comparing...........................................\");\n\t\t}else{\n\t\t\tthis.openAllCard(null,winnerCardType);\n\t\t}\n\t},\n\tonUserBroadcast_function(data){\n\t\tconsole.log(\"onUserBroadcast:\"+JSON.stringify(data));\n\t\tvar msage_scroll_com = this.msage_scroll.getComponent(\"msage_scroll\");\n\t\tmsage_scroll_com.set_string(data);\n\t},\n\tonNoRound_function(data){\n\t\tconsole.log(\"onNoRound:\"+JSON.stringify(data));\n\t\tvar size = cc.director.getVisibleSize();\n\t\tvar golds_info = data[\"golds\"];\n\t\tvar tplayers = new Array();\n\t\tfor(var key in golds_info){\n\t\t\ttplayers.push(golds_info[key]);\n\t\t}\n\t\tvar pop_game_finish = cc.instantiate(g_assets[\"pop_game_finish\"]);\n\t\tvar pop_game_finish_com = pop_game_finish.getComponent(\"pop_game_finish\");\n\t\tpop_game_finish_com.init_info(tplayers);\n\t\tvar x = size.width/2;\n\t\tvar y = size.height/2;\n\t\tthis.node.addChild(pop_game_finish);\n\t\tpop_game_finish.setPosition(this.node.convertToNodeSpaceAR(cc.p(x,y)));\n\t},\n\tonGetUinfo_function(data){\n\t\tconsole.log(\"onNoRound:\"+JSON.stringify(data));\n\t\tvar size = cc.director.getWinSize();\n\t\t//显示玩家信息\n\t\tif(data[\"send_from\"] == g_myselfPlayerPos){\n\t\t\tthis.uinfo = cc.instantiate(g_assets[\"pop_game_user\"]);\n\t\t\tvar uinfo_com = this.uinfo.getComponent(\"pop_game_user\");\n\t\t\t\n\t\t\tuinfo_com.init_info(data,this.actionSendGift);\n\t\t\tthis.node.addChild(this.uinfo);\n\t\t\tthis.uinfo.setPosition(this.node.convertToNodeSpaceAR(cc.p(size.width/2,size.height/2)));\n\t\t}\n\t},\n\tactionSendGift(pnode,type,send_from,send_to){\n\t\tcc.log(\"actionSendGift\",type,send_from,send_to);\n\t\tvar s_player = null;\n\t\tvar e_player = null;\n\t\tvar all_players = g_players.concat(g_players_noPower);\n\t\tif(send_from == send_to){\n\t\t\treturn false;\n\t\t}\n\t\tfor(var i = 0;i < all_players.length;i++){\n\t\t\tvar player_com = all_players[i].getComponent(\"zjh_player\");\n\t\t\tif(player_com.position_server == send_from){\n\t\t\t\ts_player = all_players[i];\n\t\t\t}\n\t\t\tif(player_com.position_server == send_to){\n\t\t\t\te_player = all_players[i];\n\t\t\t}\n\t\t}\n\t\tvar active = null;\n\t\tvar active_name = null;\n\t\t//送鸡蛋\n\t\tif(type == 1){\n\t\t\tactive = cc.instantiate(g_assets[\"shoe_active\"]);\n\t\t\tactive_name = \"shoe_active\";\n\t\t}else if(type == 2){\n\t\t\tactive = cc.instantiate(g_assets[\"egg_active\"]);\n\t\t\tactive_name = \"egg_active\";\n\t\t}else if(type == 3){\n\t\t\tactive = cc.instantiate(g_assets[\"bomb_active\"]);\n\t\t\tactive_name = \"bomb_active\";\n\t\t}else if(type == 4){\n\t\t\tactive = cc.instantiate(g_assets[\"kiss_active\"]);\n\t\t\tactive_name = \"kiss_active\";\n\t\t}else if(type == 5){\n\t\t\tactive = cc.instantiate(g_assets[\"flower_active\"]);\n\t\t\tactive_name = \"flower_active\";\n\t\t}else if(type == 6){\n\t\t\tactive = cc.instantiate(g_assets[\"cheers_active\"]);\n\t\t\tactive_name = \"cheers_active\";\n\t\t}\n\t\tpnode.addChild(active);\n\t\tactive.setPosition(s_player.getPosition());\n\t\t\n\t\tvar move = cc.moveTo(0.5,e_player.getPosition());\n\t\tvar rotation = cc.rotateBy(0.5,360);\n\t\tvar spawn = cc.spawn(move,rotation);\n\t\tvar self = this;\n\t\tvar sendAction = cc.callFunc(function(){\n\t\t\tvar anim = active.getComponent(cc.Animation);\n\t\t\tanim.on('finished',  function(){\n\t\t\t\tactive.destroy();\n\t\t\t},null);\n\t\t\tvar animStatus = anim.play(active_name);\n\t\t\t// 设置循环模式为 Normal\n\t\t\tanimStatus.wrapMode = cc.WrapMode.Normal;\n\t\t\t// 设置循环模式为 Loop\n\t\t\tanimStatus.wrapMode = cc.WrapMode.Loop;\n\t\t\t// 设置动画循环次数为2次\n\t\t\tanimStatus.repeatCount = 1;\n\t\t});\n\t\tactive.runAction(cc.sequence(spawn,sendAction));\n\t},\n\tactionFaPai(){\n    \tvar size=cc.director.getVisibleSize();\n    \tvar isFind=false;\n    \tvar playerArrayPosition=-1;\n    \tcc.log(\"start into actionDealCards........startDealCardPosition1:\" + this.startDealCardPosition1);\n\t\tcc.log(\"start into actionDealCards........startDealCardPosition:\" + this.startDealCardPosition);\n    \tif(this.startDealCardPosition1==this.startDealCardPosition){this.fapai_count++}\n    \tif(this.fapai_count > 3){\n\t\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\t\tvar player = g_players[i];\n\t\t\t\tvar player_com = player.getComponent(\"zjh_player\");\n\t\t\t\tif(player_com.position_server == g_myselfPlayerPos){\n\t\t\t\t\tthis.setPlayerCardsPosition(player,3);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n    \t\tthis.fapai_count=0;\n    \t\tthis.startDealCardPosition1 = this.startDealCardPosition;\n    \t\tvar acMoveUp = cc.moveBy(0.5,cc.p(0,g_dealCardBack.getContentSize().height/2));\n    \t\tvar acMoveUp1 = new cc.EaseIn(acMoveUp,10);\n    \t\tvar acInitMenuItemCallback = cc.callFunc(this.startFirstRotationPosition,this);\n    \t\tg_dealCardBack.runAction(cc.sequence(acMoveUp1, acInitMenuItemCallback));\n    \t\treturn;\n    \t}\n    \tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player_com = g_players[i].getComponent(\"zjh_player\");\n    \t\tif(player_com.position_server == this.startDealCardPosition1){\n    \t\t\tplayerArrayPosition = i;\n    \t\t\tisFind=true;\n    \t\t\tbreak;\n    \t\t}\n    \t}\n\t\tif(isFind == true){\n\t\t\tif(playerArrayPosition == -1){\n\t\t\t\tcc.log(\"outside error.......................actionDealCards:function()\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.startDealCardPosition1++;\n\t\t\tthis.startDealCardPosition1 = this.startDealCardPosition1%5;\n\t\t\tif(this.startDealCardPosition1==0){\n\t\t\t\tthis.startDealCardPosition1 = 5;\n\t\t\t}\n\t\t\tvar player = g_players[playerArrayPosition];\n\t\t\tvar player_com = player.getComponent(\"zjh_player\");\n\t\t\tvar position = this.calc_player_card_position(player,this.fapai_count - 1);\n\t\t\tcc.log(\"position:x:\" + position.x + \" y:\" + position.y);\n\t\t\tvar acMoveDown1 = cc.moveTo(0.2,this.node.convertToNodeSpaceAR(cc.p(size.width/2,size.height/2)));\n\t\t\tvar acToCardPlayer = cc.moveTo(0.1,position);\n\t\t\tvar callFunc = cc.callFunc(this.actionFaPai,this);\n\t\t\tvar card = player_com.my_cards[this.fapai_count - 1];\n\t\t\tcard.runAction(cc.sequence(acMoveDown1,acToCardPlayer,callFunc));\n\t\t}else{\n\t\t\tthis.startDealCardPosition1++;\n\t\t\tthis.startDealCardPosition1 = this.startDealCardPosition1%5;\n\t\t\tif(this.startDealCardPosition1==0){\n\t\t\t\tthis.startDealCardPosition1 = 5;\n\t\t\t}\n\t\t\tthis.actionFaPai();\n\t\t}\n    },\n\tactionBiPai(playerPositionServer1,playerPositionServer2,loserPositionServer){\n\t\tcc.log(\"go into actionBiPai .......\");\n    \tvar size = cc.director.getWinSize();\n\t\tvar left_player = null;\n\t\tvar right_player = null;\n\t\t\n\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player_com = g_players[i].getComponent(\"zjh_player\");\n\t\t\tif(player_com.position_server == playerPositionServer1){\n\t\t\t\tleft_player = g_players[i];\n\t\t\t}\n\t\t\tif(player_com.position_server == playerPositionServer2){\n\t\t\t\tright_player = g_players[i];\n\t\t\t}\n\t\t}\n\t\t//获取三张牌的位置，供以后用\n    \tvar cardPosition = new Array(3);\n\t\tvar left_player_com = left_player.getComponent(\"zjh_player\");\n    \tcardPosition[0] = left_player_com.my_cards[0].getPosition();\n    \tcardPosition[1] = left_player_com.my_cards[1].getPosition();\n    \tcardPosition[2] = left_player_com.my_cards[2].getPosition();\n    \tvar cardPositionOther = new Array(3);\n\t\tvar right_player_com = right_player.getComponent(\"zjh_player\");\n    \tcardPositionOther[0] = right_player_com.my_cards[0].getPosition();\n    \tcardPositionOther[1] = right_player_com.my_cards[1].getPosition();\n    \tcardPositionOther[2] = right_player_com.my_cards[2].getPosition();\n\t\t\n\t\t\n\t\t//添加比牌背景UI\n\t\tthis.bipai_ui = cc.instantiate(g_assets[\"zjhbipai_scene\"]);\n\t\tvar bipai_ui_com = this.bipai_ui.getComponent(\"zjh_compare\");\n\t\tbipai_ui_com.init_info(left_player_com.nick_name,right_player_com.nick_name);\n\t\tthis.node.addChild(this.bipai_ui);\n\t\tthis.bipai_ui.setPosition(this.node.convertToNodeSpaceAR(cc.p(size.width/2,size.height/2)));\n\t\t//左面的牌动作\n\t\tfor(var j = 0;j < 3;j++){\n\t\t\t//移动到比牌位置动作\n\t\t\tvar card_pos = bipai_ui_com.get_card_position(bipai_ui_com.left_cards[j]);\n\t\t\tvar bipai_position = cc.p(size.width/2 + card_pos.x,size.height/2 + card_pos.y);\n\t\t\tvar moveToBiPaiPosition = cc.moveTo(1.5,card_pos);\n\t\t\t//移动到原来的位置\n\t\t\tvar moveToOriginPosition = cc.moveTo(1.5,cardPosition[j]);\n\t\t\tvar _seqBack=cc.sequence(moveToBiPaiPosition,cc.delayTime(2),moveToOriginPosition);\n\t\t\tleft_player_com.my_cards[j].runAction(_seqBack);\n\t\t}\n\t\t//右面的牌动作\n\t\tfor(var j = 0;j < 3;j++){\n\t\t\t//移动到比牌位置动作\n\t\t\tvar card_pos = bipai_ui_com.get_card_position(bipai_ui_com.right_cards[j]);\n\t\t\tvar bipai_position = cc.p(size.width/2 + card_pos.x,size.height/2 + card_pos.y);\n\t\t\tvar moveToBiPaiPosition = cc.moveTo(1.5,card_pos);\n\t\t\t//移动到原来的位置\n\t\t\tvar moveToOriginPosition = cc.moveTo(1.5,cardPositionOther[j]);\n\t\t\tvar _seqBack=cc.sequence(moveToBiPaiPosition,cc.delayTime(2),moveToOriginPosition);\n\t\t\tright_player_com.my_cards[j].runAction(_seqBack);\n\t\t}\n    \tbipai_ui_com.bipai_start(1.5);\n    \t/*回调提示比牌失败者*/\n\t\tcc.log(\"start go into displayLoser .......\");\n    \tvar displayWaitTime = new cc.DelayTime(4.8);\n    \tvar setDisplayLoserCallback = cc.callFunc(this.displayLoser,this,loserPositionServer);\n    \tthis.node.runAction(cc.sequence(displayWaitTime,setDisplayLoserCallback));\n\t\tcc.log(\"end go into displayLoser .......\");\n    },\n\tactionBottomBet(player_position){\n       var size=cc.director.getVisibleSize();\n       var countNumber=-1;\n       for(var j=0;j < g_betArray.length;j++){\n           if(this.bet == g_betArray[j]){\n               j++;\n               countNumber = j;\n               break;\n           }\n       }\n       if(countNumber==-1){\n           cc.log(\"error........outside actionBottomBet:function\");\n           return;\n       }\n\t   var chip = cc.instantiate(g_assets[\"chip_\" + this.bet]);\n       this.node.addChild(chip);\n       this.betPhotoArray.push(chip);\n\t   chip.setPosition(player_position);\n       var x=size.width/3+size.width/3*Math.random();\n       var y=size.height/2 + 150 *Math.random();\n\t   var move_pos = this.node.convertToNodeSpaceAR(cc.p(x,y));\n       var moveBet=cc.moveTo(0.3,move_pos);\n       chip.runAction(moveBet);\n\t},\n\tactionFollowBet(player_position,isCheckCard){\n\t\tcc.log(\"go into actionFollowBet......\" + isCheckCard);\n        var size=cc.director.getWinSize();\n        var countNumber=-1;\n        for(var j=0;j<g_betArray.length;j++){\n            if(this.bet==g_betArray[j]){\n                j++;\n                countNumber=j;\n                break;\n            }\n        }\n\t\tvar chipNum = 1;\n\t\tif(isCheckCard == true){\n\t\t\tchipNum = 2;\n\t\t}\n\t\t//如果等于-1 说明没有单独的筹码符合 需要组合筹码\n        if(countNumber==-1){\n\t\t\tcc.log(\"error........outside actionFollowBet:function\");\n\t\t\treturn;\n        }\n        \n        while(chipNum > 0){\n\t\t\tvar chip = cc.instantiate(g_assets[\"chip_\" + this.bet]);\n\t\t\tthis.node.addChild(chip);\n\t\t\tthis.betPhotoArray.push(chip);\n\t\t\tchip.setPosition(player_position);\n\t\t\tvar x=size.width/3+size.width/3*Math.random();\n\t\t\tvar y=size.height/2 + 150 *Math.random();\n\t\t\tvar move_pos = this.node.convertToNodeSpaceAR(cc.p(x,y));\n\t\t\tvar moveBet=cc.moveTo(0.3,move_pos);\n\t\t\tchip.runAction(moveBet);\n            chipNum--;\n        }\n    },\n\topenAllCard:function(mythis,winnerCardType){\n        //打开自己的牌\n\t\tvar tmp_allplayers = g_players_noPower.concat(g_players);\n\t\tfor(var i=0;i<tmp_allplayers.length;i++){\n\t\t\tvar player = tmp_allplayers[i];\n\t\t\tvar player_com = player.getComponent(\"zjh_player\");\n\t\t\tif(player_com.position_server == g_myselfPlayerPos){\n\t\t\t\tif(player_com.check_card == false && player.is_power == 2){\n                    for(var j=0;j<3;j++){\n\t\t\t\t\t\tvar backCardSeq = cc.sequence(cc.delayTime(0.45),cc.hide());\n\t\t\t\t\t\tvar backCamera = cc.rotateBy(0.45,0,-90);\n\t\t\t\t\t\tvar backSpawn = cc.spawn(backCardSeq,backCamera);\n\t\t\t\t\t\tvar frontSeq = cc.sequence(cc.delayTime(0.45),cc.show());\n\t\t\t\t\t\tvar frontCamera = cc.rotateBy(0.6,0,-360);\n\t\t\t\t\t\tvar frontSpawn = cc.spawn(frontSeq,frontCamera);\n\t\t\t\t\t\tvar card = player_com.my_cards[j].getComponent(\"zjh_card\");\n                        card.sprite_back.node.runAction(backSpawn);\n                        card.sprite.runAction(frontSpawn);\n                    }\n                }\n                break;\n            }\n        }\n\n        for(var i=0;i<tmp_allplayers.length;i++){\n\t\t\tvar player = tmp_allplayers[i];\n\t\t\tvar player_com = player.getComponent(\"zjh_player\");\n            if(player_com.position_server != g_myselfPlayerPos && player_com.is_power == 2){\n            \tfor(var j=0;j<3;j++){\n            \t\tvar backCardSeq = cc.sequence(cc.delayTime(0.45),cc.hide());\n\t\t\t\t\tvar backCamera = cc.rotateBy(0.45,0,-90);\n\t\t\t\t\tvar backSpawn = cc.spawn(backCardSeq,backCamera);\n\t\t\t\t\tvar frontSeq = cc.sequence(cc.delayTime(0.45),cc.show());\n\t\t\t\t\tvar frontCamera = cc.rotateBy(0.6,0,-360);\n\t\t\t\t\tvar frontSpawn = cc.spawn(frontSeq,frontCamera);\n\t\t\t\t\tvar card = player_com.my_cards[j].getComponent(\"zjh_card\");\n\t\t\t\t\tcard.sprite_back.node.runAction(backSpawn);\n\t\t\t\t\tcard.sprite.runAction(frontSpawn);\n            \t}\n            }\n        }\n    },\n\tcalc_player_card_position:function(player,m){\n\t\tvar player_com = player.getComponent(\"zjh_player\");\n\t\tvar x = 0;\n\t\tvar y = 0;\n\t\tif(player_com.player_position == 1){\n\t\t\tx = player.getPositionX() + player_com.mobile_sprite.node.getContentSize().width + g_dealCardBack.getContentSize().width/2*(m);\n\t\t\ty = player.getPositionY();\n\t\t}else if(player_com.player_position == 2){\n\t\t\tx = player.getPositionX() - (3-m)*30;\n\t\t\ty = player.getPositionY() + player_com.mobile_sprite.node.height + 30;\n\t\t}else if(player_com.player_position == 3){\n\t\t\tx = player.getPositionX() - (3-m)*30;\n\t\t\ty = player.getPositionY() - player_com.mobile_sprite.node.height - 30;\n\t\t}else if(player_com.player_position == 4){\n\t\t\tx = player.getPositionX() + m*30;\n\t\t\ty = player.getPositionY() - player_com.mobile_sprite.node.height - 30;\n\t\t}else if(player_com.player_position == 5){\n\t\t\tx = player.getPositionX() + m*30;\n\t\t\ty = player.getPositionY() + player_com.mobile_sprite.node.height + 30;\n\t\t}\n\t\tcc.log(\"calc x:\" + x + \" y:\" + y);\n\t\treturn cc.p(x,y);\n\t},\n\tsetPlayerCardsPosition:function(player,card_len){\n\t\tvar player_com = player.getComponent(\"zjh_player\");\n\t\tfor(var m = 0;m < card_len;m++){\n\t\t\tvar position = this.calc_player_card_position(player,m);\n\t\t\tvar card = player_com.my_cards[m];\n\t\t\tcard.setPosition(position);\n\t\t}\n\t},\n\tsetPlayerCardsBackPosition:function(player,card_len){\n\t\tvar player_com = player.getComponent(\"zjh_player\");\n\t\tfor(var m = 0;m < card_len;m++){\n\t\t\tvar position = this.calc_player_card_position(player,m);\n\t\t\tvar card = player_com.my_cards[m].getComponent(\"zjh_card\");\n\t\t\tcard.sprite_back.node.setPosition(this.node.convertToNodeSpaceAR(position));\n\t\t}\n\t},\n\tstartFirstRotationPosition:function (){\n    \tvar rotationPlayerIndexOf=-1;\n    \tfor(var i=0;i<g_players.length;i++){\n\t\t\tvar player_com = g_players[i].getComponent(\"zjh_player\");\n    \t\tif(player_com.position_server == this.currentGetPowerPlayerPosition){\n\t\t\t\tplayer_com.start_timer();\n    \t\t\tbreak;\n    \t\t}\n    \t}\n    \tif(this.currentGetPowerPlayerPosition == g_myselfPlayerPos){\n\t\t\tthis.bipai_button.getComponent(cc.Button).interactable = true;\n\t\t\tthis.genzhu_button.getComponent(cc.Button).interactable = true;\n\t\t\tthis.jiazhu_button.getComponent(cc.Button).interactable = true;\n    \t}\n\t\tthis.kaipai_button.getComponent(cc.Button).interactable = true;\n\t\tthis.qipai_button.getComponent(cc.Button).interactable = true;\n    },\n\tdisplayLoser(mythis,loserPositionServer){\n    \tvar tmp_allplayers = g_players_noPower.concat(g_players);\n        for(var i=0;i < g_players.length;i++){\n\t\t\tvar player_com = g_players[i].getComponent(\"zjh_player\");\n            if(player_com.position_server == loserPositionServer){\n            \tplayer_com.setSpriteStatus(\"loser\");\n\t\t\t\tg_players_noPower.push(g_players[i]);\n\t\t\t\tg_players.splice(i,1);\n                break;\n            }\n        }\n    },\n\tsetRoomStateCompare(){\n        this.comparableState=false;\n    },\n\tactionWinnerGetBet(my_this,playerPosition){\n        for(var j in this.betPhotoArray){\n            var getBetAction =  cc.moveTo(1.0, playerPosition);\n            this.betPhotoArray[j].runAction(cc.sequence(getBetAction,cc.hide()));\n        }\n\t\t//初始化房间状态为非游戏状态\n        this.roomState=0;\n        //置按钮为不可点击\n\t\tthis.initButtonEnableAfterComeInRoom();\n\n        //关闭定时器\n        var tmp_allplayers = g_players_noPower.concat(g_players);\n        for(var i=0;i < tmp_allplayers.length;i++){\n\t\t\tvar player_com = tmp_allplayers[i].getComponent(\"zjh_player\");\n            if(player_com.position_server == this.currentGetPowerPlayerPosition){\n            \tplayer_com.stop_timer();\n                break;\n            }\n        }\n    },\n\tbiPaiSelectCallBack(index){\n\t\tvar localtion1 = g_myselfPlayerPos;\n\t\tvar localtion2 = null;\n\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"zjh_player\");\n\t\t\tif(player_com.player_position == (index + 1)){\n\t\t\t\tlocaltion2 = player_com.position_server;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif(localtion2 != null){\n\t\t\tpomelo.request(util.getGameRoute(), {\n\t\t\t\tprocess: \"bipai\",\n\t\t\t\tlocation1: g_myselfPlayerPos,\n\t\t\t\tlocation2: localtion2\n\t\t\t}, function (data) {\n\t\t\t\tcc.log(JSON.stringify(data));\n\t\t\t});\n\t\t}\n\t},\n\tpomelo_removeListener(){\n\t\tcc.log(\"remove listener\");\n        pomelo.removeListener('onReady');\n\t\tpomelo.removeListener('onGetUinfo');\n        pomelo.removeListener('onFollow');\n        pomelo.removeListener('onAddChip');\n        pomelo.removeListener('onAdd');\n        pomelo.removeListener('onOpen');\n        pomelo.removeListener('onThrow');\n        pomelo.removeListener('onBipai');\n\t\tpomelo.removeListener('onNoRound');\n        pomelo.removeListener('onLeave');\n        pomelo.removeListener('onEnd');\n        pomelo.removeListener('onFapai');\n        pomelo.removeListener('onShoupai');\n        pomelo.removeListener('onChangePlayer');\n        pomelo.removeListener('onEndPai');\n\t\tpomelo.removeListener('onActBroadcast');\n\t\t\n        //pomelo.removeListener('onChatInGame',onChatInGame_function);\n        //pomelo.removeListener('onActBroadcast',onActBroadcast_function);\n        //pomelo.removeListener('onUserBroadcast',onUserBroadcast_function);\n    },\n\n\tonExit(){\n        g_dealCardBack.destroy();\n        g_playerData.splice(0,g_playerData.length);\n        g_roomData.splice(0,g_roomData.length);\n\t\tg_players.splice(0,g_players.length);\n\t\tg_players_noPower.splice(0,g_players_noPower.length);\n\t\tconsole.log(\"exit from the room......\");\n        //释放资源\n        //this.releaseMember();\n\n        //注销监听接口\n        this.pomelo_removeListener();\n\t\tthis.destroy();\n    },\n\t\n});\n"]}