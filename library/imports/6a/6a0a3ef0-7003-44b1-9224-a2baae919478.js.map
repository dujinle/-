{"version":3,"sources":["../../../../../assets/Script/login/assets/Script/login/Login.js"],"names":["cc","Class","extends","Component","properties","version_label","Node","login_type","onLogin","self","size","director","getVisibleSize","saveUserInfo","data","g_user","initdata","player","Storage","setPhoneNumber","phone_num","setPassword","password","setLoginType","setAutoLoginFlag","auto_login","setPasswordFlag","retain_pwd","console","log","JSON","stringify","loadScene","wxLogin","testUser","onLoad","getLoginType"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,UAASF,GAAGG,SADP;;AAGLC,aAAY;AACdC,iBAAcL,GAAGM,IADH;AAEdC,cAAW;AAFG,EAHP;AAORC,QAPQ,qBAOC;AACR,MAAIC,OAAO,IAAX;AACA,MAAIC,OAAOV,GAAGW,QAAH,CAAYC,cAAZ,EAAX;AACA;;;;;;;;;;;;;;;;;;;;;;AAsBA,EAhCO;AAiCRC,aAjCQ,wBAiCKC,IAjCL,EAiCU;AACjBC,WAASD,KAAKE,QAAL,CAAcC,MAAvB;AACAC,UAAQC,cAAR,CAAuBJ,OAAOK,SAA9B;AACMF,UAAQG,WAAR,CAAoBN,OAAOO,QAA3B;AACNJ,UAAQK,YAAR,CAAqB,KAAKhB,UAA1B;AACAW,UAAQM,gBAAR,CAAyB,KAAKC,UAA9B;AACAP,UAAQQ,eAAR,CAAwB,KAAKC,UAA7B;AACMC,UAAQC,GAAR,CAAY,6BAA4BC,KAAKC,SAAL,CAAehB,MAAf,CAAxC;AACNf,KAAGW,QAAH,CAAYqB,SAAZ,CAAsB,WAAtB;AACG,EA1CI;AA2CRC,QA3CQ,qBA2CC;AACRjC,KAAG6B,GAAH,CAAO,SAAP;AACA,OAAKK,QAAL;AACA,OAAK3B,UAAL,GAAkB,QAAlB;AACAP,KAAGW,QAAH,CAAYqB,SAAZ,CAAsB,WAAtB;AACA,EAhDO;AAiDLG,OAjDK,oBAiDK;AACZ,OAAK5B,UAAL,GAAkBW,QAAQkB,YAAR,EAAlB;AACA,MAAG,KAAK7B,UAAL,IAAmB,QAAtB,EAA+B;AAC9B,QAAKC,OAAL;AACA;AACD,EAtDO;AAuDR0B,SAvDQ,sBAuDE;AACTnB,WAAS;AACR,eAAW,SADH;AAER,aAAS,EAFD;AAGR,cAAU,EAHF;AAIR,aAAS;AAJD,GAAT;AAMA;AA9DO,CAAT","file":"Login.js","sourceRoot":"../../../../../assets/Script/login","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n\t\tversion_label:cc.Node,\n\t\tlogin_type:null,\n    },\n\tonLogin(){\n\t\tvar self = this;\n\t\tvar size = cc.director.getVisibleSize();\n\t\t/*\n\t\tcc.log(\"onLogin\",self.telephone,self.password);\n\t\tif(self.telephone == null || self.password == null){\n\t\t\tself.tip_label.string = \"用户名密码不能为空\";\n\t\t\treturn ;\n\t\t}\n\t\tif(self.telephone == \"\" || self.password == \"\"){\n\t\t\tself.tip_label.string = \"用户名密码不能为空\";\n\t\t\treturn ;\n\t\t}\n\t\tServers.getLogin(self.telephone, self.password, function (data) {\n\t\t\tconsole.log(\"get login info succ:\" + JSON.stringify(data));\n\t\t\tif(data.code != 200){\n\t\t\t\tself.tip_label.string = data.msg;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar token = data.token;\n\t\t\tServers.getEntry(token,function(data){\n\t\t\t\tself.saveUserInfo(data);\n\t\t\t});\n\t\t});\n\t\t*/\n\t},\n\tsaveUserInfo(data){\n\t\tg_user = data.initdata.player;\n\t\tStorage.setPhoneNumber(g_user.phone_num);\n        Storage.setPassword(g_user.password);\n\t\tStorage.setLoginType(this.login_type);\n\t\tStorage.setAutoLoginFlag(this.auto_login);\n\t\tStorage.setPasswordFlag(this.retain_pwd);\n        console.log(\"start saveUserInfo......\"+ JSON.stringify(g_user));\n\t\tcc.director.loadScene(\"MainScene\");\n    },\n\twxLogin(){\n\t\tcc.log(\"wxLogin\");\n\t\tthis.testUser();\n\t\tthis.login_type = \"weixin\";\n\t\tcc.director.loadScene(\"MainScene\");\n\t},\n    onLoad () {\n\t\tthis.login_type = Storage.getLoginType();\n\t\tif(this.login_type == \"weixin\"){\n\t\t\tthis.onLogin();\n\t\t}\n\t},\n\ttestUser(){\n\t\tg_user = {\n\t\t\t'nickName':'dujinle',\n\t\t\t'fangka':10,\n\t\t\t'diamond':10,\n\t\t\t'gender':1\n\t\t};\n\t},\n});\n"]}