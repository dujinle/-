{"version":3,"sources":["../../../../../assets/Script/game_scene/assets/Script/game_scene/pop_enter_game.js"],"names":["cc","Class","extends","Component","properties","myindex","shuru_kuangs","type","Node","default","choice_radios","onLoad","log","self","room_num","Array","node","on","switchRadio","bg_sprite","getChildByName","eventManager","addListener","event","EventListener","TOUCH_ONE_BY_ONE","swallowTouches","onTouchBegan","touch","onTouchMoved","onTouchEnded","target","getCurrentTarget","local","convertToNodeSpace","getLocation","s","getContentSize","rect","width","height","rectContainsPoint","active","index","getComponent","splice","i","length","label","label_com","Label","string","push","enter_game","JSON","stringify","roomNum","join","param","playerId","g_user","roomType","g_game_type","size","director","getVisibleSize","room_enter","msg","error_tip","instantiate","g_assets","error_tip_com","show_error_info","addChild","setPosition"],"mappings":"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","file":"pop_enter_game.js","sourceRoot":"../../../../../assets/Script/game_scene","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n\t\tmyindex:-1,\n\t\tshuru_kuangs:{\n\t\t\ttype:cc.Node,\n\t\t\tdefault:[],\n\t\t},\n\t\tchoice_radios:{\n\t\t\ttype:cc.Node,\n\t\t\tdefault:[],\n\t\t}\n    },\n    onLoad () {\n\t\tcc.log(\"start go into create game js\");\n\t\tvar self = this;\n\t\tself.room_num = new Array();\n\t\tself.node.on(\"pressed\", self.switchRadio, self);\n\t\tvar bg_sprite =  self.node.getChildByName(\"bg_sprite\");\n        cc.eventManager.addListener({\n            event: cc.EventListener.TOUCH_ONE_BY_ONE,\n            swallowTouches: true,\n            // 设置是否吞没事件，在 onTouchBegan 方法返回 true 时吞没\n            onTouchBegan: function (touch, event) {\n                return true;\n            },\n            onTouchMoved: function (touch, event) {            // 触摸移动时触发\n            },\n            onTouchEnded: function (touch, event) {            // 点击事件结束处理\n\t\t\t\tvar target=event.getCurrentTarget();\n\t\t\t\tvar local=target.convertToNodeSpace(touch.getLocation());\n\t\t\t\tvar s = target.getContentSize();\n\t\t\t\tvar rect = cc.rect(0, 0, s.width, s.height);\n\t\t\t\tif (cc.rectContainsPoint(rect, local)){\n\t\t\t\t\tcc.log(\"ok touch in the region......\");\n\t\t\t\t}else{\n\t\t\t\t\tcc.log(\"touch remove from parent\");\n\t\t\t\t\tself.node.active = false;\n\t\t\t\t}\n\t\t\t}\n         }, bg_sprite);\n\t},\n\tswitchRadio(event) {\n        var index = event.target.getComponent(\"one_choice\").index;\n\t\tvar type = event.target.getComponent(\"one_choice\").type;\n\t\tcc.log(\"switchRadio : index:\" + index + \" type:\" + type);\n\t\tif(type == 2){\n\t\t\t//去除一个数字\n\t\t\tif(index == 1){\n\t\t\t\tif(this.myindex >= 0){\n\t\t\t\t\tthis.shuru_kuangs[this.myindex].getChildByName(\"num_label\").active = false;\n\t\t\t\t\tthis.room_num.splice(this.myindex,1);\n\t\t\t\t\tthis.myindex = this.myindex - 1;\n\t\t\t\t}\n\t\t\t}else if(index == 2){\n\t\t\t//删除所有的数字\n\t\t\t\tfor(var i = 0;i < this.shuru_kuangs.length;i++){\n\t\t\t\t\tthis.shuru_kuangs[i].getChildByName(\"num_label\").active = false;\n\t\t\t\t}\n\t\t\t\tthis.room_num.splice(0,this.room_num.length);\n\t\t\t\tthis.myindex = -1;\n\t\t\t}\n\t\t}else if(type == 1){\n\t\t\tif(this.myindex < 5){\n\t\t\t\tthis.myindex = this.myindex + 1;\n\t\t\t\tvar label = this.shuru_kuangs[this.myindex].getChildByName(\"num_label\");\n\t\t\t\tvar label_com = label.getComponent(cc.Label);\n\t\t\t\tlabel_com.string = index;\n\t\t\t\tlabel.active = true;\n\t\t\t\tthis.room_num.push(index);\n\t\t\t\tif(this.myindex == 5){\n\t\t\t\t\tthis.enter_game();\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.enter_game();\n\t\t\t}\n\t\t}\n\t\tcc.log(\"room_num:\" + JSON.stringify(this.room_num));\n    },\n\tenter_game(){\n\t\tthis.myindex = -1;\n\t\tvar roomNum =  this.room_num.join(\"\");\n\t\tfor(var i = 0;i < this.shuru_kuangs.length;i++){\n\t\t\tthis.shuru_kuangs[i].getChildByName(\"num_label\").active = false;\n\t\t}\n\t\tthis.room_num.splice(0,this.room_num.length);\n\t\t\n\t\tvar param = {\n\t\t\tplayerId:g_user.playerId,\n\t\t\troomNum: roomNum,\n\t\t\troomType: g_game_type\n\t\t};\n\t\tvar self = this;\n\t\tvar size = cc.director.getVisibleSize();\n\t\troom_enter(param,function(msg){\n\t\t\tvar error_tip = cc.instantiate(g_assets[\"prop_error_scene\"]);\n\t\t\tvar error_tip_com = error_tip.getComponent(\"prop_error_info\");\n\t\t\terror_tip_com.show_error_info(msg);\n\t\t\tself.node.addChild(error_tip);\n\t\t\terror_tip.setPosition(self.node.convertToNodeSpace(size.width/2,size.height/2));\n\t\t\tcc.log(msg);\n\t\t});\n\t},\n});\n"]}