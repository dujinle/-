{"version":3,"sources":["../../../../../assets/Script/game_scene/assets/Script/game_scene/zhq_create_game.js"],"names":["cc","Class","extends","Component","properties","jushu","dizhu","renshu","fangka","tianxuan","game_type","choice_radios","type","Node","default","onLoad","log","self","node","on","switchRadio","bg_sprite","getChildByName","eventManager","addListener","event","EventListener","TOUCH_ONE_BY_ONE","swallowTouches","onTouchBegan","touch","onTouchMoved","onTouchEnded","target","getCurrentTarget","local","convertToNodeSpace","getLocation","s","getContentSize","rect","width","height","rectContainsPoint","active","index","getComponent","i","length","item","pitchOn","lifeUp","start","create_game","size","director","getVisibleSize","param","playerId","g_user","roomType","maxChip","renShu","tianXuan","juShu","fangKa","room_create","msg","error_tip","instantiate","g_assets","error_tip_com","show_error_info","addChild","setPosition"],"mappings":"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","file":"zhq_create_game.js","sourceRoot":"../../../../../assets/Script/game_scene","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n\t\tjushu:20,\n\t\tdizhu:100,\n\t\trenshu:4,\n\t\tfangka:1,\n\t\ttianxuan:0,\n\t\tgame_type:\"ZHQ\",\n\t\tchoice_radios:{\n\t\t\ttype:cc.Node,\n\t\t\tdefault:[],\n\t\t}\n    },\n    onLoad () {\n\t\tcc.log(\"start go into create game js\");\n\t\tvar self = this;\n\t\tself.dizhu = 100;\n\t\tself.renshu = 4;\n\t\tself.jushu = 20;\n\t\tself.fangka = 1;\n\t\tself.tianxuan = 0;\n\t\tself.node.on(\"pressed\", self.switchRadio, self);\n\t\tvar bg_sprite =  self.node.getChildByName(\"bg_sprite\");\n        cc.eventManager.addListener({\n            event: cc.EventListener.TOUCH_ONE_BY_ONE,\n            swallowTouches: true,\n            // 设置是否吞没事件，在 onTouchBegan 方法返回 true 时吞没\n            onTouchBegan: function (touch, event) {\n                return true;\n            },\n            onTouchMoved: function (touch, event) {            // 触摸移动时触发\n            },\n            onTouchEnded: function (touch, event) {            // 点击事件结束处理\n\t\t\t\tvar target=event.getCurrentTarget();\n\t\t\t\tvar local=target.convertToNodeSpace(touch.getLocation());\n\t\t\t\tvar s = target.getContentSize();\n\t\t\t\tvar rect = cc.rect(0, 0, s.width, s.height);\n\t\t\t\tif (cc.rectContainsPoint(rect, local)){\n\t\t\t\t\tcc.log(\"ok touch in the region......\");\n\t\t\t\t}else{\n\t\t\t\t\tcc.log(\"touch remove from parent\");\n\t\t\t\t\tself.node.active = false;\n\t\t\t\t}\n\t\t\t}\n         }, bg_sprite);\n\t},\n\tswitchRadio(event) {\n\n        var index = event.target.getComponent(\"one_choice\").index;\n\t\tvar type = event.target.getComponent(\"one_choice\").type;\n\t\tcc.log(\"switchRadio : index:\" + index + \" type:\" + type);\n        for(let i = 0; i < this.choice_radios.length; i++){\n\t\t\tvar item = this.choice_radios[i].getComponent(\"one_choice\");\n\t\t\tif(item.type != type){\n\t\t\t\tcontinue;\n\t\t\t}\n            if(item.index == index){\n\t\t\t\tif(type == 1){\n\t\t\t\t\tthis.jushu = 20 * index;\n\t\t\t\t\tthis.fangka = index;\n\t\t\t\t}else if(type == 2){\n\t\t\t\t\tthis.renshu = 3 + index;\n\t\t\t\t}else if(type == 3){\n\t\t\t\t\tthis.tianxuan = index - 1;\n\t\t\t\t}\n                item.pitchOn();\n            }else{\n                item.lifeUp();\n            }\n        }\n\t\tcc.log(\"select jushu\" + this.jushu + \" fangka:\" + this.fangka + \" renshu:\" + this.renshu + \" tianxuan:\" + this.tianxuan);\n    },\n    start () {\n\n    },\n\tcreate_game(){\n\t\tvar self = this;\n\t\tvar size = cc.director.getVisibleSize();\n\t\tvar param = {\n\t\t\tplayerId:g_user.playerId,\n\t\t\troomType:this.game_type,\n\t\t\tmaxChip:this.dizhu,\n\t\t\trenShu:this.renshu,\n\t\t\ttianXuan:this.tianxuan,\n\t\t\tjuShu:this.jushu,\n\t\t\tfangKa:this.fangka\n\t\t};\n\t\troom_create(param,function(msg){\n\t\t\tvar error_tip = cc.instantiate(g_assets[\"prop_error_scene\"]);\n\t\t\tvar error_tip_com = error_tip.getComponent(\"prop_error_info\");\n\t\t\terror_tip_com.show_error_info(msg);\n\t\t\tself.node.addChild(error_tip);\n\t\t\terror_tip.setPosition(self.node.convertToNodeSpace(size.width/2,size.height/2));\n\t\t\tcc.log(msg);\n\t\t});\n\t},\n    // update (dt) {},\n});\n"]}