{"version":3,"sources":["../../../../../assets/Script/players/assets/Script/players/zhq_player.js"],"names":["cc","Class","extends","Component","properties","id","nick_name","my_gold","my_scole","position_server","statusTag","player_position","is_power","mobile_sprite","Sprite","counter_timer","Node","status_sprite","nick_name_label","Label","gold_label","my_cards","type","default","selected_cards","init","params","log","JSON","stringify","getComponent","string","setSpriteStatus","start_timer","count_timer","stop_timer","status","console","spriteFrame","g_assets","node","active","addPlayerCard","card","instantiate","parent","addChild","push","init_cards","card_num","i","set_card_sprite","idx","suit","rank","initCardSprite","get_last_card","last_card","length","getNextEmptyCard","j","card_com","sprite","remove_cards","destroy","splice","remove_select_cards","selectCard","resetSelectCard","card_t","menuCallbackButton","hide_status_sprite","resetMoneyLabel","money"],"mappings":"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","file":"zhq_player.js","sourceRoot":"../../../../../assets/Script/players","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n\t\tid:0,\n\t\tnick_name:null,\n\t\tmy_gold:0,\n\t\tmy_scole:0,\n\t\tposition_server:0,\n\t\tstatusTag:null,\n\t\tplayer_position:0,\n\t\tis_power:0,\n\t\tmobile_sprite:cc.Sprite,\n\t\tcounter_timer:cc.Node,\n\t\tstatus_sprite:cc.Sprite,\n\t\tnick_name_label:cc.Label,\n\t\tgold_label:cc.Label,\n\t\tmy_cards:{\n\t\t\ttype:cc.Node,\n\t\t\tdefault:[]\n\t\t},\n\t\tselected_cards:{\n\t\t\ttype:cc.Node,\n\t\t\tdefault:[]\n\t\t}\n    },\n\tinit(params){\n\t\tcc.log(\"tdk_player init: \" + JSON.stringify(params));\n\t\tthis.id = params[0];\n        this.position_server = params[1];\n        this.is_power = params[2];\n\t\tthis.nick_name = params[3];\n\t\tthis.my_gold = params[4];\n\t\tthis.nick_name_label.getComponent(cc.Label).string = this.nick_name;\n\t\tthis.gold_label.getComponent(cc.Label).string = this.my_gold;\n\t\tif(this.is_power > 0){\n\t\t\tthis.setSpriteStatus(\"start\");\n\t\t}\n\t},\n\tstart_timer(){\n\t\tvar count_timer = this.counter_timer.getComponent(\"count_timer\");\n\t\tcount_timer.start_timer();\n\t},\n\tstop_timer(){\n\t\tvar count_timer = this.counter_timer.getComponent(\"count_timer\");\n\t\tcount_timer.stop_timer();\n\t},\n    setSpriteStatus(status){\n\t\tconsole.log(\"zjh_player setSpriteStatus:\" + status);\n\t\tthis.statusTag = status;\n\t\tthis.status_sprite.spriteFrame = g_assets[status];\n\t\tthis.status_sprite.node.active = true;\n\t},\n\t\n\taddPlayerCard(){\n\t\tvar card = cc.instantiate(g_assets[\"zhq_card\"]);\n\t\tthis.node.parent.addChild(card);\n\t\tthis.my_cards.push(card);\n\t\treturn card;\n\t},\n\tinit_cards(card_num){\n\t\tfor(var i = 0;i < card_num;i++){\n\t\t\tvar card = cc.instantiate(g_assets[\"zhq_card\"]);\n\t\t\tthis.node.parent.addChild(card);\n\t\t\tthis.my_cards.push(card);\n\t\t}\n    },\n\tset_card_sprite(idx,suit,rank){\n\t\tvar card = this.my_cards[idx].getComponent(\"zhq_card\");\n\t\tcard.initCardSprite(suit,rank);\n\t},\n\tget_last_card(){\n\t\tvar last_card = null;\n\t\tfor(var i = 0;i < this.my_cards.length;i++){\n\t\t\tlast_card = this.my_cards[i];\n\t\t}\n\t\treturn last_card;\n\t},\n\tgetNextEmptyCard(){\n\t\tfor(var j = 0;j < this.my_cards.length;j++){\n\t\t\tvar card = this.my_cards[j];\n\t\t\tvar card_com = card.getComponent(\"zhq_card\");\n\t\t\tif(card_com.sprite == null){\n\t\t\t\treturn j;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t},\n\tremove_cards(){\n\t\tfor(var i = 0;i < this.my_cards.length;i++){\n\t\t\tvar card = this.my_cards[i];\n\t\t\tcard.destroy();\n\t\t}\n\t\tthis.my_cards.splice(0,this.my_cards.length);\n\t},\n\tremove_select_cards(){\n\t\tfor(var i = 0;i < this.selected_cards.length;i++){\n\t\t\tvar selectCard = this.selected_cards[i];\n\t\t\tfor(var j = 0;j < this.my_cards.length;j++){\n\t\t\t\tif(selectCard == this.my_cards[j]){\n\t\t\t\t\tthis.my_cards.splice(j,1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.selected_cards.splice(0,this.selected_cards.length);\n\t},\n\tresetSelectCard(){\n\t\tfor(var i = 0;i < this.selected_cards.length;i++){\n\t\t\tvar card_t = this.selected_cards[i];\n\t\t\tvar card_com = card_t.getComponent(\"zhq_card\");\n\t\t\tcard_com.menuCallbackButton();\n\t\t}\n\t\tthis.selected_cards.splice(0,this.selected_cards.length);\n\t},\n\thide_status_sprite(){\n\t\tthis.status_sprite.node.active = false;\n\t},\n\tresetMoneyLabel(money){\n\t\tthis.my_gold = money;\n\t\tthis.gold_label.string = money;\n\t},\n});\n"]}