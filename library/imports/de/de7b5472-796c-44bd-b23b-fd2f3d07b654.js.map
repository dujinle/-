{"version":3,"sources":["../../../../../assets/Script/game_scene/assets/Script/game_scene/zjh_create_game.js"],"names":["cc","Class","extends","Component","properties","jushu","dizhu","shangxian","fangka","game_type","choice_radios","type","Node","default","onLoad","log","self","node","on","switchRadio","bg_sprite","getChildByName","eventManager","addListener","event","EventListener","TOUCH_ONE_BY_ONE","swallowTouches","onTouchBegan","touch","onTouchMoved","onTouchEnded","target","getCurrentTarget","local","convertToNodeSpace","getLocation","s","getContentSize","rect","width","height","rectContainsPoint","active","shangxian_arr","index","getComponent","i","length","item","pitchOn","lifeUp","start","create_game","size","director","getVisibleSize","param","playerId","g_user","roomType","maxChip","juShu","fangKa","room_create","msg","error_tip","instantiate","g_assets","error_tip_com","show_error_info","addChild","setPosition"],"mappings":"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","file":"zjh_create_game.js","sourceRoot":"../../../../../assets/Script/game_scene","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n\t\tjushu:20,\n\t\tdizhu:100,\n\t\tshangxian:300,\n\t\tfangka:1,\n\t\tgame_type:\"ZJH\",\n\t\tchoice_radios:{\n\t\t\ttype:cc.Node,\n\t\t\tdefault:[],\n\t\t}\n    },\n    onLoad () {\n\t\tcc.log(\"start go into create game js\");\n\t\tvar self = this;\n\t\tself.dizhu = 100;\n\t\tself.shangxian = 300;\n\t\tself.jushu = 20;\n\t\tself.fangka = 1;\n\t\tself.node.on(\"pressed\", self.switchRadio, self);\n\t\tvar bg_sprite =  self.node.getChildByName(\"bg_sprite\");\n        cc.eventManager.addListener({\n            event: cc.EventListener.TOUCH_ONE_BY_ONE,\n            swallowTouches: true,\n            // 设置是否吞没事件，在 onTouchBegan 方法返回 true 时吞没\n            onTouchBegan: function (touch, event) {\n                return true;\n            },\n            onTouchMoved: function (touch, event) {            // 触摸移动时触发\n            },\n            onTouchEnded: function (touch, event) {            // 点击事件结束处理\n\t\t\t\tvar target=event.getCurrentTarget();\n\t\t\t\tvar local=target.convertToNodeSpace(touch.getLocation());\n\t\t\t\tvar s = target.getContentSize();\n\t\t\t\tvar rect = cc.rect(0, 0, s.width, s.height);\n\t\t\t\tif (cc.rectContainsPoint(rect, local)){\n\t\t\t\t\tcc.log(\"ok touch in the region......\");\n\t\t\t\t}else{\n\t\t\t\t\tcc.log(\"touch remove from parent\");\n\t\t\t\t\tself.node.active = false;\n\t\t\t\t}\n\t\t\t}\n         }, bg_sprite);\n\t},\n\tswitchRadio(event) {\n\t\tvar shangxian_arr = [1,3,5,8,10];\n        var index = event.target.getComponent(\"one_choice\").index;\n\t\tvar type = event.target.getComponent(\"one_choice\").type;\n        for(let i = 0; i < this.choice_radios.length; i++){\n\t\t\tvar item = this.choice_radios[i].getComponent(\"one_choice\");\n\t\t\tif(item.type != type){\n\t\t\t\tcontinue;\n\t\t\t}\n            if(item.index == index){\n\t\t\t\tif(type == 1){\n\t\t\t\t\tthis.jushu = 20 * index;\n\t\t\t\t\tthis.fangka = index;\n\t\t\t\t}else if(type == 2){\n\t\t\t\t\tthis.shangxian = 100 * shangxian_arr[index];\n\t\t\t\t}\n                item.pitchOn();\n            }else{\n                item.lifeUp();\n            }\n        }\n\t\tcc.log(\"select jushu\" + this.jushu + \" fangka:\" + this.fangka + \" shangxian:\" + this.shangxian);\n    },\n    start () {\n\n    },\n\tcreate_game(){\n\t\tvar self = this;\n\t\tvar size = cc.director.getVisibleSize();\n\t\tvar param = {\n\t\t\tplayerId:g_user.playerId,\n\t\t\troomType:this.game_type,\n\t\t\tmaxChip:this.shangxian,\n\t\t\tjuShu:this.jushu,\n\t\t\tfangKa:this.fangka\n\t\t};\n\t\troom_create(param,function(msg){\n\t\t\tvar error_tip = cc.instantiate(g_assets[\"prop_error_scene\"]);\n\t\t\tvar error_tip_com = error_tip.getComponent(\"prop_error_info\");\n\t\t\terror_tip_com.show_error_info(msg);\n\t\t\tself.node.addChild(error_tip);\n\t\t\terror_tip.setPosition(self.node.convertToNodeSpace(size.width/2,size.height/2));\n\t\t\tcc.log(msg);\n\t\t});\n\t},\n});\n"]}