{"version":3,"sources":["protobuf.js"],"names":["exports","global","Protobuf","init","opts","encoder","encoderProtos","decoder","decoderProtos","encode","key","msg","decode","module","window","protobuf","constants","TYPES","uInt32","sInt32","int32","double","string","message","float","Util","util","isSimpleType","type","Codec","codec","buffer","ArrayBuffer","float32Array","Float32Array","float64Array","Float64Array","uInt8Array","Uint8Array","encodeUInt32","n","parseInt","isNaN","result","tmp","next","Math","floor","push","encodeSInt32","abs","decodeUInt32","bytes","i","length","m","pow","decodeSInt32","flag","encodeFloat","decodeFloat","offset","encodeDouble","subarray","decodeDouble","encodeStr","str","code","charCodeAt","codes","encode2UTF8","j","decodeStr","array","end","String","fromCharCode","apply","slice","byteLength","codeLength","charCode","MsgEncoder","constant","protos","route","checkMsg","JSON","stringify","encodeMsg","name","proto","option","__messages","writeBytes","encodeTag","tag","encodeProp","encodeArray","value","tmpBuffer","MsgDecoder","setProtos","buf","decodeMsg","head","getHead","__tags","decodeProp","decodeArray","isFinish","peekHead","getBytes","peekBytes","pos","b"],"mappings":";;;;;;AAAA;;AAEA;;;;;AAKA;;;;AAIA,CAAC,UAAUA,OAAV,EAAmBC,MAAnB,EAA0B;AACzB,MAAIC,WAAWF,OAAf;;AAEAE,WAASC,IAAT,GAAgB,UAASC,IAAT,EAAc;AAC5B;AACAF,aAASG,OAAT,CAAiBF,IAAjB,CAAsBC,KAAKE,aAA3B;;AAEA;AACAJ,aAASK,OAAT,CAAiBJ,IAAjB,CAAsBC,KAAKI,aAA3B;AACD,GAND;;AAQAN,WAASO,MAAT,GAAkB,UAASC,GAAT,EAAcC,GAAd,EAAkB;AAClC,WAAOT,SAASG,OAAT,CAAiBI,MAAjB,CAAwBC,GAAxB,EAA6BC,GAA7B,CAAP;AACD,GAFD;;AAIAT,WAASU,MAAT,GAAkB,UAASF,GAAT,EAAcC,GAAd,EAAkB;AAClC,WAAOT,SAASK,OAAT,CAAiBK,MAAjB,CAAwBF,GAAxB,EAA6BC,GAA7B,CAAP;AACD,GAFD;;AAIA;AACAE,SAAOb,OAAP,GAAiBE,QAAjB;AACA,MAAG,OAAOY,MAAP,IAAkB,WAArB,EAAkC;AAChCA,WAAOC,QAAP,GAAkBb,QAAlB;AACD;AAEF,CAzBD,EAyBG,OAAOY,MAAP,IAAkB,WAAlB,GAAgCD,OAAOb,OAAvC,GAAiD,EAzBpD;;AA2BA;;;AAGA,CAAC,UAAUA,OAAV,EAAmBC,MAAnB,EAA0B;AACzB,MAAIe,YAAYhB,QAAQgB,SAAR,GAAoB,EAApC;;AAEAA,YAAUC,KAAV,GAAkB;AAChBC,YAAS,CADO;AAEhBC,YAAS,CAFO;AAGhBC,WAAQ,CAHQ;AAIhBC,YAAS,CAJO;AAKhBC,YAAS,CALO;AAMhBC,aAAU,CANM;AAOhBC,WAAQ;AAPQ,GAAlB;AAUD,CAbD,EAaG,gBAAgB,OAAOT,QAAvB,GAAkCA,QAAlC,GAA6CF,OAAOb,OAbvD;;AAeA;;;AAGA,CAAC,UAAUA,OAAV,EAAmBC,MAAnB,EAA0B;;AAEzB,MAAIwB,OAAOzB,QAAQ0B,IAAR,GAAe,EAA1B;;AAEAD,OAAKE,YAAL,GAAoB,UAASC,IAAT,EAAc;AAChC,WAASA,SAAS,QAAT,IACAA,SAAS,QADT,IAEAA,SAAS,OAFT,IAGAA,SAAS,QAHT,IAIAA,SAAS,QAJT,IAKAA,SAAS,OALT,IAMAA,SAAS,QANlB;AAOD,GARD;AAUD,CAdD,EAcG,gBAAgB,OAAOb,QAAvB,GAAkCA,QAAlC,GAA6CF,OAAOb,OAdvD;;AAgBA;;;AAGA,CAAC,UAAUA,OAAV,EAAmBC,MAAnB,EAA0B;;AAEzB,MAAI4B,QAAQ7B,QAAQ8B,KAAR,GAAgB,EAA5B;;AAEA,MAAIC,SAAS,IAAIC,WAAJ,CAAgB,CAAhB,CAAb;AACA,MAAIC,eAAe,IAAIC,YAAJ,CAAiBH,MAAjB,CAAnB;AACA,MAAII,eAAe,IAAIC,YAAJ,CAAiBL,MAAjB,CAAnB;AACA,MAAIM,aAAa,IAAIC,UAAJ,CAAeP,MAAf,CAAjB;;AAEAF,QAAMU,YAAN,GAAqB,UAASC,CAAT,EAAW;AAC9B,QAAIA,IAAIC,SAASD,CAAT,CAAR;AACA,QAAGE,MAAMF,CAAN,KAAYA,IAAI,CAAnB,EAAqB;AACnB,aAAO,IAAP;AACD;;AAED,QAAIG,SAAS,EAAb;AACA,OAAE;AACA,UAAIC,MAAMJ,IAAI,GAAd;AACA,UAAIK,OAAOC,KAAKC,KAAL,CAAWP,IAAE,GAAb,CAAX;;AAEA,UAAGK,SAAS,CAAZ,EAAc;AACZD,cAAMA,MAAM,GAAZ;AACD;AACDD,aAAOK,IAAP,CAAYJ,GAAZ;AACAJ,UAAIK,IAAJ;AACD,KATD,QASOL,MAAM,CATb;;AAWA,WAAOG,MAAP;AACD,GAnBD;;AAqBAd,QAAMoB,YAAN,GAAqB,UAAST,CAAT,EAAW;AAC9B,QAAIA,IAAIC,SAASD,CAAT,CAAR;AACA,QAAGE,MAAMF,CAAN,CAAH,EAAY;AACV,aAAO,IAAP;AACD;AACDA,QAAIA,IAAE,CAAF,GAAKM,KAAKI,GAAL,CAASV,CAAT,IAAY,CAAZ,GAAc,CAAnB,GAAsBA,IAAE,CAA5B;;AAEA,WAAOX,MAAMU,YAAN,CAAmBC,CAAnB,CAAP;AACD,GARD;;AAUAX,QAAMsB,YAAN,GAAqB,UAASC,KAAT,EAAe;AAClC,QAAIZ,IAAI,CAAR;;AAEA,SAAI,IAAIa,IAAI,CAAZ,EAAeA,IAAID,MAAME,MAAzB,EAAiCD,GAAjC,EAAqC;AACnC,UAAIE,IAAId,SAASW,MAAMC,CAAN,CAAT,CAAR;AACAb,UAAIA,IAAK,CAACe,IAAI,IAAL,IAAaT,KAAKU,GAAL,CAAS,CAAT,EAAY,IAAEH,CAAd,CAAtB;AACA,UAAGE,IAAI,GAAP,EAAW;AACT,eAAOf,CAAP;AACD;AACF;;AAED,WAAOA,CAAP;AACD,GAZD;;AAeAX,QAAM4B,YAAN,GAAqB,UAASL,KAAT,EAAe;AAClC,QAAIZ,IAAI,KAAKW,YAAL,CAAkBC,KAAlB,CAAR;AACA,QAAIM,OAASlB,IAAE,CAAH,KAAU,CAAX,GAAc,CAAC,CAAf,GAAiB,CAA5B;;AAEAA,QAAK,CAACA,IAAE,CAAF,GAAMA,CAAP,IAAU,CAAX,GAAckB,IAAlB;;AAEA,WAAOlB,CAAP;AACD,GAPD;;AASAX,QAAM8B,WAAN,GAAoB,UAASnC,KAAT,EAAe;AACjCS,iBAAa,CAAb,IAAkBT,KAAlB;AACA,WAAOa,UAAP;AACD,GAHD;;AAKAR,QAAM+B,WAAN,GAAoB,UAASR,KAAT,EAAgBS,MAAhB,EAAuB;AACzC,QAAG,CAACT,KAAD,IAAUA,MAAME,MAAN,GAAgBO,SAAQ,CAArC,EAAwC;AACtC,aAAO,IAAP;AACD;;AAED,SAAI,IAAIR,IAAI,CAAZ,EAAeA,IAAI,CAAnB,EAAsBA,GAAtB,EAA0B;AACxBhB,iBAAWgB,CAAX,IAAgBD,MAAMS,SAASR,CAAf,CAAhB;AACD;;AAED,WAAOpB,aAAa,CAAb,CAAP;AACD,GAVD;;AAYAJ,QAAMiC,YAAN,GAAqB,UAASzC,MAAT,EAAgB;AACnCc,iBAAa,CAAb,IAAkBd,MAAlB;AACA,WAAOgB,WAAW0B,QAAX,CAAoB,CAApB,EAAuB,CAAvB,CAAP;AACD,GAHD;;AAKAlC,QAAMmC,YAAN,GAAqB,UAASZ,KAAT,EAAgBS,MAAhB,EAAuB;AAC1C,QAAG,CAACT,KAAD,IAAUA,MAAME,MAAN,GAAgB,IAAIO,MAAjC,EAAyC;AACvC,aAAO,IAAP;AACD;;AAED,SAAI,IAAIR,IAAI,CAAZ,EAAeA,IAAI,CAAnB,EAAsBA,GAAtB,EAA0B;AACxBhB,iBAAWgB,CAAX,IAAgBD,MAAMS,SAASR,CAAf,CAAhB;AACD;;AAED,WAAOlB,aAAa,CAAb,CAAP;AACD,GAVD;;AAYAN,QAAMoC,SAAN,GAAkB,UAASb,KAAT,EAAgBS,MAAhB,EAAwBK,GAAxB,EAA4B;AAC5C,SAAI,IAAIb,IAAI,CAAZ,EAAeA,IAAIa,IAAIZ,MAAvB,EAA+BD,GAA/B,EAAmC;AACjC,UAAIc,OAAOD,IAAIE,UAAJ,CAAef,CAAf,CAAX;AACA,UAAIgB,QAAQC,YAAYH,IAAZ,CAAZ;;AAEA,WAAI,IAAII,IAAI,CAAZ,EAAeA,IAAIF,MAAMf,MAAzB,EAAiCiB,GAAjC,EAAqC;AACnCnB,cAAMS,MAAN,IAAgBQ,MAAME,CAAN,CAAhB;AACAV;AACD;AACF;;AAED,WAAOA,MAAP;AACD,GAZD;;AAcA;;;AAGAhC,QAAM2C,SAAN,GAAkB,UAASpB,KAAT,EAAgBS,MAAhB,EAAwBP,MAAxB,EAA+B;AAC/C,QAAImB,QAAQ,EAAZ;AACA,QAAIC,MAAMb,SAASP,MAAnB;;AAEA,WAAMO,SAASa,GAAf,EAAmB;AACjB,UAAIP,OAAO,CAAX;;AAEA,UAAGf,MAAMS,MAAN,IAAgB,GAAnB,EAAuB;AACrBM,eAAOf,MAAMS,MAAN,CAAP;;AAEAA,kBAAU,CAAV;AACD,OAJD,MAIM,IAAGT,MAAMS,MAAN,IAAgB,GAAnB,EAAuB;AAC3BM,eAAO,CAAC,CAACf,MAAMS,MAAN,IAAgB,IAAjB,KAAwB,CAAzB,KAA+BT,MAAMS,SAAO,CAAb,IAAkB,IAAjD,CAAP;AACAA,kBAAU,CAAV;AACD,OAHK,MAGD;AACHM,eAAO,CAAC,CAACf,MAAMS,MAAN,IAAgB,IAAjB,KAAwB,EAAzB,KAAgC,CAACT,MAAMS,SAAO,CAAb,IAAkB,IAAnB,KAA0B,CAA1D,KAAgET,MAAMS,SAAO,CAAb,IAAkB,IAAlF,CAAP;AACAA,kBAAU,CAAV;AACD;;AAEDY,YAAMzB,IAAN,CAAWmB,IAAX;AAED;;AAED,QAAID,MAAM,EAAV;AACA,SAAI,IAAIb,IAAI,CAAZ,EAAeA,IAAIoB,MAAMnB,MAAzB,GAAiC;AAC/BY,aAAOS,OAAOC,YAAP,CAAoBC,KAApB,CAA0B,IAA1B,EAAgCJ,MAAMK,KAAN,CAAYzB,CAAZ,EAAeA,IAAI,KAAnB,CAAhC,CAAP;AACAA,WAAK,KAAL;AACD;;AAED,WAAOa,GAAP;AACD,GA9BD;;AAgCA;;;AAGArC,QAAMkD,UAAN,GAAmB,UAASb,GAAT,EAAa;AAC9B,QAAG,OAAOA,GAAP,KAAgB,QAAnB,EAA4B;AAC1B,aAAO,CAAC,CAAR;AACD;;AAED,QAAIZ,SAAS,CAAb;;AAEA,SAAI,IAAID,IAAI,CAAZ,EAAeA,IAAIa,IAAIZ,MAAvB,EAA+BD,GAA/B,EAAmC;AACjC,UAAIc,OAAOD,IAAIE,UAAJ,CAAef,CAAf,CAAX;AACAC,gBAAU0B,WAAWb,IAAX,CAAV;AACD;;AAED,WAAOb,MAAP;AACD,GAbD;;AAeA;;;AAGA,WAASgB,WAAT,CAAqBW,QAArB,EAA8B;AAC5B,QAAGA,YAAY,IAAf,EAAoB;AAClB,aAAO,CAACA,QAAD,CAAP;AACD,KAFD,MAEM,IAAGA,YAAY,KAAf,EAAqB;AACzB,aAAO,CAAC,OAAMA,YAAU,CAAjB,EAAqB,OAAMA,WAAW,IAAtC,CAAP;AACD,KAFK,MAED;AACH,aAAO,CAAC,OAAMA,YAAU,EAAjB,EAAsB,OAAM,CAACA,WAAW,KAAZ,KAAoB,CAAhD,EAAoD,OAAMA,WAAW,IAArE,CAAP;AACD;AACF;;AAED,WAASD,UAAT,CAAoBb,IAApB,EAAyB;AACvB,QAAGA,QAAQ,IAAX,EAAgB;AACd,aAAO,CAAP;AACD,KAFD,MAEM,IAAGA,QAAQ,KAAX,EAAiB;AACrB,aAAO,CAAP;AACD,KAFK,MAED;AACH,aAAO,CAAP;AACD;AACF;AACF,CA3LD,EA2LG,gBAAgB,OAAOpD,QAAvB,GAAkCA,QAAlC,GAA6CF,OAAOb,OA3LvD;;AA6LA;;;AAGA,CAAC,UAAUA,OAAV,EAAmBC,MAAnB,EAA0B;;AAEzB,MAAIc,WAAWf,OAAf;AACA,MAAIkF,aAAalF,QAAQK,OAAR,GAAkB,EAAnC;;AAEA,MAAIyB,QAAQf,SAASe,KAArB;AACA,MAAIqD,WAAWpE,SAASC,SAAxB;AACA,MAAIU,OAAOX,SAASW,IAApB;;AAEAwD,aAAW/E,IAAX,GAAkB,UAASiF,MAAT,EAAgB;AAChC,SAAKA,MAAL,GAAcA,UAAU,EAAxB;AACD,GAFD;;AAIAF,aAAWzE,MAAX,GAAoB,UAAS4E,KAAT,EAAgB1E,GAAhB,EAAoB;AACtC;AACA,QAAIyE,SAAS,KAAKA,MAAL,CAAYC,KAAZ,CAAb;;AAEA;AACA,QAAG,CAACC,SAAS3E,GAAT,EAAcyE,MAAd,CAAJ,EAA0B;AACxB,aAAO,IAAP;AACD;;AAED;AACA,QAAI9B,SAASxB,MAAMiD,UAAN,CAAiBQ,KAAKC,SAAL,CAAe7E,GAAf,CAAjB,CAAb;;AAEA;AACA,QAAIoB,SAAS,IAAIC,WAAJ,CAAgBsB,MAAhB,CAAb;AACA,QAAIjB,aAAa,IAAIC,UAAJ,CAAeP,MAAf,CAAjB;AACA,QAAI8B,SAAS,CAAb;;AAEA,QAAG,CAAC,CAACuB,MAAL,EAAY;AACVvB,eAAS4B,UAAUpD,UAAV,EAAsBwB,MAAtB,EAA8BuB,MAA9B,EAAsCzE,GAAtC,CAAT;AACA,UAAGkD,SAAS,CAAZ,EAAc;AACZ,eAAOxB,WAAW0B,QAAX,CAAoB,CAApB,EAAuBF,MAAvB,CAAP;AACD;AACF;;AAED,WAAO,IAAP;AACD,GAzBD;;AA2BA;;;AAGA,WAASyB,QAAT,CAAkB3E,GAAlB,EAAuByE,MAAvB,EAA8B;AAC5B,QAAG,CAACA,MAAJ,EAAW;AACT,aAAO,KAAP;AACD;;AAED,SAAI,IAAIM,IAAR,IAAgBN,MAAhB,EAAuB;AACrB,UAAIO,QAAQP,OAAOM,IAAP,CAAZ;;AAEA;AACA,cAAOC,MAAMC,MAAb;AACE,aAAK,UAAL;AACE,cAAG,OAAOjF,IAAI+E,IAAJ,CAAP,KAAsB,WAAzB,EAAqC;AACnC,mBAAO,KAAP;AACD;AACH,aAAK,UAAL;AACE,cAAG,OAAO/E,IAAI+E,IAAJ,CAAP,KAAsB,WAAzB,EAAqC;AACnC,gBAAG,CAAC,CAACN,OAAOS,UAAP,CAAkBF,MAAM/D,IAAxB,CAAL,EAAmC;AACjC0D,uBAAS3E,IAAI+E,IAAJ,CAAT,EAAoBN,OAAOS,UAAP,CAAkBF,MAAM/D,IAAxB,CAApB;AACD;AACF;AACH;AACA,aAAK,UAAL;AACE;AACA,cAAG,CAAC,CAACjB,IAAI+E,IAAJ,CAAF,IAAe,CAAC,CAACN,OAAOS,UAAP,CAAkBF,MAAM/D,IAAxB,CAApB,EAAkD;AAChD,iBAAI,IAAIyB,IAAI,CAAZ,EAAeA,IAAI1C,IAAI+E,IAAJ,EAAUpC,MAA7B,EAAqCD,GAArC,EAAyC;AACvC,kBAAG,CAACiC,SAAS3E,IAAI+E,IAAJ,EAAUrC,CAAV,CAAT,EAAuB+B,OAAOS,UAAP,CAAkBF,MAAM/D,IAAxB,CAAvB,CAAJ,EAA0D;AACxD,uBAAO,KAAP;AACD;AACF;AACF;AACH;AArBF;AAuBD;;AAED,WAAO,IAAP;AACD;;AAED,WAAS6D,SAAT,CAAmB1D,MAAnB,EAA2B8B,MAA3B,EAAmCuB,MAAnC,EAA2CzE,GAA3C,EAA+C;AAC7C,SAAI,IAAI+E,IAAR,IAAgB/E,GAAhB,EAAoB;AAClB,UAAG,CAAC,CAACyE,OAAOM,IAAP,CAAL,EAAkB;AAChB,YAAIC,QAAQP,OAAOM,IAAP,CAAZ;;AAEA,gBAAOC,MAAMC,MAAb;AACE,eAAK,UAAL;AACA,eAAK,UAAL;AACE/B,qBAASiC,WAAW/D,MAAX,EAAmB8B,MAAnB,EAA2BkC,UAAUJ,MAAM/D,IAAhB,EAAsB+D,MAAMK,GAA5B,CAA3B,CAAT;AACAnC,qBAASoC,WAAWtF,IAAI+E,IAAJ,CAAX,EAAsBC,MAAM/D,IAA5B,EAAkCiC,MAAlC,EAA0C9B,MAA1C,EAAkDqD,MAAlD,CAAT;AACF;AACA,eAAK,UAAL;AACE,gBAAGzE,IAAI+E,IAAJ,EAAUpC,MAAV,GAAmB,CAAtB,EAAwB;AACtBO,uBAASqC,YAAYvF,IAAI+E,IAAJ,CAAZ,EAAuBC,KAAvB,EAA8B9B,MAA9B,EAAsC9B,MAAtC,EAA8CqD,MAA9C,CAAT;AACD;AACH;AAVF;AAYD;AACF;;AAED,WAAOvB,MAAP;AACD;;AAED,WAASoC,UAAT,CAAoBE,KAApB,EAA2BvE,IAA3B,EAAiCiC,MAAjC,EAAyC9B,MAAzC,EAAiDqD,MAAjD,EAAwD;AACtD,YAAOxD,IAAP;AACE,WAAK,QAAL;AACEiC,iBAASiC,WAAW/D,MAAX,EAAmB8B,MAAnB,EAA2B/B,MAAMS,YAAN,CAAmB4D,KAAnB,CAA3B,CAAT;AACF;AACA,WAAK,OAAL;AACA,WAAK,QAAL;AACEtC,iBAASiC,WAAW/D,MAAX,EAAmB8B,MAAnB,EAA2B/B,MAAMmB,YAAN,CAAmBkD,KAAnB,CAA3B,CAAT;AACF;AACA,WAAK,OAAL;AACEL,mBAAW/D,MAAX,EAAmB8B,MAAnB,EAA2B/B,MAAM6B,WAAN,CAAkBwC,KAAlB,CAA3B;AACAtC,kBAAU,CAAV;AACF;AACA,WAAK,QAAL;AACEiC,mBAAW/D,MAAX,EAAmB8B,MAAnB,EAA2B/B,MAAMgC,YAAN,CAAmBqC,KAAnB,CAA3B;AACAtC,kBAAU,CAAV;AACF;AACA,WAAK,QAAL;AACE,YAAIP,SAASxB,MAAMiD,UAAN,CAAiBoB,KAAjB,CAAb;;AAEA;AACAtC,iBAASiC,WAAW/D,MAAX,EAAmB8B,MAAnB,EAA2B/B,MAAMS,YAAN,CAAmBe,MAAnB,CAA3B,CAAT;AACA;AACAxB,cAAMmC,SAAN,CAAgBlC,MAAhB,EAAwB8B,MAAxB,EAAgCsC,KAAhC;AACAtC,kBAAUP,MAAV;AACF;AACA;AACE,YAAG,CAAC,CAAC8B,OAAOS,UAAP,CAAkBjE,IAAlB,CAAL,EAA6B;AAC3B;AACA,cAAIwE,YAAY,IAAIpE,WAAJ,CAAgBF,MAAMiD,UAAN,CAAiBQ,KAAKC,SAAL,CAAeW,KAAf,CAAjB,CAAhB,CAAhB;AACA,cAAI7C,SAAS,CAAb;;AAEAA,mBAASmC,UAAUW,SAAV,EAAqB9C,MAArB,EAA6B8B,OAAOS,UAAP,CAAkBjE,IAAlB,CAA7B,EAAsDuE,KAAtD,CAAT;AACA;AACAtC,mBAASiC,WAAW/D,MAAX,EAAmB8B,MAAnB,EAA2B/B,MAAMS,YAAN,CAAmBe,MAAnB,CAA3B,CAAT;AACA;AACA,eAAI,IAAID,IAAI,CAAZ,EAAeA,IAAIC,MAAnB,EAA2BD,GAA3B,EAA+B;AAC7BtB,mBAAO8B,MAAP,IAAiBuC,UAAU/C,CAAV,CAAjB;AACAQ;AACD;AACF;AACH;AAxCF;;AA2CA,WAAOA,MAAP;AACD;;AAED;;;AAGA,WAASqC,WAAT,CAAqBzB,KAArB,EAA4BkB,KAA5B,EAAmC9B,MAAnC,EAA2C9B,MAA3C,EAAmDqD,MAAnD,EAA0D;AACxD,QAAI/B,IAAI,CAAR;;AAEA,QAAG3B,KAAKC,YAAL,CAAkBgE,MAAM/D,IAAxB,CAAH,EAAiC;AAC/BiC,eAASiC,WAAW/D,MAAX,EAAmB8B,MAAnB,EAA2BkC,UAAUJ,MAAM/D,IAAhB,EAAsB+D,MAAMK,GAA5B,CAA3B,CAAT;AACAnC,eAASiC,WAAW/D,MAAX,EAAmB8B,MAAnB,EAA2B/B,MAAMS,YAAN,CAAmBkC,MAAMnB,MAAzB,CAA3B,CAAT;AACA,WAAID,IAAI,CAAR,EAAWA,IAAIoB,MAAMnB,MAArB,EAA6BD,GAA7B,EAAiC;AAC/BQ,iBAASoC,WAAWxB,MAAMpB,CAAN,CAAX,EAAqBsC,MAAM/D,IAA3B,EAAiCiC,MAAjC,EAAyC9B,MAAzC,CAAT;AACD;AACF,KAND,MAMK;AACH,WAAIsB,IAAI,CAAR,EAAWA,IAAIoB,MAAMnB,MAArB,EAA6BD,GAA7B,EAAiC;AAC/BQ,iBAASiC,WAAW/D,MAAX,EAAmB8B,MAAnB,EAA2BkC,UAAUJ,MAAM/D,IAAhB,EAAsB+D,MAAMK,GAA5B,CAA3B,CAAT;AACAnC,iBAASoC,WAAWxB,MAAMpB,CAAN,CAAX,EAAqBsC,MAAM/D,IAA3B,EAAiCiC,MAAjC,EAAyC9B,MAAzC,EAAiDqD,MAAjD,CAAT;AACD;AACF;;AAED,WAAOvB,MAAP;AACD;;AAED,WAASiC,UAAT,CAAoB/D,MAApB,EAA4B8B,MAA5B,EAAoCT,KAApC,EAA0C;AACxC,SAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAID,MAAME,MAAzB,EAAiCD,KAAKQ,QAAtC,EAA+C;AAC7C9B,aAAO8B,MAAP,IAAiBT,MAAMC,CAAN,CAAjB;AACD;;AAED,WAAOQ,MAAP;AACD;;AAED,WAASkC,SAAT,CAAmBnE,IAAnB,EAAyBoE,GAAzB,EAA6B;AAC3B,QAAIG,QAAQhB,SAASlE,KAAT,CAAeW,IAAf,KAAsB,CAAlC;AACA,WAAOE,MAAMS,YAAN,CAAoByD,OAAK,CAAN,GAASG,KAA5B,CAAP;AACD;AACF,CAxLD,EAwLG,gBAAgB,OAAOpF,QAAvB,GAAkCA,QAAlC,GAA6CF,OAAOb,OAxLvD;;AA0LA;;;AAGA,CAAC,UAAUA,OAAV,EAAmBC,MAAnB,EAA0B;AACzB,MAAIc,WAAWf,OAAf;AACA,MAAIqG,aAAarG,QAAQO,OAAR,GAAkB,EAAnC;;AAEA,MAAIuB,QAAQf,SAASe,KAArB;AACA,MAAIJ,OAAOX,SAASW,IAApB;;AAEA,MAAIK,MAAJ;AACA,MAAI8B,SAAS,CAAb;;AAEAwC,aAAWlG,IAAX,GAAkB,UAASiF,MAAT,EAAgB;AAChC,SAAKA,MAAL,GAAcA,UAAU,EAAxB;AACD,GAFD;;AAIAiB,aAAWC,SAAX,GAAuB,UAASlB,MAAT,EAAgB;AACrC,QAAG,CAAC,CAACA,MAAL,EAAY;AACV,WAAKA,MAAL,GAAcA,MAAd;AACD;AACF,GAJD;;AAMAiB,aAAWzF,MAAX,GAAoB,UAASyE,KAAT,EAAgBkB,GAAhB,EAAoB;AACtC,QAAInB,SAAS,KAAKA,MAAL,CAAYC,KAAZ,CAAb;;AAEAtD,aAASwE,GAAT;AACA1C,aAAS,CAAT;;AAEA,QAAG,CAAC,CAACuB,MAAL,EAAY;AACV,aAAOoB,UAAU,EAAV,EAAcpB,MAAd,EAAsBrD,OAAOuB,MAA7B,CAAP;AACD;;AAED,WAAO,IAAP;AACD,GAXD;;AAaA,WAASkD,SAAT,CAAmB7F,GAAnB,EAAwByE,MAAxB,EAAgC9B,MAAhC,EAAuC;AACrC,WAAMO,SAAOP,MAAb,EAAoB;AAClB,UAAImD,OAAOC,SAAX;AACA,UAAI9E,OAAO6E,KAAK7E,IAAhB;AACA,UAAIoE,MAAMS,KAAKT,GAAf;AACA,UAAIN,OAAON,OAAOuB,MAAP,CAAcX,GAAd,CAAX;;AAEA,cAAOZ,OAAOM,IAAP,EAAaE,MAApB;AACE,aAAK,UAAL;AACA,aAAK,UAAL;AACEjF,cAAI+E,IAAJ,IAAYkB,WAAWxB,OAAOM,IAAP,EAAa9D,IAAxB,EAA8BwD,MAA9B,CAAZ;AACF;AACA,aAAK,UAAL;AACE,cAAG,CAACzE,IAAI+E,IAAJ,CAAJ,EAAc;AACZ/E,gBAAI+E,IAAJ,IAAY,EAAZ;AACD;AACDmB,sBAAYlG,IAAI+E,IAAJ,CAAZ,EAAuBN,OAAOM,IAAP,EAAa9D,IAApC,EAA0CwD,MAA1C;AACF;AAVF;AAYD;;AAED,WAAOzE,GAAP;AACD;;AAED;;;AAGA,WAASmG,QAAT,CAAkBnG,GAAlB,EAAuByE,MAAvB,EAA8B;AAC5B,WAAQ,CAACA,OAAOuB,MAAP,CAAcI,WAAWf,GAAzB,CAAT;AACD;AACD;;;AAGA,WAASU,OAAT,GAAkB;AAChB,QAAIV,MAAMlE,MAAMqB,YAAN,CAAmB6D,UAAnB,CAAV;;AAEA,WAAO;AACLpF,YAAOoE,MAAI,GADN;AAELA,WAAMA,OAAK;AAFN,KAAP;AAID;;AAED;;;AAGA,WAASe,QAAT,GAAmB;AACjB,QAAIf,MAAMlE,MAAMqB,YAAN,CAAmB8D,WAAnB,CAAV;;AAEA,WAAO;AACLrF,YAAOoE,MAAI,GADN;AAELA,WAAMA,OAAK;AAFN,KAAP;AAID;;AAED,WAASY,UAAT,CAAoBhF,IAApB,EAA0BwD,MAA1B,EAAiC;AAC/B,YAAOxD,IAAP;AACE,WAAK,QAAL;AACE,eAAOE,MAAMqB,YAAN,CAAmB6D,UAAnB,CAAP;AACF,WAAK,OAAL;AACA,WAAK,QAAL;AACE,eAAOlF,MAAM2B,YAAN,CAAmBuD,UAAnB,CAAP;AACF,WAAK,OAAL;AACE,YAAIxF,QAAQM,MAAM8B,WAAN,CAAkB7B,MAAlB,EAA0B8B,MAA1B,CAAZ;AACAA,kBAAU,CAAV;AACA,eAAOrC,KAAP;AACF,WAAK,QAAL;AACE,YAAIH,SAASS,MAAMkC,YAAN,CAAmBjC,MAAnB,EAA2B8B,MAA3B,CAAb;AACAA,kBAAU,CAAV;AACA,eAAOxC,MAAP;AACF,WAAK,QAAL;AACE,YAAIiC,SAASxB,MAAMqB,YAAN,CAAmB6D,UAAnB,CAAb;;AAEA,YAAI9C,MAAOpC,MAAM0C,SAAN,CAAgBzC,MAAhB,EAAwB8B,MAAxB,EAAgCP,MAAhC,CAAX;AACAO,kBAAUP,MAAV;;AAEA,eAAOY,GAAP;AACF;AACE,YAAG,CAAC,CAACkB,MAAF,IAAY,CAAC,CAACA,OAAOS,UAAP,CAAkBjE,IAAlB,CAAjB,EAAyC;AACvC,cAAI0B,SAASxB,MAAMqB,YAAN,CAAmB6D,UAAnB,CAAb;AACA,cAAIrG,MAAM,EAAV;AACA6F,oBAAU7F,GAAV,EAAeyE,OAAOS,UAAP,CAAkBjE,IAAlB,CAAf,EAAwCiC,SAAOP,MAA/C;AACA,iBAAO3C,GAAP;AACD;AACH;AA5BF;AA8BD;;AAED,WAASkG,WAAT,CAAqBpC,KAArB,EAA4B7C,IAA5B,EAAkCwD,MAAlC,EAAyC;AACvC,QAAG1D,KAAKC,YAAL,CAAkBC,IAAlB,CAAH,EAA2B;AACzB,UAAI0B,SAASxB,MAAMqB,YAAN,CAAmB6D,UAAnB,CAAb;;AAEA,WAAI,IAAI3D,IAAI,CAAZ,EAAeA,IAAIC,MAAnB,EAA2BD,GAA3B,EAA+B;AAC7BoB,cAAMzB,IAAN,CAAW4D,WAAWhF,IAAX,CAAX;AACD;AACF,KAND,MAMK;AACH6C,YAAMzB,IAAN,CAAW4D,WAAWhF,IAAX,EAAiBwD,MAAjB,CAAX;AACD;AACF;;AAED,WAAS4B,QAAT,CAAkBtD,IAAlB,EAAuB;AACrB,QAAIN,QAAQ,EAAZ;AACA,QAAI8D,MAAMrD,MAAV;AACAH,WAAOA,QAAQ,KAAf;;AAEA,QAAIyD,CAAJ;;AAEA,OAAE;AACAA,UAAIpF,OAAOmF,GAAP,CAAJ;AACA9D,YAAMJ,IAAN,CAAWmE,CAAX;AACAD;AACD,KAJD,QAIOC,KAAK,GAJZ;;AAMA,QAAG,CAACzD,IAAJ,EAAS;AACPG,eAASqD,GAAT;AACD;AACD,WAAO9D,KAAP;AACD;;AAED,WAAS6D,SAAT,GAAoB;AAClB,WAAOD,SAAS,IAAT,CAAP;AACD;AAEF,CA3JD,EA2JG,gBAAgB,OAAOjG,QAAvB,GAAkCA,QAAlC,GAA6CF,OAAOb,OA3JvD","file":"protobuf.js","sourceRoot":"../../../../assets/pomelo","sourcesContent":["/* ProtocolBuffer client 0.1.0*/\n\n/**\n * pomelo-protobuf\n * @author <zhang0935@gmail.com>\n */\n\n/**\n * Protocol buffer root\n * In browser, it will be window.protbuf\n */\n(function (exports, global){\n  var Protobuf = exports;\n\n  Protobuf.init = function(opts){\n    //On the serverside, use serverProtos to encode messages send to client\n    Protobuf.encoder.init(opts.encoderProtos);\n\n    //On the serverside, user clientProtos to decode messages receive from clients\n    Protobuf.decoder.init(opts.decoderProtos);\n  };\n\n  Protobuf.encode = function(key, msg){\n    return Protobuf.encoder.encode(key, msg);\n  };\n\n  Protobuf.decode = function(key, msg){\n    return Protobuf.decoder.decode(key, msg);\n  };\n\n  // exports to support for components\n  module.exports = Protobuf;\n  if(typeof(window) != \"undefined\") {\n    window.protobuf = Protobuf;\n  }\n  \n})(typeof(window) == \"undefined\" ? module.exports : {}, this);\n\n/**\n * constants\n */\n(function (exports, global){\n  var constants = exports.constants = {};\n\n  constants.TYPES = {\n    uInt32 : 0,\n    sInt32 : 0,\n    int32 : 0,\n    double : 1,\n    string : 2,\n    message : 2,\n    float : 5\n  };\n\n})('undefined' !== typeof protobuf ? protobuf : module.exports, this);\n\n/**\n * util module\n */\n(function (exports, global){\n\n  var Util = exports.util = {};\n\n  Util.isSimpleType = function(type){\n    return ( type === 'uInt32' ||\n             type === 'sInt32' ||\n             type === 'int32'  ||\n             type === 'uInt64' ||\n             type === 'sInt64' ||\n             type === 'float'  ||\n             type === 'double' );\n  };\n\n})('undefined' !== typeof protobuf ? protobuf : module.exports, this);\n\n/**\n * codec module\n */\n(function (exports, global){\n\n  var Codec = exports.codec = {};\n\n  var buffer = new ArrayBuffer(8);\n  var float32Array = new Float32Array(buffer);\n  var float64Array = new Float64Array(buffer);\n  var uInt8Array = new Uint8Array(buffer);\n\n  Codec.encodeUInt32 = function(n){\n    var n = parseInt(n);\n    if(isNaN(n) || n < 0){\n      return null;\n    }\n\n    var result = [];\n    do{\n      var tmp = n % 128;\n      var next = Math.floor(n/128);\n\n      if(next !== 0){\n        tmp = tmp + 128;\n      }\n      result.push(tmp);\n      n = next;\n    }while(n !== 0);\n\n    return result;\n  };\n\n  Codec.encodeSInt32 = function(n){\n    var n = parseInt(n);\n    if(isNaN(n)){\n      return null;\n    }\n    n = n<0?(Math.abs(n)*2-1):n*2;\n\n    return Codec.encodeUInt32(n);\n  };\n\n  Codec.decodeUInt32 = function(bytes){\n    var n = 0;\n\n    for(var i = 0; i < bytes.length; i++){\n      var m = parseInt(bytes[i]);\n      n = n + ((m & 0x7f) * Math.pow(2,(7*i)));\n      if(m < 128){\n        return n;\n      }\n    }\n\n    return n;\n  };\n\n\n  Codec.decodeSInt32 = function(bytes){\n    var n = this.decodeUInt32(bytes);\n    var flag = ((n%2) === 1)?-1:1;\n\n    n = ((n%2 + n)/2)*flag;\n\n    return n;\n  };\n\n  Codec.encodeFloat = function(float){\n    float32Array[0] = float;\n    return uInt8Array;\n  };\n\n  Codec.decodeFloat = function(bytes, offset){\n    if(!bytes || bytes.length < (offset +4)){\n      return null;\n    }\n\n    for(var i = 0; i < 4; i++){\n      uInt8Array[i] = bytes[offset + i];\n    }\n\n    return float32Array[0];\n  };\n\n  Codec.encodeDouble = function(double){\n    float64Array[0] = double;\n    return uInt8Array.subarray(0, 8);\n  };\n\n  Codec.decodeDouble = function(bytes, offset){\n    if(!bytes || bytes.length < (8 + offset)){\n      return null;\n    }\n\n    for(var i = 0; i < 8; i++){\n      uInt8Array[i] = bytes[offset + i];\n    }\n\n    return float64Array[0];\n  };\n\n  Codec.encodeStr = function(bytes, offset, str){\n    for(var i = 0; i < str.length; i++){\n      var code = str.charCodeAt(i);\n      var codes = encode2UTF8(code);\n\n      for(var j = 0; j < codes.length; j++){\n        bytes[offset] = codes[j];\n        offset++;\n      }\n    }\n\n    return offset;\n  };\n\n  /**\n   * Decode string from utf8 bytes\n   */\n  Codec.decodeStr = function(bytes, offset, length){\n    var array = [];\n    var end = offset + length;\n\n    while(offset < end){\n      var code = 0;\n\n      if(bytes[offset] < 128){\n        code = bytes[offset];\n\n        offset += 1;\n      }else if(bytes[offset] < 224){\n        code = ((bytes[offset] & 0x3f)<<6) + (bytes[offset+1] & 0x3f);\n        offset += 2;\n      }else{\n        code = ((bytes[offset] & 0x0f)<<12) + ((bytes[offset+1] & 0x3f)<<6) + (bytes[offset+2] & 0x3f);\n        offset += 3;\n      }\n\n      array.push(code);\n\n    }\n\n    var str = '';\n    for(var i = 0; i < array.length;){\n      str += String.fromCharCode.apply(null, array.slice(i, i + 10000));\n      i += 10000;\n    }\n\n    return str;\n  };\n\n  /**\n   * Return the byte length of the str use utf8\n   */\n  Codec.byteLength = function(str){\n    if(typeof(str) !== 'string'){\n      return -1;\n    }\n\n    var length = 0;\n\n    for(var i = 0; i < str.length; i++){\n      var code = str.charCodeAt(i);\n      length += codeLength(code);\n    }\n\n    return length;\n  };\n\n  /**\n   * Encode a unicode16 char code to utf8 bytes\n   */\n  function encode2UTF8(charCode){\n    if(charCode <= 0x7f){\n      return [charCode];\n    }else if(charCode <= 0x7ff){\n      return [0xc0|(charCode>>6), 0x80|(charCode & 0x3f)];\n    }else{\n      return [0xe0|(charCode>>12), 0x80|((charCode & 0xfc0)>>6), 0x80|(charCode & 0x3f)];\n    }\n  }\n\n  function codeLength(code){\n    if(code <= 0x7f){\n      return 1;\n    }else if(code <= 0x7ff){\n      return 2;\n    }else{\n      return 3;\n    }\n  }\n})('undefined' !== typeof protobuf ? protobuf : module.exports, this);\n\n/**\n * encoder module\n */\n(function (exports, global){\n\n  var protobuf = exports;\n  var MsgEncoder = exports.encoder = {};\n\n  var codec = protobuf.codec;\n  var constant = protobuf.constants;\n  var util = protobuf.util;\n\n  MsgEncoder.init = function(protos){\n    this.protos = protos || {};\n  };\n\n  MsgEncoder.encode = function(route, msg){\n    //Get protos from protos map use the route as key\n    var protos = this.protos[route];\n\n    //Check msg\n    if(!checkMsg(msg, protos)){\n      return null;\n    }\n\n    //Set the length of the buffer 2 times bigger to prevent overflow\n    var length = codec.byteLength(JSON.stringify(msg));\n\n    //Init buffer and offset\n    var buffer = new ArrayBuffer(length);\n    var uInt8Array = new Uint8Array(buffer);\n    var offset = 0;\n\n    if(!!protos){\n      offset = encodeMsg(uInt8Array, offset, protos, msg);\n      if(offset > 0){\n        return uInt8Array.subarray(0, offset);\n      }\n    }\n\n    return null;\n  };\n\n  /**\n   * Check if the msg follow the defination in the protos\n   */\n  function checkMsg(msg, protos){\n    if(!protos){\n      return false;\n    }\n\n    for(var name in protos){\n      var proto = protos[name];\n\n      //All required element must exist\n      switch(proto.option){\n        case 'required' :\n          if(typeof(msg[name]) === 'undefined'){\n            return false;\n          }\n        case 'optional' :\n          if(typeof(msg[name]) !== 'undefined'){\n            if(!!protos.__messages[proto.type]){\n              checkMsg(msg[name], protos.__messages[proto.type]);\n            }\n          }\n        break;\n        case 'repeated' :\n          //Check nest message in repeated elements\n          if(!!msg[name] && !!protos.__messages[proto.type]){\n            for(var i = 0; i < msg[name].length; i++){\n              if(!checkMsg(msg[name][i], protos.__messages[proto.type])){\n                return false;\n              }\n            }\n          }\n        break;\n      }\n    }\n\n    return true;\n  }\n\n  function encodeMsg(buffer, offset, protos, msg){\n    for(var name in msg){\n      if(!!protos[name]){\n        var proto = protos[name];\n\n        switch(proto.option){\n          case 'required' :\n          case 'optional' :\n            offset = writeBytes(buffer, offset, encodeTag(proto.type, proto.tag));\n            offset = encodeProp(msg[name], proto.type, offset, buffer, protos);\n          break;\n          case 'repeated' :\n            if(msg[name].length > 0){\n              offset = encodeArray(msg[name], proto, offset, buffer, protos);\n            }\n          break;\n        }\n      }\n    }\n\n    return offset;\n  }\n\n  function encodeProp(value, type, offset, buffer, protos){\n    switch(type){\n      case 'uInt32':\n        offset = writeBytes(buffer, offset, codec.encodeUInt32(value));\n      break;\n      case 'int32' :\n      case 'sInt32':\n        offset = writeBytes(buffer, offset, codec.encodeSInt32(value));\n      break;\n      case 'float':\n        writeBytes(buffer, offset, codec.encodeFloat(value));\n        offset += 4;\n      break;\n      case 'double':\n        writeBytes(buffer, offset, codec.encodeDouble(value));\n        offset += 8;\n      break;\n      case 'string':\n        var length = codec.byteLength(value);\n\n        //Encode length\n        offset = writeBytes(buffer, offset, codec.encodeUInt32(length));\n        //write string\n        codec.encodeStr(buffer, offset, value);\n        offset += length;\n      break;\n      default :\n        if(!!protos.__messages[type]){\n          //Use a tmp buffer to build an internal msg\n          var tmpBuffer = new ArrayBuffer(codec.byteLength(JSON.stringify(value)));\n          var length = 0;\n\n          length = encodeMsg(tmpBuffer, length, protos.__messages[type], value);\n          //Encode length\n          offset = writeBytes(buffer, offset, codec.encodeUInt32(length));\n          //contact the object\n          for(var i = 0; i < length; i++){\n            buffer[offset] = tmpBuffer[i];\n            offset++;\n          }\n        }\n      break;\n    }\n\n    return offset;\n  }\n\n  /**\n   * Encode reapeated properties, simple msg and object are decode differented\n   */\n  function encodeArray(array, proto, offset, buffer, protos){\n    var i = 0;\n\n    if(util.isSimpleType(proto.type)){\n      offset = writeBytes(buffer, offset, encodeTag(proto.type, proto.tag));\n      offset = writeBytes(buffer, offset, codec.encodeUInt32(array.length));\n      for(i = 0; i < array.length; i++){\n        offset = encodeProp(array[i], proto.type, offset, buffer);\n      }\n    }else{\n      for(i = 0; i < array.length; i++){\n        offset = writeBytes(buffer, offset, encodeTag(proto.type, proto.tag));\n        offset = encodeProp(array[i], proto.type, offset, buffer, protos);\n      }\n    }\n\n    return offset;\n  }\n\n  function writeBytes(buffer, offset, bytes){\n    for(var i = 0; i < bytes.length; i++, offset++){\n      buffer[offset] = bytes[i];\n    }\n\n    return offset;\n  }\n\n  function encodeTag(type, tag){\n    var value = constant.TYPES[type]||2;\n    return codec.encodeUInt32((tag<<3)|value);\n  }\n})('undefined' !== typeof protobuf ? protobuf : module.exports, this);\n\n/**\n * decoder module\n */\n(function (exports, global){\n  var protobuf = exports;\n  var MsgDecoder = exports.decoder = {};\n\n  var codec = protobuf.codec;\n  var util = protobuf.util;\n\n  var buffer;\n  var offset = 0;\n\n  MsgDecoder.init = function(protos){\n    this.protos = protos || {};\n  };\n\n  MsgDecoder.setProtos = function(protos){\n    if(!!protos){\n      this.protos = protos;\n    }\n  };\n\n  MsgDecoder.decode = function(route, buf){\n    var protos = this.protos[route];\n\n    buffer = buf;\n    offset = 0;\n\n    if(!!protos){\n      return decodeMsg({}, protos, buffer.length);\n    }\n\n    return null;\n  };\n\n  function decodeMsg(msg, protos, length){\n    while(offset<length){\n      var head = getHead();\n      var type = head.type;\n      var tag = head.tag;\n      var name = protos.__tags[tag];\n\n      switch(protos[name].option){\n        case 'optional' :\n        case 'required' :\n          msg[name] = decodeProp(protos[name].type, protos);\n        break;\n        case 'repeated' :\n          if(!msg[name]){\n            msg[name] = [];\n          }\n          decodeArray(msg[name], protos[name].type, protos);\n        break;\n      }\n    }\n\n    return msg;\n  }\n\n  /**\n   * Test if the given msg is finished\n   */\n  function isFinish(msg, protos){\n    return (!protos.__tags[peekHead().tag]);\n  }\n  /**\n   * Get property head from protobuf\n   */\n  function getHead(){\n    var tag = codec.decodeUInt32(getBytes());\n\n    return {\n      type : tag&0x7,\n      tag : tag>>3\n    };\n  }\n\n  /**\n   * Get tag head without move the offset\n   */\n  function peekHead(){\n    var tag = codec.decodeUInt32(peekBytes());\n\n    return {\n      type : tag&0x7,\n      tag : tag>>3\n    };\n  }\n\n  function decodeProp(type, protos){\n    switch(type){\n      case 'uInt32':\n        return codec.decodeUInt32(getBytes());\n      case 'int32' :\n      case 'sInt32' :\n        return codec.decodeSInt32(getBytes());\n      case 'float' :\n        var float = codec.decodeFloat(buffer, offset);\n        offset += 4;\n        return float;\n      case 'double' :\n        var double = codec.decodeDouble(buffer, offset);\n        offset += 8;\n        return double;\n      case 'string' :\n        var length = codec.decodeUInt32(getBytes());\n\n        var str =  codec.decodeStr(buffer, offset, length);\n        offset += length;\n\n        return str;\n      default :\n        if(!!protos && !!protos.__messages[type]){\n          var length = codec.decodeUInt32(getBytes());\n          var msg = {};\n          decodeMsg(msg, protos.__messages[type], offset+length);\n          return msg;\n        }\n      break;\n    }\n  }\n\n  function decodeArray(array, type, protos){\n    if(util.isSimpleType(type)){\n      var length = codec.decodeUInt32(getBytes());\n\n      for(var i = 0; i < length; i++){\n        array.push(decodeProp(type));\n      }\n    }else{\n      array.push(decodeProp(type, protos));\n    }\n  }\n\n  function getBytes(flag){\n    var bytes = [];\n    var pos = offset;\n    flag = flag || false;\n\n    var b;\n\n    do{\n      b = buffer[pos];\n      bytes.push(b);\n      pos++;\n    }while(b >= 128);\n\n    if(!flag){\n      offset = pos;\n    }\n    return bytes;\n  }\n\n  function peekBytes(){\n    return getBytes(true);\n  }\n\n})('undefined' !== typeof protobuf ? protobuf : module.exports, this);\n\n"]}