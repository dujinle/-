{"version":3,"sources":["tdk_game_room.js"],"names":["cc","Class","extends","Component","properties","bet","sumBet","count","fapai_count","roomNum","playerNum","roomState","master_name","total_count","danzhu","comparableState","currentGetPowerPlayerPosition","master_label","Label","room_num_label","danzhu_label","zongzhu_label","huihe_label","zhunbei_button","Node","bipai_button","kaipai_button","qipai_button","genzhu_button","jiazhu_button","players","type","default","onLoad","g_betArray","g_roomData","g_roomMasterName","g_totalCount","startDealCardPosition1","startDealCardPosition","betPhotoArray","Array","myselfCards","init_head_info","initButtonEnableAfterComeInRoom","initPlayersAndPlayer_noPower","initPlayerCardsPosition","schedule","showRoomMessageUpdate","REPEAT_FOREVER","start","log","audioSource","node","getComponent","AudioSource","g_music_key","sys","localStorage","getItem","MUSIC_KEY","BOOL","YES","play","init_count_timer","pomelo_on","size","director","getWinSize","lmaster","string","lroom_num","ldanzhu","lzongzhu","lhuihe","position","convertToNodeSpaceAR","p","width","height","g_dealCardBack","getContentSize","setPosition","addChild","msage_scroll","instantiate","g_assets","x","y","Button","interactable","initButtonEnableAfterThrow","initButtonEnableAfterFapai","g_myselfPlayerPos","i","g_players","length","player","player_com","position_server","console","check_card","start_timer","initButtonEnableAfterFapaiNext","initButtonEnableAfterFapaiContinue","self","JSON","stringify","g_playerData","g_user","playerId","idx","player_stc","init","player_position","is_power","push","g_players_noPower","active","tmp_allplayers","concat","all_players","m","my_cards","calc_player_card_position","card","card_com","g_fapaiNum","sprite_back","runAction","show","sprite","callback_zhunbei","pomelo","request","util","getGameRoute","process","location","data","msg","callback_kaipai","callback_genzhu","chip","callback_qipai","callback_bipai","callback_jiazhu","getVisibleSize","pop_add_chip","pop_add_chip_com","set_callback","index","add_chip","getPositionY","mobile_sprite","callback_uinfo","event","id","send_from","send_to","callback_setting","pop_setting","pop_setting_com","NO","pause","callback_gameback","onExit","loadScene","betString","sumBetString","countFlowingString","on","onReady_function","bind","onAdd_function","onNoRound_function","onGetUinfo_function","onFapai_function","onFapaiNext_function","onFapaiContinue_function","onShoupai_function","onOpen_function","onThrow_function","onFollow_function","onLeave_function","onChangePlayer_function","onBipai_function","onEqual_function","onEqualPai_function","onEnd_function","onEndPai_function","onAddChip_function","onUserBroadcast_function","splice","setSpriteStatus","stop_timer","playerInfo","t_player","instruction_faPai","removeFromParent","remove_cards","init_cards","abandon","hide_status_sprite","actionBottomBet","getPosition","resetMoneyLabel","my_gold","parseInt","biPaiMenuItemFlag","suit","rank","acMoveDown","moveTo","callFuncActionFaPaiNext","callFunc","actionFaPaiNext","sequence","EaseOut","callFuncActionFaPaiContinue","actionFaPaiContinue","tailPai","cardType","j","set_card_sprite","myselfCardsReach","callFuncActionDealCard","actionFaPai","playerName","backCardSeq","delayTime","hide","backCamera","rotateBy","backSpawn","spawn","frontSeq","frontCamera","frontSpawn","m_playerId","actionFollowBet","isFind","rotationPlayerPositionServer","winnerPositionServer","playerPositionServer","allScore","my_scole","statusTag","equalFlag","paiXing","callFuncActionEqual","actionFaPaiEqual","actionWinnerGetBet","winnerCardType","cardString","parse","openAllCard","msage_scroll_com","set_string","golds_info","tplayers","key","pop_game_finish","pop_game_finish_com","init_info","uinfo","uinfo_com","actionSendGift","pnode","s_player","e_player","active_name","move","rotation","sendAction","anim","Animation","destroy","animStatus","wrapMode","WrapMode","Normal","Loop","repeatCount","playerArrayPosition","setPlayerCardsPosition","get_last_card","acMoveUp","moveBy","acMoveUp1","EaseIn","acInitMenuItemCallback","acMoveDown1","acToCardPlayer","mythis","mycard","startFaPaiPosition","addPlayerCard","round_num","tcard","winners","equalCard","positionServer","addEqualCard","initCardSprite","countNumber","Math","random","move_pos","moveBet","isCheckCard","chipNum","delayCompare","DelayTime","bipaiFinish","finish_com","removeBiPaiFinish","getPositionX","card_len","my_this","playerPosition","getBetAction","biPaiSelectCallBack","location1","location2","pomelo_removeListener","removeListener"],"mappings":"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","file":"tdk_game_room.js","sourceRoot":"../../../../../assets/Script/game_room","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n\t\tbet:0,\n\t\tsumBet:0,\n\t\tcount:0,\n\t\tfapai_count:0,\n\t\troomNum:0,\n\t\tplayerNum:0,\n\t\troomState:0,\n\t\tmaster_name:null,\n\t\ttotal_count:0,\n\t\tdanzhu:100,\n\t\tcomparableState:false,\n\t\tcurrentGetPowerPlayerPosition:0,\n\t\t//head label info\n\t\tmaster_label:cc.Label,\n\t\troom_num_label:cc.Label,\n\t\tdanzhu_label:cc.Label,\n\t\tzongzhu_label:cc.Label,\n\t\thuihe_label:cc.Label,\n\t\t//buttons for game\n\t\tzhunbei_button:cc.Node,\n\t\tbipai_button:cc.Node,\n\t\tkaipai_button:cc.Node,\n\t\tqipai_button:cc.Node,\n\t\tgenzhu_button:cc.Node,\n\t\tjiazhu_button:cc.Node,\n\t\tplayers:{\n\t\t\ttype:cc.Node,\n\t\t\tdefault:[],\n\t\t}\n    },\n\n    onLoad () {\n\t\tthis.bet = g_betArray[0];\n        this.sumBet = g_roomData[1];\n\t\tthis.count = g_roomData[2];\n\t\tthis.roomNum = g_roomData[3];\n        this.playerNum = g_roomData[4];\n        this.roomState = g_roomData[5];\n\t\tthis.currentGetPowerPlayerPosition = g_roomData[6];\n\t\tthis.master_name = g_roomMasterName;\n\t\tthis.total_count = g_totalCount;\n\t\tthis.startDealCardPosition1 = 0;\n\t\tthis.startDealCardPosition = 0;\n\t\tthis.comparableState = false;\n\t\tthis.betPhotoArray = new Array();\n\t\tthis.myselfCards = new Array();\n\t\tthis.init_head_info();\n\t\tthis.initButtonEnableAfterComeInRoom();\n\t\tthis.initPlayersAndPlayer_noPower();\n\t\tif(this.roomState == 1){\n\t\t\t/*进来的时候 有玩家正在玩牌 则初始化他们的牌位置*/\n\t\t\tthis.initPlayerCardsPosition();\n\t\t}\n\t\tthis.schedule(this.showRoomMessageUpdate,1.0/60,cc.REPEAT_FOREVER,0);\n\t},\n\tstart(){\n\t\tcc.log(\"go into zjh game room scene start\");\n\t\tthis.audioSource = this.node.getComponent(cc.AudioSource);\n\t\tg_music_key = cc.sys.localStorage.getItem(MUSIC_KEY);\n\t\tif(g_music_key == BOOL.YES){\n\t\t\tthis.audioSource.play();\n\t\t}\n\t\tthis.init_count_timer();\n\t\tthis.pomelo_on();\n\t},\n\tinit_head_info(){\n\t\tvar size = cc.director.getWinSize();\n\t\tvar lmaster = this.master_label.getComponent(cc.Label);\n\t\tlmaster.string = this.master_name;\n\t\t\n\t\tvar lroom_num = this.room_num_label.getComponent(cc.Label);\n\t\tlroom_num.string = this.roomNum;\n\t\t\n\t\tvar ldanzhu = this.danzhu_label.getComponent(cc.Label);\n\t\tldanzhu.string = this.bet;\n\t\t\n\t\tvar lzongzhu = this.zongzhu_label.getComponent(cc.Label);\n\t\tlzongzhu.string = this.sumBet;\n\t\t\n\t\tvar lhuihe = this.huihe_label.getComponent(cc.Label);\n\t\tlhuihe.string = this.count + \"/\" + this.total_count;\n\t\t\n\t\tvar position = this.node.convertToNodeSpaceAR(cc.p(\n\t\t\tsize.width/2,size.height + g_dealCardBack.getContentSize().height/2));\n\t\tg_dealCardBack.setPosition(position);\n\t\tthis.node.addChild(g_dealCardBack);\n\t\t\n\t\t//添加滚动字幕\n\t\tthis.msage_scroll = cc.instantiate(g_assets[\"msage_scroll\"]);\n\t\tthis.node.addChild(this.msage_scroll);\n\t\tvar x = size.width/2;\n\t\tvar y = size.height - 120;\n\t\tthis.msage_scroll.setPosition(this.node.convertToNodeSpaceAR(cc.p(x,y)));\n\t},\n\tinitButtonEnableAfterComeInRoom(){\n\t\tthis.bipai_button.getComponent(cc.Button).interactable = false;\n\t\tthis.kaipai_button.getComponent(cc.Button).interactable = false;\n\t\tthis.qipai_button.getComponent(cc.Button).interactable = false;\n\t\tthis.genzhu_button.getComponent(cc.Button).interactable = false;\n\t\tthis.jiazhu_button.getComponent(cc.Button).interactable = false;\n\t\t//正在游戏中则新加入的玩家不可以准备\n\t\tif(this.roomState == 1){\n\t\t\tthis.zhunbei_button.getComponent(cc.Button).interactable = false;\n\t\t}else{\n\t\t\tthis.zhunbei_button.getComponent(cc.Button).interactable = true;\n\t\t}\n    },\n\tinitButtonEnableAfterThrow(){\n\t\tthis.bipai_button.getComponent(cc.Button).interactable = false;\n\t\tthis.kaipai_button.getComponent(cc.Button).interactable = false;\n\t\tthis.qipai_button.getComponent(cc.Button).interactable = false;\n\t\tthis.genzhu_button.getComponent(cc.Button).interactable = false;\n\t\tthis.jiazhu_button.getComponent(cc.Button).interactable = false;\n\t\tthis.zhunbei_button.getComponent(cc.Button).interactable = false;\n    },\n\tinitButtonEnableAfterFapai(){\n\t\tthis.kaipai_button.getComponent(cc.Button).interactable = true;\n\t\tthis.qipai_button.getComponent(cc.Button).interactable = true;\n\t\tif(g_myselfPlayerPos == this.currentGetPowerPlayerPosition){\n\t\t\tthis.genzhu_button.getComponent(cc.Button).interactable = true;\n\t\t\tthis.jiazhu_button.getComponent(cc.Button).interactable = true;\n\t\t}\n\t\tfor(var i=0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\t\tif(player_com.position_server == this.currentGetPowerPlayerPosition){\n\t\t\t\tconsole.log(\"positionServer:\" + player_com.position_server + player_com.check_card);\n\t\t\t\tplayer_com.start_timer();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t},\n\tinitButtonEnableAfterFapaiNext(){\n\t\tif(g_myselfPlayerPos == this.currentGetPowerPlayerPosition){\n\t\t\tthis.genzhu_button.getComponent(cc.Button).interactable = true;\n\t\t\tthis.jiazhu_button.getComponent(cc.Button).interactable = true;\n\t\t\tif(this.fapai_count >= 5){\n\t\t\t\tthis.bipai_button.getComponent(cc.Button).interactable = true;\n\t\t\t}\n\t\t}\n\t\tfor(var i=0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\t\tif(player_com.position_server == this.currentGetPowerPlayerPosition){\n\t\t\t\tconsole.log(\"positionServer:\" + player_com.position_server + player_com.check_card);\n\t\t\t\tplayer_com.start_timer();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t},\n\tinitButtonEnableAfterFapaiContinue(){\n\t\tthis.genzhu_button.getComponent(cc.Button).interactable = false;\n\t\tthis.jiazhu_button.getComponent(cc.Button).interactable = false;\n\t\tif(g_myselfPlayerPos == this.currentGetPowerPlayerPosition){\n\t\t\tthis.genzhu_button.getComponent(cc.Button).interactable = true;\n\t\t}\n\t\tfor(var i=0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\t\tif(player_com.position_server == this.currentGetPowerPlayerPosition){\n\t\t\t\tconsole.log(\"positionServer:\" + player_com.position_server + player_com.check_card);\n\t\t\t\tplayer_com.start_timer();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t},\n    initPlayersAndPlayer_noPower(){\n\t\tvar self = this;\n\t\tcc.log(\"initPlayersAndPlayer_noPower\" + JSON.stringify(g_playerData));\n\t\tfor(var i = 0;i < g_playerData.length;i++){\n\t\t\tif(g_playerData[i][0] == g_user.playerId){\n\t\t\t\tg_myselfPlayerPos = g_playerData[i][1];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tvar position = new Array();\n\t\t//寻找玩家自己，确定自己的服务器位置和客户端位置\n\t\tfor(var i = 0;i < g_playerData.length;i++){\n\t\t\tvar idx = -1;\n\t\t\tvar player_stc = g_playerData[i];\n\t\t\tif(player_stc[1] == g_myselfPlayerPos){\n\t\t\t\tidx = 0;\n\t\t\t}else if(player_stc[1] > g_myselfPlayerPos){\n\t\t\t\tvar idx = player_stc[1] - g_myselfPlayerPos;\n\t\t\t}else if(player_stc[1] < g_myselfPlayerPos){\n\t\t\t\tvar idx = this.players.length - g_myselfPlayerPos + player_stc[1];\n\t\t\t}\n\t\t\tif(idx >= 0){\n\t\t\t\tposition[idx] = player_stc;\n\t\t\t}\n\t\t}\n\t\tfor(var i = 0; i < this.players.length;i++){\n\t\t\tvar player_stc = position[i];\n\t\t\tif(player_stc == null){\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tvar player = this.players[i];\n\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\t\tplayer_com.init(player_stc);\n\t\t\tplayer_com.player_position = i + 1;\n\t\t\tif(player_com.is_power > 0){\n\t\t\t\tg_players.push(player);\n\t\t\t}else{\n\t\t\t\tg_players_noPower.push(player);\n\t\t\t}\n\t\t\tplayer.active = true;\n\t\t}\n\t},\n    init_count_timer(){\n\t\tvar tmp_allplayers = g_players_noPower.concat(g_players);\n    \tfor(var i = 0;i < tmp_allplayers.length;i++){\n\t\t\tvar player_com = tmp_allplayers[i].getComponent(\"tdk_player\");\n\t\t\tif(player_com.position_server == g_myselfPlayerPos){\n\t\t\t\tplayer_com.start_timer();\n    \t\t\tbreak;\n    \t\t}\n    \t}\n    },\n\tinitPlayerCardsPosition(){\n\t\tcc.log(\"initPlayerCardsPosition start .......\");\n\t\tvar all_players = g_players.concat(g_players_noPower);\n        for(var i=0;i < all_players.length;i++){\n\t\t\tvar player = all_players[i];\n\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n            if(player_com.is_power >= 1){\n\t\t\t\tfor(var m = 0;m < player_com.my_cards.length;m++){\n\t\t\t\t\tvar position = this.calc_player_card_position(player,m);\n\t\t\t\t\tvar card = player_com.my_cards[m];\n\t\t\t\t\tvar card_com = card.getComponent(\"zjh_card\");\n\t\t\t\t\tcard.setPosition(position);\n\t\t\t\t\tif(m < g_fapaiNum - 1){\n\t\t\t\t\t\tcard_com.sprite_back.node.runAction(cc.show());\n\t\t\t\t\t}else{\n\t\t\t\t\t\tcard_com.sprite.runAction(cc.show());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n        }\n\t},\n\t\n\t//按钮回调函数\n\tcallback_zhunbei(){\n\t\tthis.zhunbei_button.getComponent(cc.Button).interactable = false;\n\t\tpomelo.request(util.getGameRoute(),{\n\t\t\tprocess:\"ready\",\n\t\t\tlocation:g_myselfPlayerPos\n\t\t},function(data){\n\t\t\tcc.log(data.msg);\n\t\t});\n    },\n\tcallback_kaipai(){\n\t\tthis.kaipai_button.getComponent(cc.Button).interactable = false;\n        pomelo.request(util.getGameRoute(),{\n            process:\"open\",\n            location:g_myselfPlayerPos\n        },function(data){\n            cc.log(data.msg);\n        });\n    },\n\tcallback_genzhu(){\n\t\tthis.genzhu_button.getComponent(cc.Button).interactable = false;\n\t\tif(this.fapai_count >= 5){\n\t\t\tpomelo.request(util.getGameRoute(),{\n\t\t\t\tprocess:\"follow\",\n\t\t\t\tlocation:g_myselfPlayerPos\n\t\t\t},function(data){\n\t\t\t\tconsole.log(data.msg);\n\t\t\t});\n\t\t}else{\n\t\t\tpomelo.request(util.getGameRoute(),{\n\t\t\t\tprocess:\"getpai\",\n\t\t\t\tlocation:g_myselfPlayerPos,\n\t\t\t\tchip:this.bet\n\t\t\t},function(data){\n\t\t\t\tconsole.log(data.msg);\n\t\t\t});\n\t\t}\n\t},\n\tcallback_qipai(){\n\t\tthis.qipai_button.getComponent(cc.Button).interactable = false;\n\t\tpomelo.request(util.getGameRoute(),{\n\t\t\tprocess:\"throw\",\n\t\t\tlocation:g_myselfPlayerPos\n\t\t},function(data){\n\t\t\tcc.log(data.msg);\n\t\t});\n\t},\n\tcallback_bipai(){\n\t\tif(g_players.length >= 2) {\n\t\t\tthis.bipai_button.getComponent(cc.Button).interactable = false;\n\t\t\tthis.jiazhu_button.getComponent(cc.Button).interactable = false;\n\t\t\tthis.genzhu_button.getComponent(cc.Button).interactable = false;\n\t\t\tthis.qipai_button.getComponent(cc.Button).interactable = false;\n\t\t\tpomelo.request(util.getGameRoute(), {\n\t\t\t\tprocess: \"bipai\",\n\t\t\t\tlocation: g_myselfPlayerPos\n\t\t\t}, function (data) {\n\t\t\t\tcc.log(JSON.stringify(data));\n\t\t\t});\n\t\t}\n    },\n\tcallback_jiazhu(){\n\t\tvar self = this;\n\t\tvar size = cc.director.getVisibleSize();\n\t\tvar pop_add_chip = cc.instantiate(g_assets[\"pop_add_chip\"]);\n\t\tvar pop_add_chip_com = pop_add_chip.getComponent(\"add_chip\");\n\t\tpop_add_chip_com.set_callback(function(index){\n\t\t\tif(self.fapai_count >= 5){\n\t\t\t\tpomelo.request(util.getGameRoute(),{\n\t\t\t\t\tprocess:\"add\",\n\t\t\t\t\tadd_chip:g_betArray[index],\n\t\t\t\t\tlocation:g_myselfPlayerPos\n\t\t\t\t},function(data){\n\t\t\t\t\tconsole.log(data.msg);\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tpomelo.request(util.getGameRoute(),{\n\t\t\t\t\tprocess:\"getpai\",\n\t\t\t\t\tlocation:g_myselfPlayerPos,\n\t\t\t\t\tchip:g_betArray[index]\n\t\t\t\t},function(data){\n\t\t\t\t\tconsole.log(data.msg);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\t\tif(player_com.position_server == g_myselfPlayerPos){\n\t\t\t\tvar x = 0;\n\t\t\t\tvar y = player.getPositionY() + player_com.mobile_sprite.node.height + 30;\n\t\t\t\tthis.node.addChild(pop_add_chip);\n\t\t\t\tpop_add_chip.setPosition(cc.p(x,y));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t},\n\tcallback_uinfo(event,id){\n\t\tvar self = this;\n\t\tvar player = this.players[id];\n\t\tvar player_com = player.getComponent(\"zjh_player\");\n\t\tpomelo.request(util.getGameRoute(),{\n            process : 'get_uinfo',\n\t\t\tsend_from:g_myselfPlayerPos,\n\t\t\tsend_to:player_com.position_server\n        },function(data){\n            console.log(\"-----quit------\"+JSON.stringify(data));\n        })\n\t},\n\tcallback_setting(){\n\t\tvar self = this;\n\t\tvar size = cc.director.getVisibleSize();\n\t\tvar pop_setting = cc.instantiate(g_assets[\"pop_setting_scene\"]);\n\t\tvar pop_setting_com = pop_setting.getComponent(\"pop_set_scene\");\n\t\tpop_setting_com.set_callback(function(index){\n\t\t\tif(index == 0){\n\t\t\t\tif(g_music_key == BOOL.NO){\n\t\t\t\t\tself.audioSource.pause();\n\t\t\t\t}else{\n\t\t\t\t\tself.audioSource.play();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tvar x = size.width/2;\n\t\tvar y = size.height/2;\n\t\tthis.node.addChild(pop_setting);\n\t\tpop_setting.setPosition(this.node.convertToNodeSpaceAR(cc.p(x,y)));\n\t},\n\tcallback_gameback(){\n\t\tvar self = this;\n\t\tpomelo.request(util.getGameRoute(),{\n            process : 'quitRoom'\n        },function(data){\n            console.log(\"-----quit------\"+JSON.stringify(data));\n\t\t\tself.onExit();\n            cc.director.loadScene(\"MainScene\");\n        })\n\t},\n\tshowRoomMessageUpdate(){\n\t\tvar betString = this.bet;\n\t\tthis.danzhu_label.string = betString;\n\n\t\tvar sumBetString = this.sumBet;\n\t\tthis.zongzhu_label.string = sumBetString;\n\n\t\tvar countFlowingString = this.count + \"/\" + this.total_count;\n\t\tthis.huihe_label.string = countFlowingString;\n\t},\n\tpomelo_on(){\n    \tpomelo.on('onReady',this.onReady_function.bind(this));\n\t\tpomelo.on('onAdd',this.onAdd_function.bind(this));\n\t\tpomelo.on('onNoRound',this.onNoRound_function.bind(this));\n\t\tpomelo.on('onGetUinfo',this.onGetUinfo_function.bind(this));\n\t\tpomelo.on('onFapai',this.onFapai_function.bind(this));\n\t\tpomelo.on('onFapaiNext',this.onFapaiNext_function.bind(this));\n\t\tpomelo.on('onFapaiContinue',this.onFapaiContinue_function.bind(this));\n\t\tpomelo.on('onShoupai',this.onShoupai_function.bind(this));\n\t\tpomelo.on('onOpen',this.onOpen_function.bind(this));\n\t\tpomelo.on('onThrow',this.onThrow_function.bind(this));\n\t\tpomelo.on('onFollow',this.onFollow_function.bind(this));\n\t\tpomelo.on('onLeave',this.onLeave_function.bind(this));\n\t\tpomelo.on('onChangePlayer',this.onChangePlayer_function.bind(this));\n\t\tpomelo.on('onBipai',this.onBipai_function.bind(this));\n\t\tpomelo.on('onEqual',this.onEqual_function.bind(this));\n\t\tpomelo.on('onEqualPai',this.onEqualPai_function.bind(this));\n\t\tpomelo.on('onEnd',this.onEnd_function.bind(this));\n\t\tpomelo.on('onEndPai',this.onEndPai_function.bind(this));\n\t\tpomelo.on('onAddChip',this.onAddChip_function.bind(this));\n\t\tpomelo.on('onActBroadcast',this.onUserBroadcast_function.bind(this));\n    },\n\tonReady_function(data){\n\t\tcc.log(\"pomelo on Ready:\" + data.location+\" is ready\");\n\t\t/*如果玩家进来时正在游戏中则准备后 放入g_players中*/\n\t\tfor(var i = 0;i < g_players_noPower.length;i++){\n\t\t\tvar player = g_players_noPower[i];\n\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\t\tif(player_com.position_server == data.location){\n\t\t\t\tg_players.push(player);\n\t\t\t\tg_players_noPower.splice(i,1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\t\tif(player_com.position_server == data.location){\n\t\t\t\tplayer_com.is_power = 1;\n\t\t\t\tplayer_com.setSpriteStatus(\"yizhunbei\");\n\t\t\t\tplayer_com.stop_timer();\n\t\t\t\t//准备状态表示\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t},\n\tonAdd_function(data){\n\t\tcc.log(\"onAdd:\" + JSON.stringify(data));\n\t\tvar player = null;\n\t\tvar playerInfo=data[\"user\"];\n\n\t\tvar t_player=new Array();\n\t\tt_player.push(playerInfo[\"id\"]);\n\t\tt_player.push(playerInfo[\"location\"]);\n\t\tt_player.push(playerInfo[\"isGame\"]);\n\t\tt_player.push(playerInfo[\"nickName\"]);\n\t\tt_player.push(playerInfo[\"gold\"]);\n\t\tt_player.push(playerInfo[\"gender\"]);\n\t\t\n\t\t//确定新加入玩家的客户端位置\n\t\tvar idx = 0;\n\t\tif(t_player[1] > g_myselfPlayerPos){\n\t\t\tidx = t_player[1] - g_myselfPlayerPos;\n\t\t}else{\n\t\t\tidx = this.players.length - g_myselfPlayerPos + t_player[1];\n\t\t}\n\t\tvar player = this.players[idx];\n\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\tplayer_com.init(t_player);\n\t\tplayer_com.player_position = idx + 1;\n\t\tif(this.roomState == 1){\n\t\t\tg_players_noPower.push(player);\n\t\t}else{\n\t\t\tg_players.push(player);\n\t\t}\n\t\tplayer.active = true;\n\t\t/*\n\t\t//为新加入的玩家头像添加个人信息按钮\n\t\tvar menuSprite1=new cc.Sprite(res.Mobile_jpg);\n\t\tvar menuSprite2=new cc.Sprite(res.Mobile_jpg);\n\t\tvar menuSprite3=new cc.Sprite(res.Mobile_jpg);\n\t\tvar menuItem = new cc.MenuItemSprite(menuSprite1,menuSprite2,menuSprite3,this.menuCallbackPersonalMessage,this);\n\t\tmenuItem.setName(player.player_position.toString());\n\t\tmenuItem.attr({\n\t\t\tx : 0,\n\t\t\ty : 0,\n\t\t\tanchorX : 0,\n\t\t\tanchorY : 0\n\t\t});\n\t\tvar menu=new cc.Menu(menuItem);\n\t\tmenu.attr({\n\t\t\tx : 0,\n\t\t\ty : 0,\n\t\t\tanchorX : 0,\n\t\t\tanchorY : 0\n\t\t});\n\t\tplayer.spritePhotoMobile.addChild(menu);\n\t\t*/\n\t\tthis.playerNum++;\n\t},\n\tonFapai_function(data){\n\t\tcc.log(\"onFapai\" + JSON.stringify(data));\n\t\tvar instruction_faPai = data[\"msg\"];\n\t\tthis.count = data[\"round\"];\n\t\tif(instruction_faPai==\"fapaile!\"){\n\t\t\t/*更新房间状态和玩家信息*/\n\t\t\t//初始化发牌的位置\n\t\t\tthis.currentGetPowerPlayerPosition = data[\"location\"];\n\t\t\tthis.startDealCardPosition1 = data[\"location\"];\n\t\t\tthis.startDealCardPosition = data[\"location\"];\n\t\t\t\n\t\t\t//更新房间状态\n\t\t\tthis.roomState=1;\n\t\t\tthis.fapai_count = 0;\n\t\t\tfor(var i = 0;i < this.betPhotoArray.length;i++){\n\t\t\t\tthis.betPhotoArray[i].removeFromParent();\n\t\t\t}\n\t\t\tthis.betPhotoArray.length=0;\n\t\t\t//更新玩家信息\n\t\t\tfor(var i=0;i<g_players.length;i++){\n\t\t\t\t//清除玩家手中上一局的牌，\n\t\t\t\tvar player_com = g_players[i].getComponent(\"tdk_player\");\n\t\t\t\tplayer_com.remove_cards();\n\t\t\t}\n\t\t\tthis.bet = g_betArray[0];\n\t\t\tthis.sumBet = data[\"all_chip\"];\n\n\t\t\t/*初始化玩家手中的牌（背面），权限isPower,开牌checkCard弃牌abandon,失败提示精灵loserSprite*/\n\t\t\tfor(var i=0;i < g_players.length;i++){\n\t\t\t\tvar player_com = g_players[i].getComponent(\"tdk_player\");\n\t\t\t\tplayer_com.init_cards(g_fapaiNum);\n\t\t\t\tplayer_com.is_power = 2;\n\t\t\t\tplayer_com.check_card = false;\n\t\t\t\tplayer_com.abandon = false;\n\t\t\t\tplayer_com.hide_status_sprite();\n\t\t\t}\n\t\t\t//玩家收牌状态更新\n\t\t\tfor(var i=0;i < g_players.length;i++){\n\t\t\t\tvar player = g_players[i];\n\t\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\t\t\tthis.actionBottomBet(player.getPosition());\n\t\t\t\tplayer_com.resetMoneyLabel(player_com.my_gold - this.bet);\n\t\t\t\tif(player_com.position_server == this.currentGetPowerPlayerPosition){\n\t\t\t\t\tplayer_com.setSpriteStatus(\"shou\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tonFapaiNext_function(data){\n\t\tcc.log(\"onFapaiNext\" + JSON.stringify(data));\n\t\t\n\t\t//暂停当前玩家定时器,并初始化玩家按钮定时器\n\t\tfor(var i=0;i < g_players.length;i++){\n\t\t\tvar player_com = g_players[i].getComponent(\"tdk_player\");\n\t\t\tif(player_com.position_server == this.currentGetPowerPlayerPosition){\n\t\t\t\tplayer_com.stop_timer();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t//当前玩家的标记\n\t\tthis.currentGetPowerPlayerPosition = data[\"first\"];\n\t\tthis.bet = data[\"chip\"];\n\t\tthis.sumBet = data[\"all_chip\"];\n\t\t/*新增玩家手中的牌（背面）*/\n\t\tfor(var i=0;i<g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\t\tif(player_com.position_server == data[\"location\"]){\n\t\t\t\tthis.startDealCardPosition1 = player_com.position_server;\n\t\t\t\tthis.startDealCardPosition = player_com.position_server;\n\t\t\t\t//玩家下注动作\n\t\t\t\tplayer_com.resetMoneyLabel(parseInt(data[\"my_gold\"]));\n\t\t\t\tif(player_com.my_cards.length >= 4){\n\t\t\t\t\tthis.biPaiMenuItemFlag = true;\n\t\t\t\t}\n\t\t\t\tthis.actionBottomBet(player.getPosition());\n\t\t\t\tcc.log(\"add player card: startFaPaiPosition_t:\" + this.startDealCardPosition1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\t//开始收牌\n\t\tvar suit=data[\"tailpai\"][\"s\"];\n\t\tvar rank=data[\"tailpai\"][\"p\"];\n\t\tvar card = new Array();\n\t\tcard.push(suit);\n\t\tcard.push(rank);\n\t\tif(g_myselfPlayerPos == data[\"location\"]){\n\t\t\tthis.myselfCards.push(card);\n\t\t}\n\t\t\n\t\t//执行发牌动作给接受牌的玩家\n\t\tvar size = cc.director.getVisibleSize();\n\t\tvar acMoveDown = cc.moveTo(0.5,this.node.convertToNodeSpaceAR(cc.p(size.width/2,size.height)));\n\t\tvar callFuncActionFaPaiNext=cc.callFunc(this.actionFaPaiNext,this,card);\n\t\tg_dealCardBack.runAction(cc.sequence(new cc.EaseOut(acMoveDown,20),callFuncActionFaPaiNext));\n\t},\n\tonFapaiContinue_function(data){\n\t\tconsole.log(\"onFapaiContinue\" + JSON.stringify(data));\n\t\t//跟牌玩家不可以加注\n\t\tthis.bet = data[\"chip\"];\n\t\tthis.sumBet = data[\"all_chip\"];\n\t\t//暂停当前玩家定时器,并初始化玩家按钮定时器\n\t\tfor(var i=0;i < g_players.length;i++){\n\t\t\tvar player_com = g_players[i].getComponent(\"tdk_player\");\n\t\t\tif(player_com.position_server == this.currentGetPowerPlayerPosition){\n\t\t\t\tplayer_com.stop_timer();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t//当前玩家的标记\n\t\tthis.currentGetPowerPlayerPosition = data[\"first\"];\n\t\t/*新增玩家手中的牌（背面）*/\n\t\tfor(var i=0;i<g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\t\tif(player_com.position_server == data[\"location\"]){\n\t\t\t\tthis.startDealCardPosition1 = player_com.position_server;\n\t\t\t\tthis.startDealCardPosition = player_com.position_server;\n\t\t\t\t//玩家下注动作\n\t\t\t\tplayer_com.resetMoneyLabel(parseInt(data[\"my_gold\"]));\n\t\t\t\tthis.actionBottomBet(player.getPosition());\n\t\t\t\tcc.log(\"add player card: startFaPaiPosition_t:\" + this.startDealCardPosition1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\t//开始收牌\n\t\tvar suit=data[\"tailpai\"][\"s\"];\n\t\tvar rank=data[\"tailpai\"][\"p\"];\n\t\tvar card = new Array();\n\t\tcard.push(suit);\n\t\tcard.push(rank);\n\t\tif(g_myselfPlayerPos == data[\"location\"]){\n\t\t\tthis.myselfCards.push(card);\n\t\t}\n\t\t\n\t\t//执行发牌动作给接受牌的玩家\n\t\tvar size = cc.director.getVisibleSize();\n\t\tvar acMoveDown = cc.moveTo(0.5,this.node.convertToNodeSpaceAR(cc.p(size.width/2,size.height)));\n\t\tvar callFuncActionFaPaiContinue = cc.callFunc(this.actionFaPaiContinue,this,card);\n\t\tg_dealCardBack.runAction(cc.sequence(new cc.EaseOut(acMoveDown,20),callFuncActionFaPaiContinue));\n\t},\n\tonShoupai_function(data){\n\t\tcc.log(\"onShoupai:\" + JSON.stringify(data));\n\n\t\t//初始化myselfCards数组\n\t\tthis.myselfCards.splice(0,this.myselfCards.length);\n\t\tvar tailPai = data[\"tailpai\"];\n\t\tvar cardType = data[\"paixing\"];\n\t\tthis.currentGetPowerPlayerPosition = data[\"first\"];\n\t\tfor(i = 1;i < g_fapaiNum + 1;i++){\n\t\t\tvar suit=cardType[\"s\" + i];\n\t\t\tvar rank=cardType[\"p\" + i];\n\t\t\tvar card = new Array();\n\t\t\tcard.push(suit);\n\t\t\tcard.push(rank);\n\t\t\tthis.myselfCards.push(card);\n\t\t}\n\n\t\t//初始化玩家自己的正面牌并放好位置\n\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\t\tif(player_com.position_server == g_myselfPlayerPos){\n\t\t\t\tfor(var j = 0; j < g_fapaiNum;j++){\n\t\t\t\t\tvar card = this.myselfCards[j];\n\t\t\t\t\tplayer_com.set_card_sprite(j,parseInt(card[0]),parseInt(card[1]));\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\t\tfor(var j = 0;j < tailPai.length;j++){\n\t\t\t\tvar card = tailPai[j];\n\t\t\t\tif(card[\"location\"] == player_com.position_server && player_com.position_server != g_myselfPlayerPos){\n\t\t\t\t\tconsole.log(\"start open the other tail card .......\" + JSON.stringify(card));\n\t\t\t\t\tplayer_com.set_card_sprite(g_fapaiNum - 1,parseInt(card[\"s\"]),parseInt(card[\"p\"]));\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.myselfCardsReach=true;\n\t\t//给玩家发牌动作，由于服务器还没有给开始发牌位置信息，目前默认为从客户端位置最小的开始发牌\n\t\tvar size = cc.director.getVisibleSize();\n\t\tvar acMoveDown = cc.moveTo(0.5,this.node.convertToNodeSpaceAR(cc.p(size.width/2,size.height)));\n\t\tcc.log(\"startFaPaiPosition:\" + this.currentGetPowerPlayerPosition);\n\t\tvar callFuncActionDealCard = cc.callFunc(this.actionFaPai,this);\n\t\tg_dealCardBack.runAction(cc.sequence(new cc.EaseOut(acMoveDown,20),callFuncActionDealCard));\n\t},\n\tonOpen_function(data){\n\t\tcc.log(\"onOpen:\" + JSON.stringify(data));\n\t\tvar all_players = g_players.concat(g_players_noPower);\n\t\tvar playerName = data[\"user\"];\n\t\tfor(var i = 0;i < all_players.length;i++){\n\t\t\tvar player_com = all_players[i].getComponent(\"tdk_player\");\n\t\t\tif(player_com.id == playerName){\n\t\t\t\tplayer_com.check_card = true;\n\t\t\t\tif(player_com.position_server == g_myselfPlayerPos){\n\t\t\t\t\t//如果是自己则执行翻牌动作\n\t\t\t\t\tfor(var j = 0;j < g_fapaiNum - 1;j++){\n\t\t\t\t\t\tvar backCardSeq = cc.sequence(cc.delayTime(0.45),cc.hide());\n\t\t\t\t\t\tvar backCamera = cc.rotateBy(0.45,0,-90);\n\t\t\t\t\t\tvar backSpawn = cc.spawn(backCardSeq,backCamera);\n\t\t\t\t\t\tvar frontSeq = cc.sequence(cc.delayTime(0.45),cc.show());\n\t\t\t\t\t\tvar frontCamera = cc.rotateBy(0.6,0,-360);\n\t\t\t\t\t\tvar frontSpawn = cc.spawn(frontSeq,frontCamera);\n\t\t\t\t\t\tvar card = player_com.my_cards[j].getComponent(\"zjh_card\");\n\t\t\t\t\t\tcard.sprite_back.node.runAction(backSpawn);\n\t\t\t\t\t\tcard.sprite.runAction(frontSpawn);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//重置定时器\n\t\t\t\tif(player_com.position_server == this.currentGetPowerPlayerPosition){\n\t\t\t\t\tplayer_com.stop_timer();\n\t\t\t\t\tplayer_com.start_timer();\n\t\t\t\t}\n\t\t\t\tplayer_com.setSpriteStatus(\"kan\");\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t},\n\tonThrow_function(data){\n\t\tcc.log(\"onThrow:\" + JSON.stringify(data));\n\t\tvar all_players = g_players.concat(g_players_noPower);\n\t\tvar playerName = data[\"user\"];\n\t\tfor(var i = 0;i < all_players.length;i++){\n\t\t\tvar player = all_players[i];\n\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\t\tif(player_com.id == playerName){\n\t\t\t\tplayer_com.abandon = true;\n\t\t\t\tif(player_com.position_server == g_myselfPlayerPos){\n\t\t\t\t\tthis.initButtonEnableAfterThrow();\n\t\t\t\t}\n\t\t\t\tplayer_com.setSpriteStatus(\"qi\");\n\t\t\t\t//将玩家移到player_noPower数组\n\t\t\t\tg_players_noPower.push(player);\n\t\t\t\tg_players.splice(i,1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t},\n\tonFollow_function(data){\n\t\tcc.log(\"onFollow:\" + JSON.stringify(data));\n\t\tvar m_playerId = data[\"user\"];\n\t\tthis.sumBet = data[\"all_chip\"];\n\t\tvar all_players = g_players.concat(g_players_noPower);\n\t\tfor(var i=0;i < all_players.length;i++){\n\t\t\tvar player = all_players[i];\n\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\t\tif(player_com.id == m_playerId){\n\t\t\t\tplayer_com.resetMoneyLabel(parseInt(data[\"my_gold\"]));\n\t\t\t\tthis.actionFollowBet(player.getPosition(),player_com.check_card);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t},\n\tonAddChip_function(data){\n\t\tconsole.log(\"onAddChip:\" + JSON.stringify(data));\n\t\tvar m_playerId = data[\"user\"];\n\t\tthis.bet = data[\"current_chip\"];\n\t\tthis.sumBet = data[\"all_chip\"];\n\t\tvar all_players = g_players.concat(g_players_noPower);\n\t\tfor(var i=0;i < all_players.length;i++){\n\t\t\tvar player = all_players[i];\n\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\t\tif(player_com.id == m_playerId){\n\t\t\t\tplayer_com.resetMoneyLabel(parseInt(data[\"my_gold\"]));\n\t\t\t\tthis.actionFollowBet(player.getPosition(),player_com.check_card);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t},\n\tonLeave_function(data){\n\t\tcc.log(\"onLeave:\" + JSON.stringify(data));\n\t\tvar playerName = data[\"user\"];\n\t\tvar isFind = false;\n\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\t\tif(player_com.id == playerName){\n\t\t\t\tcc.log(\"quit from zjh room g_players\");\n\t\t\t\tplayer_com.remove_cards();\n\t\t\t\tplayer.active = false;\n\t\t\t\tg_players.splice(i,1);\n\t\t\t\tisFind = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif(isFind==false){\n\t\t\tfor(var i = 0;i < g_players_noPower.length;i++){\n\t\t\t\tvar player = g_players_noPower[i];\n\t\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\t\t\tif(player_com.id == playerName){\n\t\t\t\t\tcc.log(\"quit from zjh room g_players_noPower\");\n\t\t\t\t\tplayer_com.remove_cards();\n\t\t\t\t\tplayer.active = false;\n\t\t\t\t\tg_players_noPower.splice(i,1);\n\t\t\t\t\tisFind = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.playerNum--;\n\t},\n\tonChangePlayer_function(data){\n\t\tcc.log(\"onChangePlayer:\" + JSON.stringify(data));\n\t\tvar rotationPlayerPositionServer = data[\"location\"];\n\t\t//暂停当前玩家定时器,并初始化玩家按钮定时器\n\t\tvar tmp_allplayers = g_players_noPower.concat(g_players);\n\t\tfor(var i=0;i < tmp_allplayers.length;i++){\n\t\t\tvar player_com = tmp_allplayers[i].getComponent(\"tdk_player\");\n\t\t\tif(player_com.position_server == this.currentGetPowerPlayerPosition){\n\t\t\t\tplayer_com.stop_timer();\n\t\t\t\tif(this.currentGetPowerPlayerPosition == g_myselfPlayerPos){\n\t\t\t\t\tthis.bipai_button.getComponent(cc.Button).interactable = false;\n\t\t\t\t\tthis.genzhu_button.getComponent(cc.Button).interactable = false;\n\t\t\t\t\tthis.jiazhu_button.getComponent(cc.Button).interactable = false;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t//开启轮换到的玩家\n\t\tif(g_players.length >= 2) {\n\t\t\tthis.currentGetPowerPlayerPosition = rotationPlayerPositionServer;\n\t\t\tfor (var i = 0; i < g_players.length; i++) {\n\t\t\t\tvar player_com = g_players[i].getComponent(\"tdk_player\");\n\t\t\t\tif (player_com.position_server == rotationPlayerPositionServer) {\n\t\t\t\t\tplayer_com.start_timer();\n\t\t\t\t\tif (rotationPlayerPositionServer == g_myselfPlayerPos) {\n\t\t\t\t\t\tthis.bipai_button.getComponent(cc.Button).interactable = true;\n\t\t\t\t\t\tthis.genzhu_button.getComponent(cc.Button).interactable = true;\n\t\t\t\t\t\tthis.jiazhu_button.getComponent(cc.Button).interactable = true;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tonBipai_function(data){\n\t\tconsole.log(\"onBipai:\" + JSON.stringify(data));\n\t\tvar winnerPositionServer=data[\"winner\"];\n\t\tvar playerPositionServer = data[\"location\"];\n\t\tvar allScore = data[\"score\"];\n\t\tthis.sumBet = data[\"all_chip\"];\n\t\tconsole.log(\"winnerPositionServer:\"+winnerPositionServer);\n\t\tthis.initButtonEnableAfterThrow();\n\t\t//置房间状态为比牌状态并定时重置回来\n\t\tthis.comparableState = true;\n\t\t//停止当前定时器进度条\n\t\tvar tmp_allplayers = g_players_noPower.concat(g_players);\n\t\tfor(var i = 0;i < tmp_allplayers.length;i++){\n\t\t\tvar player_com = tmp_allplayers[i].getComponent(\"tdk_player\");\n\t\t\tif(player_com.position_server == this.currentGetPowerPlayerPosition){\n\t\t\t\tplayer_com.stop_timer();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t//发起比牌的玩家执行跟注动作\n\t\tconsole.log(\"start 发起比牌的玩家执行跟注动作\" + tmp_allplayers.length);\n\t\tfor(var i = 0;i < tmp_allplayers.length;i++){\n\t\t\tvar player = tmp_allplayers[i];\n\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\t\tif(player_com.position_server == playerPositionServer){\n\t\t\t\tplayer_com.setSpriteStatus(\"bipai\");\n\t\t\t\tplayer_com.resetMoneyLabel(player_com.my_gold - this.bet);\n\t\t\t\tthis.actionBottomBet(player.getPosition());\n\t\t\t}\n\t\t\tplayer_com.my_scole = allScore[player_com.position_server - 1][1];\n\t\t\tplayer_com.statusTag = \"loser\";\n\t\t\tif(player_com.position_server == winnerPositionServer){\n\t\t\t\tplayer_com.statusTag = \"winner\";\n\t\t\t}\n\t\t}\n\t},\n\tonEqual_function(data){\n\t\tconsole.log(\"onEqual:\" + JSON.stringify(data));\n\t\tvar winnerPositionServer=data[\"winner\"];\n\t\tvar playerPositionServer = data[\"location\"];\n\t\tvar allScore = data[\"score\"];\n\t\tthis.sumBet = data[\"all_chip\"];\n\t\tconsole.log(\"winnerPositionServer:\"+winnerPositionServer);\n\t\tthis.initButtonEnableAfterThrow();\n\t\t//置房间状态为比牌状态并定时重置回来\n\t\tthis.comparableState = true;\n\n\t\t//停止当前定时器进度条\n\t\tvar tmp_allplayers = g_players_noPower.concat(g_players);\n\t\tfor(var i = 0;i < tmp_allplayers.length;i++){\n\t\t\tvar player_com = tmp_allplayers[i].getComponent(\"tdk_player\");\n\t\t\tif(player_com.position_server == this.currentGetPowerPlayerPosition){\n\t\t\t\tplayer_com.stop_timer();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t//发起比牌的玩家执行跟注动作\n\t\tconsole.log(\"start 发起比牌的玩家执行跟注动作\" + tmp_allplayers.length);\n\t\tfor(var i = 0;i < tmp_allplayers.length;i++){\n\t\t\tvar player = tmp_allplayers[i];\n\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\t\tif(player_com.position_server == playerPositionServer){\n\t\t\t\tplayer_com.setSpriteStatus(\"bipai\");\n\t\t\t\tplayer_com.resetMoneyLabel(player_com.my_gold - this.bet);\n\t\t\t\tthis.actionBottomBet(player.getPosition());\n\t\t\t}\n\t\t\tplayer_com.my_scole = allScore[player_com.position_server - 1][1];\n\t\t\tplayer_com.statusTag = \"loser\";\n\t\t\tif(player_com.position_server == winnerPositionServer){\n\t\t\t\tplayer_com.statusTag = \"winner\";\n\t\t\t}\n\t\t}\n\t},\n\tonEqualPai_function(data){\n\t\tconsole.log(\"onEqualPai:\" + JSON.stringify(data));\n\t\tthis.equalFlag = true;\n\t\tthis.fapai_count = 0;\n\t\tvar size=cc.director.getWinSize();\n\t\tvar winnerPositionServer = data[\"winner\"];\n\t\tvar paiXing = data[\"pai_xing\"];\n\t\tthis.myselfCards.splice(0,this.myselfCards.length);\n\t\tfor(var j = 0;j < winnerPositionServer.length;j++){\n\t\t\tvar card = new Array();\n\t\t\tcard.push(parseInt(paiXing[j][\"s\"]));\n\t\t\tcard.push(parseInt(paiXing[j][\"p\"]));\n\t\t\tthis.myselfCards.push(card);\n\t\t}\n\t\tconsole.log(\"this.myselfCards\" + JSON.stringify(this.myselfCards));\n\t\tthis.roomState = 0;\n\t\tthis.initButtonEnableAfterComeInRoom();\n\t\tvar acMoveDown = cc.moveTo(0.5,this.node.convertToNodeSpaceAR(cc.p(size.width/2,size.height)));\n\t\tvar callFuncActionEqual = cc.callFunc(this.actionFaPaiEqual,this,winnerPositionServer);\n\t\tg_dealCardBack.runAction(cc.sequence(new cc.EaseOut(acMoveDown,20),callFuncActionEqual));\n\t},\n\tonEnd_function(data){\n\t\tcc.log(\"onEnd:\" + JSON.stringify(data));\n\t\tvar all_players = g_players.concat(g_players_noPower);\n\t\tvar playerPositionServer = data[\"winner\"];\n\t\tthis.sumBet = data[\"all_chip\"];\n\t\tfor(var i = 0;i < all_players.length;i++){\n\t\t\tvar player = all_players[i];\n\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\t\tif(player_com.position_server == playerPositionServer){\n\t\t\t\tthis.actionWinnerGetBet(this,player.getPosition());\n\t\t\t\tplayer_com.resetMoneyLabel(player_com.my_gold + parseInt(data[\"all_chip\"]));\n\t\t\t\tplayer_com.statusTag = \"winner\";\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t/* 结束则把玩家放入noPower中*/\n\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\tg_players_noPower.push(g_players[i]);\n\t\t}\n\t\tg_players.splice(0,g_players.length);\n\t},\n\tonEndPai_function(data){\n\t\tcc.log(\"onEndPai:\"+JSON.stringify(data));\n\t\t//获胜者的牌型\n\t\tvar winnerCardType = data[\"winner_pai\"];\n\t\tvar tmp_allplayers = g_players_noPower.concat(g_players);\n\t\t//位置1的牌型\n\t\tfor(i = 1; i < 6; i++){\n\t\t\tvar cardString = data[\"location\" + i];\n\t\t\tif(cardString != null&& cardString !=\"null\" && g_myselfPlayerPos != i){\n\t\t\t\tconsole.log(\"location:num:\" + i);\n\t\t\t\tcardString = JSON.parse(cardString);\n\t\t\t\tvar tmp_allplayers = g_players_noPower.concat(g_players);\n\t\t\t\tfor(var j=0;j<tmp_allplayers.length;j++){\n\t\t\t\t\tvar player = tmp_allplayers[j];\n\t\t\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\t\t\t\tif(player_com.position_server == g_myselfPlayerPos){\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif(player_com.position_server == i){\n\t\t\t\t\t\tfor(var m = 0;m < g_fapaiNum - 1;m++){\n\t\t\t\t\t\t\tvar suit=cardString[\"s\" + (m + 1)];\n\t\t\t\t\t\t\tvar rank=cardString[\"p\" + (m + 1)];\n\t\t\t\t\t\t\tvar position = this.calc_player_card_position(player,m);\n\t\t\t\t\t\t\tplayer_com.set_card_sprite(m,parseInt(suit),parseInt(rank));\n\t\t\t\t\t\t\tconsole.log(\"set card sprite success\" + i + \" cid:\" + m);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.openAllCard();\n\t},\n\tonUserBroadcast_function(data){\n\t\tconsole.log(\"onUserBroadcast:\"+JSON.stringify(data));\n\t\tvar msage_scroll_com = this.msage_scroll.getComponent(\"msage_scroll\");\n\t\tmsage_scroll_com.set_string(data);\n\t},\n\tonNoRound_function(data){\n\t\tconsole.log(\"onNoRound:\"+JSON.stringify(data));\n\t\tvar size = cc.director.getVisibleSize();\n\t\tvar golds_info = data[\"golds\"];\n\t\tvar tplayers = new Array();\n\t\tfor(var key in golds_info){\n\t\t\ttplayers.push(golds_info[key]);\n\t\t}\n\t\tvar pop_game_finish = cc.instantiate(g_assets[\"pop_game_finish\"]);\n\t\tvar pop_game_finish_com = pop_game_finish.getComponent(\"pop_game_finish\");\n\t\tpop_game_finish_com.init_info(tplayers);\n\t\tvar x = size.width/2;\n\t\tvar y = size.height/2;\n\t\tthis.node.addChild(pop_game_finish);\n\t\tpop_game_finish.setPosition(this.node.convertToNodeSpaceAR(cc.p(x,y)));\n\t},\n\tonGetUinfo_function(data){\n\t\tconsole.log(\"onNoRound:\"+JSON.stringify(data));\n\t\tvar size = cc.director.getWinSize();\n\t\t//显示玩家信息\n\t\tif(data[\"send_from\"] == g_myselfPlayerPos){\n\t\t\tthis.uinfo = cc.instantiate(g_assets[\"pop_game_user\"]);\n\t\t\tvar uinfo_com = this.uinfo.getComponent(\"pop_game_user\");\n\t\t\t\n\t\t\tuinfo_com.init_info(data,this.actionSendGift);\n\t\t\tthis.node.addChild(this.uinfo);\n\t\t\tthis.uinfo.setPosition(this.node.convertToNodeSpaceAR(cc.p(size.width/2,size.height/2)));\n\t\t}\n\t},\n\tactionSendGift(pnode,type,send_from,send_to){\n\t\tcc.log(\"actionSendGift\",type,send_from,send_to);\n\t\tvar s_player = null;\n\t\tvar e_player = null;\n\t\tvar all_players = g_players.concat(g_players_noPower);\n\t\tif(send_from == send_to){\n\t\t\treturn false;\n\t\t}\n\t\tfor(var i = 0;i < all_players.length;i++){\n\t\t\tvar player_com = all_players[i].getComponent(\"tdk_player\");\n\t\t\tif(player_com.position_server == send_from){\n\t\t\t\ts_player = all_players[i];\n\t\t\t}\n\t\t\tif(player_com.position_server == send_to){\n\t\t\t\te_player = all_players[i];\n\t\t\t}\n\t\t}\n\t\tvar active = null;\n\t\tvar active_name = null;\n\t\t//送鸡蛋\n\t\tif(type == 1){\n\t\t\tactive = cc.instantiate(g_assets[\"shoe_active\"]);\n\t\t\tactive_name = \"shoe_active\";\n\t\t}else if(type == 2){\n\t\t\tactive = cc.instantiate(g_assets[\"egg_active\"]);\n\t\t\tactive_name = \"egg_active\";\n\t\t}else if(type == 3){\n\t\t\tactive = cc.instantiate(g_assets[\"bomb_active\"]);\n\t\t\tactive_name = \"bomb_active\";\n\t\t}else if(type == 4){\n\t\t\tactive = cc.instantiate(g_assets[\"kiss_active\"]);\n\t\t\tactive_name = \"kiss_active\";\n\t\t}else if(type == 5){\n\t\t\tactive = cc.instantiate(g_assets[\"flower_active\"]);\n\t\t\tactive_name = \"flower_active\";\n\t\t}else if(type == 6){\n\t\t\tactive = cc.instantiate(g_assets[\"cheers_active\"]);\n\t\t\tactive_name = \"cheers_active\";\n\t\t}\n\t\tpnode.addChild(active);\n\t\tactive.setPosition(s_player.getPosition());\n\t\t\n\t\tvar move = cc.moveTo(0.5,e_player.getPosition());\n\t\tvar rotation = cc.rotateBy(0.5,360);\n\t\tvar spawn = cc.spawn(move,rotation);\n\t\tvar self = this;\n\t\tvar sendAction = cc.callFunc(function(){\n\t\t\tvar anim = active.getComponent(cc.Animation);\n\t\t\tanim.on('finished',  function(){\n\t\t\t\tactive.destroy();\n\t\t\t},null);\n\t\t\tvar animStatus = anim.play(active_name);\n\t\t\t// 设置循环模式为 Normal\n\t\t\tanimStatus.wrapMode = cc.WrapMode.Normal;\n\t\t\t// 设置循环模式为 Loop\n\t\t\tanimStatus.wrapMode = cc.WrapMode.Loop;\n\t\t\t// 设置动画循环次数为2次\n\t\t\tanimStatus.repeatCount = 1;\n\t\t});\n\t\tactive.runAction(cc.sequence(spawn,sendAction));\n\t},\n\t\n\t\n\tactionFaPai(){\n    \tvar size=cc.director.getVisibleSize();\n    \tvar isFind=false;\n    \tvar playerArrayPosition=-1;\n    \tcc.log(\"start into actionDealCards........startDealCardPosition1:\" + this.startDealCardPosition1);\n\t\tcc.log(\"start into actionDealCards........startDealCardPosition:\" + this.startDealCardPosition);\n    \tif(this.startDealCardPosition1==this.startDealCardPosition){this.fapai_count++}\n    \tif(this.fapai_count > 3){\n\t\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\t\tvar player = g_players[i];\n\t\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\t\t\tif(player_com.position_server == g_myselfPlayerPos){\n\t\t\t\t\tthis.setPlayerCardsPosition(player,g_fapaiNum);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\t\tvar player = g_players[i];\n\t\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\t\t\tvar backCardSeq = cc.sequence(cc.delayTime(0.45),cc.hide());\n\t\t\t\tvar backCamera = cc.rotateBy(0.45,0,-90);\n\t\t\t\tvar backSpawn = cc.spawn(backCardSeq,backCamera);\n\t\t\t\tvar frontSeq = cc.sequence(cc.delayTime(0.45),cc.show());\n\t\t\t\tvar frontCamera = cc.rotateBy(0.6,0,-360);\n\t\t\t\tvar frontSpawn = cc.spawn(frontSeq,frontCamera);\n\t\t\t\tvar card = player_com.get_last_card().getComponent(\"zjh_card\");\n\t\t\t\tcard.sprite_back.node.runAction(backSpawn);\n\t\t\t\tcard.sprite.runAction(frontSpawn);\n\t\t\t}\n    \t\tthis.startDealCardPosition1 = this.startDealCardPosition;\n    \t\tvar acMoveUp = cc.moveBy(0.5,cc.p(0,g_dealCardBack.getContentSize().height/2));\n    \t\tvar acMoveUp1 = new cc.EaseIn(acMoveUp,10);\n    \t\tvar acInitMenuItemCallback = cc.callFunc(this.initButtonEnableAfterFapai,this);\n    \t\tg_dealCardBack.runAction(cc.sequence(acMoveUp1, acInitMenuItemCallback));\n    \t\treturn;\n    \t}\n    \tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player_com = g_players[i].getComponent(\"tdk_player\");\n    \t\tif(player_com.position_server == this.startDealCardPosition1){\n    \t\t\tplayerArrayPosition = i;\n    \t\t\tisFind=true;\n    \t\t\tbreak;\n    \t\t}\n    \t}\n\t\tif(isFind == true){\n\t\t\tif(playerArrayPosition == -1){\n\t\t\t\tcc.log(\"outside error.......................actionDealCards:function()\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.startDealCardPosition1++;\n\t\t\tthis.startDealCardPosition1 = this.startDealCardPosition1%5;\n\t\t\tif(this.startDealCardPosition1==0){\n\t\t\t\tthis.startDealCardPosition1 = 5;\n\t\t\t}\n\t\t\tvar player = g_players[playerArrayPosition];\n\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\t\tvar position = this.calc_player_card_position(player,this.fapai_count - 1);\n\t\t\tcc.log(\"position:x:\" + position.x + \" y:\" + position.y);\n\t\t\tvar acMoveDown1 = cc.moveTo(0.2,this.node.convertToNodeSpaceAR(cc.p(size.width/2,size.height/2)));\n\t\t\tvar acToCardPlayer = cc.moveTo(0.1,position);\n\t\t\tvar callFunc = cc.callFunc(this.actionFaPai,this);\n\t\t\tvar card = player_com.my_cards[this.fapai_count - 1];\n\t\t\tcard.runAction(cc.sequence(acMoveDown1,acToCardPlayer,callFunc));\n\t\t}else{\n\t\t\tthis.startDealCardPosition1++;\n\t\t\tthis.startDealCardPosition1 = this.startDealCardPosition1%5;\n\t\t\tif(this.startDealCardPosition1==0){\n\t\t\t\tthis.startDealCardPosition1 = 5;\n\t\t\t}\n\t\t\tthis.actionFaPai();\n\t\t}\n    },\n\tactionFaPaiNext(mythis,mycard){\n\t\tvar size=cc.director.getVisibleSize();\n    \tconsole.log(\"start into actionFaPaiOne........startFaPaiPosition:\" + this.startFaPaiPosition);\n\t\tconsole.log(\"start into actionFaPaiOne........card:\" + JSON.stringify(mycard));\n\t\t\n\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\t\tif(player_com.position_server == this.startDealCardPosition){\n\t\t\t\tplayer_com.addPlayerCard();\n\t\t\t\tif(player_com.position_server == g_myselfPlayerPos){\n\t\t\t\t\tthis.fapai_count = player_com.my_cards.length;\n\t\t\t\t}\n\t\t\t\tvar round_num = player_com.my_cards.length;\n\t\t\t\tvar position = this.calc_player_card_position(player,round_num - 1);\n\t\t\t\tcc.log(\"position:x:\" + position.x + \" y:\" + position.y);\n\t\t\t\tvar acMoveDown1 = cc.moveTo(0.2,this.node.convertToNodeSpaceAR(cc.p(size.width/2,size.height/2)));\n\t\t\t\tvar acToCardPlayer = cc.moveTo(0.1,position);\n\n\t\t\t\tvar card = player_com.my_cards[round_num - 1];\n\t\t\t\tcard.runAction(cc.sequence(acMoveDown1,acToCardPlayer,cc.callFunc(function(){\n\t\t\t\t\tcard.setPosition(position);\n\t\t\t\t},null)));\n\t\t\t\tplayer_com.set_card_sprite(round_num - 1,parseInt(mycard[0]),parseInt(mycard[1]));\n    \t\t\tbreak;\n    \t\t}\n    \t}\n    \tvar acMoveUp = cc.moveTo(0.5,this.node.convertToNodeSpaceAR(cc.p(size.width/2,size.height + g_dealCardBack.getContentSize().height/2)));\n\t\tvar acMoveUp1=new cc.EaseIn(acMoveUp,10);\n\t\tg_dealCardBack.runAction(acMoveUp1);\n\t\t//玩家自己的牌已经到达 掀开 最后一张牌\n\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\t\tvar backCardSeq = cc.sequence(cc.delayTime(0.45),cc.hide());\n\t\t\tvar backCamera = cc.rotateBy(0.45,0,-90);\n\t\t\tvar backSpawn = cc.spawn(backCardSeq,backCamera);\n\t\t\tvar frontSeq = cc.sequence(cc.delayTime(0.45),cc.show());\n\t\t\tvar frontCamera = cc.rotateBy(0.6,0,-360);\n\t\t\tvar frontSpawn = cc.spawn(frontSeq,frontCamera);\n\t\t\tvar tcard = player_com.get_last_card().getComponent(\"zjh_card\");\n\t\t\ttcard.sprite_back.node.runAction(backSpawn);\n\t\t\ttcard.sprite.runAction(frontSpawn);\n\t\t}\n\t\tthis.initButtonEnableAfterFapaiNext();\n\t},\n\tactionFaPaiContinue(mythis,mycard){\n\t\tvar size=cc.director.getVisibleSize();\n    \tconsole.log(\"start into actionFaPaiOne........startFaPaiPosition:\" + this.startDealCardPosition);\n\t\tconsole.log(\"start into actionFaPaiOne........card:\" + JSON.stringify(mycard));\n\t\t\n\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\t\tif(player_com.position_server == this.startDealCardPosition){\n\t\t\t\tplayer_com.addPlayerCard();\n\t\t\t\tif(player_com.position_server == g_myselfPlayerPos){\n\t\t\t\t\tthis.fapai_count = player_com.my_cards.length;\n\t\t\t\t}\n\t\t\t\tvar round_num = player_com.my_cards.length;\n\t\t\t\tvar position = this.calc_player_card_position(player,round_num - 1);\n\t\t\t\tcc.log(\"position:x:\" + position.x + \" y:\" + position.y);\n\t\t\t\tvar acMoveDown1 = cc.moveTo(0.2,this.node.convertToNodeSpaceAR(cc.p(size.width/2,size.height/2)));\n\t\t\t\tvar acToCardPlayer = cc.moveTo(0.1,position);\n\n\t\t\t\tvar card = player_com.my_cards[round_num - 1];\n\t\t\t\tcard.runAction(cc.sequence(acMoveDown1,acToCardPlayer,cc.callFunc(function(){\n\t\t\t\t\tcard.setPosition(position);\n\t\t\t\t},null)));\n\t\t\t\t\n\t\t\t\tplayer_com.set_card_sprite(round_num - 1,parseInt(mycard[0]),parseInt(mycard[1]));\n    \t\t\tbreak;\n    \t\t}\n    \t}\n    \tvar acMoveUp = cc.moveTo(0.5,this.node.convertToNodeSpaceAR(cc.p(size.width/2,size.height + g_dealCardBack.getContentSize().height/2)));\n\t\tvar acMoveUp1=new cc.EaseIn(acMoveUp,10);\n\t\tg_dealCardBack.runAction(acMoveUp1);\n\t\tthis.initButtonEnableAfterFapaiContinue();\n\t},\n\tactionFaPaiEqual(mythis,winners){\n\t\tvar size = cc.director.getVisibleSize();\n    \tvar isFind = false;\n    \tvar playerArrayPosition=-1;\n\t\tconsole.log(\"start into actionFaPai........round_num:\" + this.fapai_count);\n  \n    \tif(this.fapai_count >= winners.length){\n    \t\tthis.fapai_count = 0;\n    \t\tvar acMoveUp=cc.moveBy(0.5,cc.p(0,g_dealCardBack.getContentSize().height/2));\n    \t\tvar acMoveUp1=new cc.EaseIn(acMoveUp,10);\n    \t\tg_dealCardBack.runAction(acMoveUp1);\n\t\t\t//翻开和牌的那张牌\n\t\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\t\tvar player = g_players[i];\n\t\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\t\t\tif(player_com.equalCard != null){\n\t\t\t\t\tvar backCardSeq = cc.sequence(cc.delayTime(0.45),cc.hide());\n\t\t\t\t\tvar backCamera = cc.rotateBy(0.45,0,-90);\n\t\t\t\t\tvar backSpawn = cc.spawn(backCardSeq,backCamera);\n\t\t\t\t\tvar frontSeq = cc.sequence(cc.delayTime(0.45),cc.show());\n\t\t\t\t\tvar frontCamera = cc.rotateBy(0.6,0,-360);\n\t\t\t\t\tvar frontSpawn = cc.spawn(frontSeq,frontCamera);\n\t\t\t\t\tvar card = player_com.equalCard.getComponent(\"zjh_card\");\n\t\t\t\t\tcard.sprite_back.runAction(backSpawn);\n\t\t\t\t\tcard.sprite.runAction(frontSpawn);\n\t\t\t\t}\n\t\t\t}\n    \t\treturn;\n    \t}\n\t\t\n\t\tvar positionServer = winners[this.fapai_count];\n\t\t\n\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\t\tif(player_com.position_server == positionServer){\n    \t\t\tplayerArrayPosition = i;\n    \t\t\tisFind = true;\n    \t\t\tbreak;\n    \t\t}\n    \t}\n    \tconsole.log(\"find startFaPaiPosition_t:\" + playerArrayPosition + isFind);\n    \tif(isFind==true){\n\t\t\tvar player = g_players[playerArrayPosition];\n\t\t\t\n    \t\t\n\t\t\tvar card = player.addEqualCard();\n\t\t\tvar card_com = card.getComponent(\"zjh_card\");\n\t\t\tcard_com.initCardSprite(this.myselfCards[this.fapai_count][0],this.myselfCards[this.fapai_count][1]);\n\t\t\tthis.fapai_count++;\n\t\t\t\n\t\t\tvar position = this.calc_player_card_position(player,3);\n    \t\tvar acMoveDown1 = cc.moveTo(0.1,cc.p(size.width/2,size.height/2));\n    \t\tvar acToCardPlayer = cc.moveTo(0.1,position);\n\n\t\t\tvar callFunc = cc.callFunc(this.actionFaPaiEqual,this);\n\t\t\tcard.runAction(cc.sequence(acMoveDown1,acToCardPlayer,callFunc));\n    \t}else{\n\t\t\tconsole.log(\"actionFaPaiEqual no found the player:\" + positionServer);\n    \t\treturn ;\n    \t}\n\t},\n\tactionBottomBet(player_position){\n       var size=cc.director.getVisibleSize();\n       var countNumber=-1;\n       for(var j=0;j < g_betArray.length;j++){\n           if(this.bet == g_betArray[j]){\n               j++;\n               countNumber = j;\n               break;\n           }\n       }\n       if(countNumber==-1){\n           cc.log(\"error........outside actionBottomBet:function\");\n           return;\n       }\n\t   var chip = cc.instantiate(g_assets[\"chip_\" + this.bet]);\n       this.node.addChild(chip);\n       this.betPhotoArray.push(chip);\n\t   chip.setPosition(player_position);\n       var x=size.width/3+size.width/3*Math.random();\n       var y=size.height/2 + 150 *Math.random();\n\t   var move_pos = this.node.convertToNodeSpaceAR(cc.p(x,y));\n       var moveBet=cc.moveTo(0.3,move_pos);\n       chip.runAction(moveBet);\n\t},\n\tactionFollowBet(player_position,isCheckCard){\n\t\tcc.log(\"go into actionFollowBet......\" + isCheckCard);\n        var size=cc.director.getWinSize();\n        var countNumber=-1;\n        for(var j=0;j<g_betArray.length;j++){\n            if(this.bet==g_betArray[j]){\n                j++;\n                countNumber=j;\n                break;\n            }\n        }\n\t\tvar chipNum = 1;\n\t\t//如果等于-1 说明没有单独的筹码符合 需要组合筹码\n        if(countNumber==-1){\n\t\t\tcc.log(\"error........outside actionFollowBet:function\");\n\t\t\treturn;\n        }\n        \n        while(chipNum > 0){\n\t\t\tvar chip = cc.instantiate(g_assets[\"chip_\" + this.bet]);\n\t\t\tthis.node.addChild(chip);\n\t\t\tthis.betPhotoArray.push(chip);\n\t\t\tchip.setPosition(player_position);\n\t\t\tvar x=size.width/3+size.width/3*Math.random();\n\t\t\tvar y=size.height/2 + 150 *Math.random();\n\t\t\tvar move_pos = this.node.convertToNodeSpaceAR(cc.p(x,y));\n\t\t\tvar moveBet=cc.moveTo(0.3,move_pos);\n\t\t\tchip.runAction(moveBet);\n            chipNum--;\n        }\n    },\n\topenAllCard(){\n\t\tvar size = cc.director.getVisibleSize();\n        //打开自己的牌\n\t\tvar tmp_allplayers = g_players_noPower.concat(g_players);\n\t\tfor(var i=0;i<tmp_allplayers.length;i++){\n\t\t\tvar player = tmp_allplayers[i];\n\t\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\t\tfor(var j=0;j < player_com.my_cards.length;j++){\n\t\t\t\tvar card = player_com.my_cards[j].getComponent(\"zjh_card\");\n\t\t\t\tcard.sprite_back.node.runAction(cc.hide());\n\t\t\t\tcard.sprite.runAction(cc.hide());\n\t\t\t}\n        }\n\t\tvar delayCompare=new cc.DelayTime(2.0);\n\t\tthis.bipaiFinish = cc.instantiate(g_assets[\"pop_tdk_finish\"]);\n\t\tvar finish_com = this.bipaiFinish.getComponent(\"pop_tdk_finish\");\n\t\tfinish_com.init_info(tmp_allplayers);\n\t\tthis.node.addChild(this.bipaiFinish,10);\n\t\tthis.bipaiFinish.setPosition(this.node.convertToNodeSpaceAR(cc.p(size.width/2,size.height/2)));\n\t\tif(this.equalFlag == true){\n\t\t\tthis.equalFlag = false;\n\t\t\tthis.bipaiFinish.runAction(cc.sequence(cc.show(),delayCompare,cc.callFunc(this.removeBiPaiFinish,this)));\n\t\t}\n    },\n\tcalc_player_card_position:function(player,m){\n\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\tvar x = 0;\n\t\tvar y = 0;\n\t\tif(player_com.player_position == 1){\n\t\t\tx = player.getPositionX() + player_com.mobile_sprite.node.getContentSize().width + g_dealCardBack.getContentSize().width/2*(m);\n\t\t\ty = player.getPositionY();\n\t\t}else if(player_com.player_position == 2){\n\t\t\tx = player.getPositionX() - (5-m)*30;\n\t\t\ty = player.getPositionY() + player_com.mobile_sprite.node.height + 30;\n\t\t}else if(player_com.player_position == 3){\n\t\t\tx = player.getPositionX() - (5-m)*30;\n\t\t\ty = player.getPositionY() - player_com.mobile_sprite.node.height - 30;\n\t\t}else if(player_com.player_position == 4){\n\t\t\tx = player.getPositionX() + m*30;\n\t\t\ty = player.getPositionY() - player_com.mobile_sprite.node.height - 30;\n\t\t}else if(player_com.player_position == 5){\n\t\t\tx = player.getPositionX() + m*30;\n\t\t\ty = player.getPositionY() + player_com.mobile_sprite.node.height + 30;\n\t\t}\n\t\tcc.log(\"calc x:\" + x + \" y:\" + y);\n\t\treturn cc.p(x,y);\n\t},\n\tsetPlayerCardsPosition:function(player,card_len){\n\t\tvar player_com = player.getComponent(\"tdk_player\");\n\t\tfor(var m = 0;m < card_len;m++){\n\t\t\tvar position = this.calc_player_card_position(player,m);\n\t\t\tvar card = player_com.my_cards[m];\n\t\t\tcard.setPosition(position);\n\t\t}\n\t},\n\tactionWinnerGetBet(my_this,playerPosition){\n        for(var j in this.betPhotoArray){\n            var getBetAction =  cc.moveTo(1.0, playerPosition);\n            this.betPhotoArray[j].runAction(cc.sequence(getBetAction,cc.hide()));\n        }\n\t\t//初始化房间状态为非游戏状态\n        this.roomState=0;\n        //置按钮为不可点击\n\t\tthis.initButtonEnableAfterComeInRoom();\n\n        //关闭定时器\n        var tmp_allplayers = g_players_noPower.concat(g_players);\n        for(var i=0;i < tmp_allplayers.length;i++){\n\t\t\tvar player_com = tmp_allplayers[i].getComponent(\"tdk_player\");\n            if(player_com.position_server == this.currentGetPowerPlayerPosition){\n            \tplayer_com.stop_timer();\n                break;\n            }\n        }\n    },\n\tbiPaiSelectCallBack(index){\n\t\tpomelo.request(util.getGameRoute(), {\n\t\t\tprocess: \"bipai\",\n\t\t\tlocation1: g_myselfPlayerPos,\n\t\t\tlocation2: index + 1\n\t\t}, function (data) {\n\t\t\tcc.log(JSON.stringify(data));\n\t\t});\n\t},\n\tpomelo_removeListener(){\n\t\tcc.log(\"remove listener\");\n        pomelo.removeListener('onReady');\n\t\tpomelo.removeListener('onGetUinfo');\n        pomelo.removeListener('onFollow');\n        pomelo.removeListener('onAddChip');\n        pomelo.removeListener('onAdd');\n\t\tpomelo.removeListener('onNoRound');\n        pomelo.removeListener('onOpen');\n        pomelo.removeListener('onThrow');\n        pomelo.removeListener('onBipai');\n\t\tpomelo.removeListener('onFapaiNext');\n\t\tpomelo.removeListener('onFapaiContinue');\n\t\tpomelo.removeListener('onEqual');\n\t\tpomelo.removeListener('onEqualPai');\n        pomelo.removeListener('onLeave');\n        pomelo.removeListener('onEnd');\n        pomelo.removeListener('onFapai');\n        pomelo.removeListener('onShoupai');\n        pomelo.removeListener('onChangePlayer');\n        pomelo.removeListener('onEndPai');\n\t\tpomelo.removeListener('onActBroadcast');\n    },\n\n\tonExit(){\n        g_dealCardBack.destroy();\n        g_playerData.splice(0,g_playerData.length);\n        g_roomData.splice(0,g_roomData.length);\n\t\tg_players.splice(0,g_players.length);\n\t\tg_players_noPower.splice(0,g_players_noPower.length);\n\t\tconsole.log(\"exit from the room......\");\n        //释放资源\n        //this.releaseMember();\n\n        //注销监听接口\n        this.pomelo_removeListener();\n\t\tthis.destroy();\n    },\n\t\n});\n"]}