{"version":3,"sources":["zhq_game_room.js"],"names":["cc","Class","extends","Component","properties","bet","sumBet","count","fapai_count","roomNum","playerNum","roomState","master_name","total_count","danzhu","lastPosition","comparableState","currentGetPowerPlayerPosition","master_label","Label","room_num_label","danzhu_label","zongzhu_label","huihe_label","start_button","Node","zhunbei_button","touxiang_button","butouxiang_button","jiefeng_button","chupai_button","buchupai_button","liangA_button","players","type","default","lastPai","onLoad","g_betArray","g_roomData","g_roomMasterName","g_totalCount","startDealCardPosition1","startDealCardPosition","betPhotoArray","Array","myselfCards","init_head_info","initButtonEnableAfterComeInRoom","initPlayersAndPlayer_noPower","schedule","showRoomMessageUpdate","REPEAT_FOREVER","node","on","switchRadio","start","log","audioSource","getComponent","AudioSource","g_music_key","sys","localStorage","getItem","MUSIC_KEY","BOOL","YES","play","init_count_timer","pomelo_on","size","director","getWinSize","lmaster","string","lroom_num","ldanzhu","lzongzhu","lhuihe","position","convertToNodeSpaceAR","p","width","height","g_dealCardBack","getContentSize","setPosition","addChild","msage_scroll","instantiate","g_assets","x","y","initButtonEnableAfterDealCards","Button","interactable","initButtonEnableChuPai","g_myselfPlayerPos","JSON","stringify","g_playerData","i","length","g_user","playerId","idx","player_stc","player","player_com","init","player_position","g_players","push","active","position_server","start_timer","callback_start","pomelo","request","util","getGameRoute","process","location","data","console","msg","callback_zhunbei","callback_jiefeng","callback_touxiang","flag","callback_butouxiang","callback_chupai","playerPosition","selectCards","selected_cards","mark","card_com","rank","suit","chupai","show_error_info","callback_buchupai","callback_liangA","pref","j","card_com_1","callback_uinfo","event","id","self","send_from","send_to","callback_setting","getVisibleSize","pop_setting","pop_setting_com","set_callback","index","NO","pause","callback_gameback","onExit","loadScene","betString","sumBetString","countFlowingString","onStart_function","bind","onReady_function","onAdd_function","onNoRound_function","onGetUinfo_function","onFapai_function","onShoupai_function","onShoupaiFirst_function","onPass_function","onJieFeng_function","onChuPai_function","onChuPaiTip_function","onMarkA_function","onThrow_function","onFinish_function","onStartChuPai_function","onLeave_function","onChangePlayer_function","onUserBroadcast_function","is_power","setSpriteStatus","stop_timer","playerInfo","t_player","instruction_faPai","removeFromParent","remove_cards","abandon","hide_status_sprite","splice","cardType","card_len","card","init_cards","setPlayerCardsPosition","actionFaPai","my_cards","myselfCardsReach","paiXing","locationServer","nextPositionServer","status","playerIndexOf","destroy","addPlayerCard","calc_player_card_position","initCardSprite","moveToPos","moveToBiPaiPosition","moveTo","sprite","runAction","show","remove_select_cards","markPai","heiAs","parseInt","heiLocation","lastId","getNextEmptyCard","backCardSeq","sequence","delayTime","hide","backCamera","rotateBy","backSpawn","spawn","frontSeq","frontCamera","frontSpawn","sprite_back","set_card_sprite","resetSelectCard","playerPosServer","playerPosServers","winners","loster","loserLocal","winLocal","loserPlayer","winnerPlayer","resetMoneyLabel","my_gold","actionBottomBet","getPosition","rotationPlayerPositionServer","rotationPlayerIndexOf","playerName","tmp_allplayers","g_players_noPower","concat","statusTag","msage_scroll_com","set_string","golds_info","tplayers","key","pop_game_finish","pop_game_finish_com","init_info","uinfo","uinfo_com","actionSendGift","pnode","s_player","e_player","all_players","active_name","move","rotation","sendAction","callFunc","anim","Animation","animStatus","wrapMode","WrapMode","Normal","Loop","repeatCount","target","touch_tag","card_t","playerArrayPosition","loserPlayerPosition","winPlayerPosition","countNumber","betNum","chip","moveBet","m","getPositionX","getPositionY","mobile_sprite","message","error_tip","error_tip_com","convertToNodeSpace","pomelo_removeListener","removeListener"],"mappings":"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","file":"zhq_game_room.js","sourceRoot":"../../../../../assets/Script/game_room","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n\t\tbet:0,\n\t\tsumBet:0,\n\t\tcount:0,\n\t\tfapai_count:0,\n\t\troomNum:0,\n\t\tplayerNum:0,\n\t\troomState:0,\n\t\tmaster_name:null,\n\t\ttotal_count:0,\n\t\tdanzhu:100,\n\t\tlastPosition:-1,\n\t\tcomparableState:false,\n\t\tcurrentGetPowerPlayerPosition:0,\n\t\t//head label info\n\t\tmaster_label:cc.Label,\n\t\troom_num_label:cc.Label,\n\t\tdanzhu_label:cc.Label,\n\t\tzongzhu_label:cc.Label,\n\t\thuihe_label:cc.Label,\n\t\t//buttons for game\n\t\tstart_button:cc.Node,\n\t\tzhunbei_button:cc.Node,\n\t\ttouxiang_button:cc.Node,\n\t\tbutouxiang_button:cc.Node,\n\t\tjiefeng_button:cc.Node,\n\t\tchupai_button:cc.Node,\n\t\tbuchupai_button:cc.Node,\n\t\tliangA_button:cc.Node,\n\t\tplayers:{\n\t\t\ttype:cc.Node,\n\t\t\tdefault:[],\n\t\t},\n\t\tlastPai:{\n\t\t\ttype:cc.Node,\n\t\t\tdefault:[],\n\t\t}\n    },\n\n    onLoad () {\n\t\tthis.bet = g_betArray[0];\n        this.sumBet =0;\n\t\tthis.count = g_roomData[2];\n\t\tthis.roomNum = g_roomData[3];\n        this.playerNum = g_roomData[4];\n        this.roomState = g_roomData[5];\n\t\tthis.currentGetPowerPlayerPosition = g_roomData[6];\n\t\tthis.master_name = g_roomMasterName;\n\t\tthis.total_count = g_totalCount;\n\t\tthis.startDealCardPosition1 = 0;\n\t\tthis.startDealCardPosition = 0;\n\t\tthis.comparableState = false;\n\t\tthis.betPhotoArray = new Array();\n\t\tthis.myselfCards = new Array();\n\t\tthis.init_head_info();\n\t\tthis.initButtonEnableAfterComeInRoom();\n\t\tthis.initPlayersAndPlayer_noPower();\n\t\tthis.schedule(this.showRoomMessageUpdate,1.0/60,cc.REPEAT_FOREVER,0);\n\t\tthis.node.on(\"pressed\", this.switchRadio, this);\n\t},\n\tstart(){\n\t\tcc.log(\"go into zhq game room scene start\");\n\t\tthis.audioSource = this.node.getComponent(cc.AudioSource);\n\t\tg_music_key = cc.sys.localStorage.getItem(MUSIC_KEY);\n\t\tif(g_music_key == BOOL.YES){\n\t\t\tthis.audioSource.play();\n\t\t}\n\t\tthis.init_count_timer();\n\t\tthis.pomelo_on();\n\t},\n\tinit_head_info(){\n\t\tvar size = cc.director.getWinSize();\n\t\tvar lmaster = this.master_label.getComponent(cc.Label);\n\t\tlmaster.string = this.master_name;\n\t\t\n\t\tvar lroom_num = this.room_num_label.getComponent(cc.Label);\n\t\tlroom_num.string = this.roomNum;\n\t\t\n\t\tvar ldanzhu = this.danzhu_label.getComponent(cc.Label);\n\t\tldanzhu.string = this.bet;\n\t\t\n\t\tvar lzongzhu = this.zongzhu_label.getComponent(cc.Label);\n\t\tlzongzhu.string = this.sumBet;\n\t\t\n\t\tvar lhuihe = this.huihe_label.getComponent(cc.Label);\n\t\tlhuihe.string = this.count + \"/\" + this.total_count;\n\t\t\n\t\tvar position = this.node.convertToNodeSpaceAR(cc.p(\n\t\t\tsize.width/2,size.height + g_dealCardBack.getContentSize().height/2));\n\t\tg_dealCardBack.setPosition(position);\n\t\tthis.node.addChild(g_dealCardBack);\n\t\t\n\t\t//添加滚动字幕\n\t\tthis.msage_scroll = cc.instantiate(g_assets[\"msage_scroll\"]);\n\t\tthis.node.addChild(this.msage_scroll);\n\t\tvar x = size.width/2;\n\t\tvar y = size.height - 120;\n\t\tthis.msage_scroll.setPosition(this.node.convertToNodeSpaceAR(cc.p(x,y)));\n\t},\n\tinitButtonEnableAfterDealCards:function(){\n        this.start_button.getComponent(cc.Button).interactable = false;\n\t\tthis.zhunbei_button.getComponent(cc.Button).interactable = true;\n\t\tthis.liangA_button.getComponent(cc.Button).interactable = true;\n    },\n\tinitButtonEnableAfterComeInRoom(){\n\t\tthis.start_button.getComponent(cc.Button).interactable = true;\n\t\tthis.zhunbei_button.getComponent(cc.Button).interactable = false;\n\t\tthis.touxiang_button.getComponent(cc.Button).interactable = false;\n\t\tthis.butouxiang_button.getComponent(cc.Button).interactable = false;\n\t\tthis.jiefeng_button.getComponent(cc.Button).interactable = false;\n\t\tthis.chupai_button.getComponent(cc.Button).interactable = false;\n\t\tthis.buchupai_button.getComponent(cc.Button).interactable = false;\n\t\tthis.liangA_button.getComponent(cc.Button).interactable = false;\n    },\n\tinitButtonEnableChuPai(){\n\t\tthis.start_button.getComponent(cc.Button).interactable = false;\n\t\tthis.zhunbei_button.getComponent(cc.Button).interactable = false;\n\t\tthis.touxiang_button.getComponent(cc.Button).interactable = false;\n\t\tthis.liangA_button.getComponent(cc.Button).interactable = false;\n\t\tthis.chupai_button.getComponent(cc.Button).interactable = false;\n\t\tthis.buchupai_button.getComponent(cc.Button).interactable = false;\n\t\tif(this.currentGetPowerPlayerPosition == g_myselfPlayerPos){\n\t\t\tthis.chupai_button.getComponent(cc.Button).interactable = true;\n\t\t}\n\t},\n    initPlayersAndPlayer_noPower(){\n\t\tcc.log(\"initPlayersAndPlayer_noPower\" + JSON.stringify(g_playerData));\n\t\tfor(var i = 0;i < g_playerData.length;i++){\n\t\t\tif(g_playerData[i][0] == g_user.playerId){\n\t\t\t\tg_myselfPlayerPos = g_playerData[i][1];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tvar position = new Array();\n\t\t//寻找玩家自己，确定自己的服务器位置和客户端位置\n\t\tfor(var i = 0;i < g_playerData.length;i++){\n\t\t\tvar idx = -1;\n\t\t\tvar player_stc = g_playerData[i];\n\t\t\tif(player_stc[1] == g_myselfPlayerPos){\n\t\t\t\tidx = 0;\n\t\t\t}else if(player_stc[1] > g_myselfPlayerPos){\n\t\t\t\tvar idx = player_stc[1] - g_myselfPlayerPos;\n\t\t\t}else if(player_stc[1] < g_myselfPlayerPos){\n\t\t\t\tvar idx = this.players.length - g_myselfPlayerPos + player_stc[1];\n\t\t\t}\n\t\t\tif(idx >= 0){\n\t\t\t\tposition[idx] = player_stc;\n\t\t\t}\n\t\t}\n\t\tfor(var i = 0; i < this.players.length;i++){\n\t\t\tvar player_stc = position[i];\n\t\t\tif(player_stc == null){\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tvar player = this.players[i];\n\t\t\tvar player_com = player.getComponent(\"zhq_player\");\n\t\t\tplayer_com.init(player_stc);\n\t\t\tplayer_com.player_position = i + 1;\n\t\t\tg_players.push(player);\n\t\t\tplayer.active = true;\n\t\t}\n\t},\n    init_count_timer(){\n    \tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player_com = g_players[i].getComponent(\"zhq_player\");\n\t\t\tif(player_com.position_server == g_myselfPlayerPos){\n\t\t\t\tplayer_com.start_timer();\n    \t\t\tbreak;\n    \t\t}\n    \t}\n    },\n\n\t\n\t//按钮回调函数\n\tcallback_start(){\n\t\tthis.start_button.getComponent(cc.Button).interactable = false;\n\t\tpomelo.request(util.getGameRoute(),{\n\t\t\tprocess:\"start\",\n\t\t\tlocation:g_myselfPlayerPos\n        },function(data){\n            console.log(data.msg);\n        });\n\t},\n\tcallback_zhunbei(){\n\t\tthis.zhunbei_button.getComponent(cc.Button).interactable = false;\n\t\tpomelo.request(util.getGameRoute(),{\n\t\t\tprocess:\"ready\",\n\t\t\tlocation:g_myselfPlayerPos\n\t\t},function(data){\n\t\t\tcc.log(data.msg);\n\t\t});\n    },\n\tcallback_jiefeng() {\n\t\tthis.jiefeng_button.getComponent(cc.Button).interactable = false;\n\t\tpomelo.request(util.getGameRoute(),{\n\t\t\tprocess:\"jiefeng\",\n\t\t\tlocation:g_myselfPlayerPos\n        },function(data){\n            console.log(data.msg);\n        });\n    },\n\tcallback_touxiang(){\n\t\tpomelo.request(util.getGameRoute(),{\n\t\t\tprocess:\"throw\",\n\t\t\tflag:true,\n\t\t\tlocation:g_myselfPlayerPos\n        },function(data){\n            console.log(data.msg);\n        });\n\t\tthis.touxiang_button.getComponent(cc.Button).interactable = false;\n    },\t\n\tcallback_butouxiang(){\n\t\tpomelo.request(util.getGameRoute(),{\n\t\t\tprocess:\"throw\",\n\t\t\tflag:false,\n\t\t\tlocation:g_myselfPlayerPos\n        },function(data){\n            console.log(data.msg);\n        });\n\t\tthis.butouxiang_button.getComponent(cc.Button).interactable = false;\n    },\n\tcallback_chupai(){\n\t\tvar playerPosition = -1;\n\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"zhq_player\");\n\t\t\tif(player_com.position_server == g_myselfPlayerPos){\n\t\t\t\tplayerPosition = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tvar player = g_players[playerPosition];\n\t\tvar player_com = player.getComponent(\"zhq_player\");\n\t\tvar selectCards = player_com.selected_cards;\n\t\tif(selectCards.length > 0){\n\t\t\tthis.chupai_button.getComponent(cc.Button).interactable = false;\n\t\t\tthis.buchupai_button.getComponent(cc.Button).interactable = false;\n\t\t\tvar mark = {\"p\":[],\"s\":[]};\n\t\t\tfor(var i = 0;i < selectCards.length;i++){\n\t\t\t\tvar card_com = selectCards[i].getComponent(\"zhq_card\");\n\t\t\t\tmark[\"p\"].push(card_com.rank);\n\t\t\t\tmark[\"s\"].push(card_com.suit);\n\t\t\t}\n\t\t\tpomelo.request(util.getGameRoute(),{\n\t\t\t\tprocess:\"chupai\",\n\t\t\t\tchupai:mark,\n\t\t\t\tlocation:g_myselfPlayerPos\n\t\t\t},function(data){\n\t\t\t\tconsole.log(data.msg);\n\t\t\t});\n\t\t}else{\n\t\t\tthis.show_error_info(\"请选择要出的牌\");\n\t\t}\n\t},\n\tcallback_buchupai(){\n\t\tthis.chupai_button.getComponent(cc.Button).interactable = false;\n\t\tthis.buchupai_button.getComponent(cc.Button).interactable = false;\n\t\tpomelo.request(util.getGameRoute(),{\n\t\t\tprocess:\"pass\",\n\t\t\tlocation:g_myselfPlayerPos\n\t\t},function(data){\n\t\t\tconsole.log(data.msg);\n\t\t});\n\t},\n\tcallback_liangA(){\n\t\tvar playerPosition = -1;\n\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"zhq_player\");\n\t\t\tif(player_com.position_server == g_myselfPlayerPos){\n\t\t\t\tplayerPosition = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tvar player = g_players[playerPosition];\n\t\tvar player_com = player.getComponent(\"zhq_player\");\n\t\tvar selectCards = player_com.selected_cards;\n\t\tvar mark = {\"p\":[],\"s\":[]};\n\t\tif(selectCards.length == 1){\n\t\t\tvar card_com = selectCards[0].getComponent(\"zhq_card\");\n\t\t\tif(card_com.rank == 14 && (card_com.suit == 2 || card_com.suit == 4)){\n\t\t\t\tthis.liangA_button.getComponent(cc.Button).interactable = false;\n\t\t\t\tmark[\"p\"] = [card_com.rank];\n\t\t\t\tmark[\"s\"] = [card_com.suit];\n\t\t\t}else{\n\t\t\t\tthis.show_error_info(\"请选择一张黑A 或者3张相同大小的牌\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else if(selectCards.length == 3){\n\t\t\tvar card_com = selectCards[0].getComponent(\"zhq_card\");\n\t\t\tvar pref = card_com.rank;\n\t\t\tfor(var j = 1;j < selectCards.length;j++){\n\t\t\t\tvar card_com = selectCards[j].getComponent(\"zhq_card\");\n\t\t\t\tif(card_com.rank != pref){\n\t\t\t\t\tthis.show_error_info(\"请选择一张黑A 或者3张相同大小的牌\");\n\t\t\t\t\tpref = -1;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tmark[\"p\"].push(card_com.rank);\n\t\t\t\tmark[\"s\"].push(card_com.suit);\n\t\t\t}\n\t\t\tthis.liangA_button.getComponent(cc.Button).interactable = false;\n\t\t}else if(selectCards.length == 2){\n\t\t\tvar card_com = selectCards[0].getComponent(\"zhq_card\");\n\t\t\tvar card_com_1 = selectCards[1].getComponent(\"zhq_card\");\n\t\t\tif(card_com.rank != card_com_1.rank && card_com.rank != 14){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(card_com.suit != 2 && card_com.suit != 4){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(card_com_1.suit != 2 && card_com_1.suit != 4){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.liangA_button.getComponent(cc.Button).interactable = false;\n\t\t\tmark[\"p\"] = [card_com.rank,card_com_1.rank];\n\t\t\tmark[\"s\"] = [card_com.suit,card_com_1.suit];\n\t\t}else{\n\t\t\tthis.show_error_info(\"请选择一张黑A 或者3张相同大小的牌\");\n\t\t\treturn false;\n\t\t}\n\t\tpomelo.request(util.getGameRoute(),{\n\t\t\tprocess:\"liangA\",\n\t\t\tmark:mark,\n\t\t\tlocation:g_myselfPlayerPos\n\t\t},function(data){\n\t\t\tconsole.log(data.msg);\n\t\t});\n\t},\n\tcallback_uinfo(event,id){\n\t\tvar self = this;\n\t\tvar player = this.players[id];\n\t\tvar player_com = player.getComponent(\"zjh_player\");\n\t\tpomelo.request(util.getGameRoute(),{\n            process : 'get_uinfo',\n\t\t\tsend_from:g_myselfPlayerPos,\n\t\t\tsend_to:player_com.position_server\n        },function(data){\n            console.log(\"-----quit------\"+JSON.stringify(data));\n        })\n\t},\n\tcallback_setting(){\n\t\tvar self = this;\n\t\tvar size = cc.director.getVisibleSize();\n\t\tvar pop_setting = cc.instantiate(g_assets[\"pop_setting_scene\"]);\n\t\tvar pop_setting_com = pop_setting.getComponent(\"pop_set_scene\");\n\t\tpop_setting_com.set_callback(function(index){\n\t\t\tif(index == 0){\n\t\t\t\tif(g_music_key == BOOL.NO){\n\t\t\t\t\tself.audioSource.pause();\n\t\t\t\t}else{\n\t\t\t\t\tself.audioSource.play();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tvar x = size.width/2;\n\t\tvar y = size.height/2;\n\t\tthis.node.addChild(pop_setting);\n\t\tpop_setting.setPosition(this.node.convertToNodeSpaceAR(cc.p(x,y)));\n\t},\n\tcallback_gameback(){\n\t\tvar self = this;\n\t\tpomelo.request(util.getGameRoute(),{\n            process : 'quitRoom'\n        },function(data){\n            cc.log(\"-----quit------\"+JSON.stringify(data));\n\t\t\tself.onExit();\n            cc.director.loadScene(\"MainScene\");\n        })\n\t},\n\tshowRoomMessageUpdate(){\n\t\tvar betString = this.bet;\n\t\tthis.danzhu_label.string = betString;\n\n\t\tvar sumBetString = this.sumBet;\n\t\tthis.zongzhu_label.string = sumBetString;\n\n\t\tvar countFlowingString = this.count + \"/\" + this.total_count;\n\t\tthis.huihe_label.string = countFlowingString;\n\t},\n\tpomelo_on(){\n\t\tpomelo.on('onStart',this.onStart_function.bind(this));\n    \tpomelo.on('onReady',this.onReady_function.bind(this));\n\t\tpomelo.on('onAdd',this.onAdd_function.bind(this));\n\t\tpomelo.on('onNoRound',this.onNoRound_function.bind(this));\n\t\tpomelo.on('onGetUinfo',this.onGetUinfo_function.bind(this));\n\t\tpomelo.on('onFaPai',this.onFapai_function.bind(this));\n\t\tpomelo.on('onShoupai',this.onShoupai_function.bind(this));\n\t\tpomelo.on('onShoupaiFirst',this.onShoupaiFirst_function.bind(this));\n\t\tpomelo.on('onPass',this.onPass_function.bind(this));\n\t\tpomelo.on('onJieFeng',this.onJieFeng_function.bind(this));\n\t\tpomelo.on('onChuPai',this.onChuPai_function.bind(this));\n\t\tpomelo.on('onChuPaiTip',this.onChuPaiTip_function.bind(this));\n\t\tpomelo.on('onMarkA',this.onMarkA_function.bind(this));\n\t\tpomelo.on('onThrow',this.onThrow_function.bind(this));\n\t\tpomelo.on('onFinish',this.onFinish_function.bind(this));\n\t\tpomelo.on('onStartChuPai',this.onStartChuPai_function.bind(this));\n\t\tpomelo.on('onLeave',this.onLeave_function.bind(this));\n\t\tpomelo.on('onChangePlayer',this.onChangePlayer_function.bind(this));\n\t\tpomelo.on('onActBroadcast',this.onUserBroadcast_function.bind(this));\n    },\n\tonStart_function(data){\n\t\tconsole.log(\"pomelo onStart:\" + data.location);\n\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"zhq_player\");\n\t\t\tif(player_com.position_server == data.location){\n\t\t\t\tplayer_com.is_power = 1;\n\t\t\t\tplayer_com.setSpriteStatus(\"start\");\n\t\t\t\tplayer_com.stop_timer();\n\t\t\t\t//准备状态表示\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t},\n\tonReady_function(data){\n\t\tcc.log(\"pomelo on Ready:\" + data.location+\" is ready\");\n\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"zhq_player\");\n\t\t\tif(player_com.position_server == data.location){\n\t\t\t\tplayer_com.is_power = 3;\n\t\t\t\tplayer_com.setSpriteStatus(\"yizhunbei\");\n\t\t\t\t//准备状态表示\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t},\n\tonAdd_function(data){\n\t\tcc.log(\"onAdd:\" + JSON.stringify(data));\n\t\tvar player = null;\n\t\tvar playerInfo=data[\"user\"];\n\n\t\tvar t_player=new Array();\n\t\tt_player.push(playerInfo[\"id\"]);\n\t\tt_player.push(playerInfo[\"location\"]);\n\t\tt_player.push(playerInfo[\"isGame\"]);\n\t\tt_player.push(playerInfo[\"nickName\"]);\n\t\tt_player.push(playerInfo[\"gold\"]);\n\t\tt_player.push(playerInfo[\"gender\"]);\n\t\tt_player.push(playerInfo[\"mark\"]);\n\t\t\n\t\t//确定新加入玩家的客户端位置\n\t\tvar idx = 0;\n\t\tif(t_player[1] > g_myselfPlayerPos){\n\t\t\tidx = t_player[1] - g_myselfPlayerPos;\n\t\t}else{\n\t\t\tidx = this.players.length - g_myselfPlayerPos + t_player[1];\n\t\t}\n\t\tvar player = this.players[idx];\n\t\tvar player_com = player.getComponent(\"zhq_player\");\n\t\tplayer_com.init(t_player);\n\t\tplayer_com.player_position = idx + 1;\n\t\tg_players.push(player);\n\t\tplayer.active = true;\n\t\t/*\n\t\t//为新加入的玩家头像添加个人信息按钮\n\t\tvar menuSprite1=new cc.Sprite(res.Mobile_jpg);\n\t\tvar menuSprite2=new cc.Sprite(res.Mobile_jpg);\n\t\tvar menuSprite3=new cc.Sprite(res.Mobile_jpg);\n\t\tvar menuItem = new cc.MenuItemSprite(menuSprite1,menuSprite2,menuSprite3,this.menuCallbackPersonalMessage,this);\n\t\tmenuItem.setName(player.player_position.toString());\n\t\tmenuItem.attr({\n\t\t\tx : 0,\n\t\t\ty : 0,\n\t\t\tanchorX : 0,\n\t\t\tanchorY : 0\n\t\t});\n\t\tvar menu=new cc.Menu(menuItem);\n\t\tmenu.attr({\n\t\t\tx : 0,\n\t\t\ty : 0,\n\t\t\tanchorX : 0,\n\t\t\tanchorY : 0\n\t\t});\n\t\tplayer.spritePhotoMobile.addChild(menu);\n\t\t*/\n\t\tthis.playerNum++;\n\t},\n\tonFapai_function(data){\n\t\tcc.log(\"onFapai\" + JSON.stringify(data));\n\t\tvar instruction_faPai = data[\"msg\"];\n\t\tthis.count = data[\"round\"];\n\t\tif(instruction_faPai==\"fapaile!\"){\n\t\t\t/*更新房间状态和玩家信息*/\n\t\t\t//初始化发牌的位置\n\t\t\tthis.currentGetPowerPlayerPosition = data[\"location\"];\n\t\t\tthis.startDealCardPosition1 = data[\"location\"];\n\t\t\tthis.startDealCardPosition = data[\"location\"];\n\t\t\t\n\t\t\t//更新房间状态\n\t\t\tthis.roomState = 1;\n\t\t\tfor(var i = 0;i < this.betPhotoArray.length;i++){\n\t\t\t\tthis.betPhotoArray[i].removeFromParent();\n\t\t\t}\n\t\t\tthis.betPhotoArray.length = 0;\n\t\t\t//更新玩家信息\n\t\t\tfor(var i=0;i<g_players.length;i++){\n\t\t\t\t//清除玩家手中上一局的牌，\n\t\t\t\tvar player_com = g_players[i].getComponent(\"zhq_player\");\n\t\t\t\tplayer_com.remove_cards();\n\t\t\t}\n\t\t\tthis.bet = g_betArray[0];\n\t\t\tthis.fapai_count = 0;\n\n\t\t\t/*初始化玩家手中的牌（背面），权限isPower,开牌checkCard弃牌abandon,失败提示精灵loserSprite*/\n\t\t\tfor(var i=0;i < g_players.length;i++){\n\t\t\t\tvar player_com = g_players[i].getComponent(\"zhq_player\");\n\t\t\t\tplayer_com.is_power = 2;\n\t\t\t\tplayer_com.abandon = false;\n\t\t\t\tplayer_com.hide_status_sprite();\n\t\t\t}\n\t\t\t//玩家收牌状态更新\n\t\t\tfor(var i=0;i < g_players.length;i++){\n\t\t\t\tvar player = g_players[i];\n\t\t\t\tvar player_com = player.getComponent(\"zhq_player\");\n\t\t\t\tif(player_com.position_server == this.currentGetPowerPlayerPosition){\n\t\t\t\t\tplayer_com.setSpriteStatus(\"shou\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tonShoupai_function(data){\n\t\tcc.log(\"onShoupai:\" + JSON.stringify(data));\n\t\t//初始化myselfCards数组\n\t\tthis.myselfCards.splice(0,this.myselfCards.length);\n\n\t\tvar cardType = data[\"paixing\"];\n\t\tvar card_len = cardType[\"p\"].length;\n\t\tthis.fapai_count = cardType[\"p\"].length;\n\n\t\tfor(var i = 0;i < card_len;i++){\n\t\t\tvar suit=cardType[\"s\"][i];\n\t\t\tvar rank=cardType[\"p\"][i];\n\t\t\tvar card = new Array();\n\t\t\tcard.push(suit);\n\t\t\tcard.push(rank);\n\t\t\tthis.myselfCards.push(card);\n\t\t}\n\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"zhq_player\");\n\t\t\tif(player_com.position_server == g_myselfPlayerPos){\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tplayer_com.init_cards(7);\n\t\t\tthis.setPlayerCardsPosition(player,7);\n\t\t}\n\t\tthis.actionFaPai();\n\t},\n\tonShoupaiFirst_function(data){\n\t\tconsole.log(\"onShoupaiFirst:\" + JSON.stringify(data));\n\t\t//初始化myselfCards数组\n\t\tthis.myselfCards.splice(0,this.myselfCards.length);\n\n\t\tvar cardType = data[\"paixing\"];\n\n\t\tfor(i = 0;i < 6;i++){\n\t\t\tvar suit = cardType[\"s\"][i];\n\t\t\tvar rank = cardType[\"p\"][i];\n\t\t\tvar card = new Array();\n\t\t\tcard.push(suit);\n\t\t\tcard.push(rank);\n\t\t\tthis.myselfCards.push(card);\n\t\t}\n\t\t//其他玩家的牌放入Involvement中\n\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"zhq_player\");\n\t\t\tif(player_com.position_server == g_myselfPlayerPos){\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tplayer_com.init_cards(6);\n\t\t\tthis.setPlayerCardsPosition(player,player_com.my_cards.length);\n\t\t\tthis.myselfCardsReach = true;\n\t\t}\n\t\t//给玩家发牌动作，由于服务器还没有给开始发牌位置信息，目前默认为从客户端位置最小的开始发牌\n\t\t//this.actionFapai(6);\n\t\t//this.setContinueFapaiMenu();\n\t},\n\tonPass_function(data){\n\t\tconsole.log(\"onPass:\" + JSON.stringify(data));\n\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"zhq_player\");\n\t\t\tif(player_com.position_server == data.location){\n\t\t\t\tplayer_com.setSpriteStatus(\"buchupai\");\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t},\n\tonJieFeng_function(data){\n\t\tconsole.log(\"onJieFeng:\" + JSON.stringify(data));\n\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"zhq_player\");\n\t\t\tif(player_com.position_server == data.location){\n\t\t\t\tplayer_com.setSpriteStatus(\"jiefeng\");\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t},\n\tonChuPai_function(data){\n\t\tconsole.log(\"onChuPai:\" + JSON.stringify(data));\n\t\tvar paiXing = data[\"pai\"];\n\t\tvar locationServer = data[\"location\"];\n\t\tvar nextPositionServer = data[\"next\"];\n\t\tvar status = data[\"status\"];\n\t\tvar playerIndexOf=-1;\n\t\tfor(var i=0;i<g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"zhq_player\");\n\t\t\tif(player_com.position_server == locationServer){\n\t\t\t\tplayerIndexOf = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif(playerIndexOf==-1){\n\t\t\tconsole.log(\"error outside............... pomelo.on('onOpen')\");\n\t\t\treturn;\n\t\t}\n\t\t//还原上次玩家出的牌并隐藏起来牌\n\t\tif(this.lastPosition != -1){\n\t\t\tconsole.log(\"start remove last pai......\" + this.lastPosition + \" lens:\" + this.lastPai.length);\n\t\t\tfor(var i = 0;i < this.lastPai.length;i++){\n\t\t\t\tvar card = this.lastPai[i];\n\t\t\t\tcard.destroy();\n\t\t\t\t//card.runAction(cc.hide());\n\t\t\t}\n\t\t\tthis.lastPai.splice(0,this.lastPai.length);\n\t\t}\n\t\t\n\t\tthis.lastPosition = locationServer;\n\t\tvar player = g_players[playerIndexOf];\n\t\tvar player_com = player.getComponent(\"zhq_player\");\n\t\tvar size = cc.director.getVisibleSize();\n\t\t//其他玩家出牌动作\n\t\tif(locationServer != g_myselfPlayerPos){\n\t\t\t//出牌放在桌面中间显示\n\t\t\tfor(var i = 0;i < paiXing[\"p\"].length;i++){\n\t\t\t\t//移动到桌面位置\n\t\t\t\tconsole.log(\"chupai other :\" + JSON.stringify(paiXing));\n\t\t\t\tvar suit = paiXing[\"s\"][i];\n\t\t\t\tvar rank = paiXing[\"p\"][i];\n\t\t\t\tvar card = player_com.addPlayerCard();\n\t\t\t\tvar card_com = card.getComponent(\"zhq_card\");\n\t\t\t\tvar position = this.calc_player_card_position(player,player_com.my_cards.length - 1);\n\t\t\t\tcard.setPosition(position);\n\t\t\t\tcard_com.initCardSprite(suit,rank);\n\t\t\t\tvar moveToPos = this.node.convertToNodeSpaceAR(cc.p(size.width/2-(80*(i)),size.height/2));\n\t\t\t\tvar moveToBiPaiPosition = cc.moveTo(0.5,moveToPos);\n\t\t\t\tcard_com.sprite.runAction(cc.show());\n\t\t\t\tcard.runAction(moveToBiPaiPosition);\n\t\t\t\tthis.lastPai.push(card);\n\t\t\t\tplayer_com.selected_cards.push(card);\n\t\t\t}\n\t\t}else{\n\t\t\t//自己出牌动作\n\t\t\tfor(var i = 0;i < player_com.selected_cards.length;i++){\n\t\t\t\tvar card = player_com.selected_cards[i];\n\t\t\t\t//移动到桌面位置\n\t\t\t\tvar moveToPos = this.node.convertToNodeSpaceAR(cc.p(size.width/2-(80*(i)),size.height/2));\n\t\t\t\tvar moveToBiPaiPosition = cc.moveTo(0.5,moveToPos);\n\t\t\t\tcard.runAction(moveToBiPaiPosition);\n\t\t\t\tthis.lastPai.push(card);\n\t\t\t}\n\t\t\t//重新排列牌\n\t\t\tplayer_com.remove_select_cards();\n\t\t\tthis.setPlayerCardsPosition(player,player_com.my_cards.length);\n\t\t}\n\t\t//出玩牌了\n\t\tif(status == -1){\n\t\t\tif(nextPositionServer == g_myselfPlayerPos){\n\t\t\t\tthis.jiefeng_button.getComponent(cc.Button).interactable = true;\n\t\t\t\tthis.buchupai_button.getComponent(cc.Button).interactable = false;\n\t\t\t}\n\t\t\tplayer_com.is_power = 0;\n\t\t\tplayer_com.setSpriteStatus(\"finish\");\n\t\t}\n\t},\n\tonChuPaiTip_function(data){\n\t\tconsole.log(\"onChuPaiTip:\" + JSON.stringify(data));\n\t\tvar flag = data[\"flag\"];\n\t\tvar locationServer = data[\"location\"];\n\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"zhq_player\");\n\t\t\tif(player_com.position_server == g_myselfPlayerPos && g_myselfPlayerPos == this.currentGetPowerPlayerPosition){\n\t\t\t\tif(player_com.position_server == locationServer && player_com.is_power == 4){\n\t\t\t\t\tif(flag == true){\n\t\t\t\t\t\tthis.chupai_button.getComponent(cc.Button).interactable = true;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.chupai_button.getComponent(cc.Button).interactable = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t},\n\tonMarkA_function(data){\n\t\tconsole.log(\"onMarkA:\" + JSON.stringify(data));\n\t\tvar markPai = data[\"mark\"];\n\t\tvar locationServer = data[\"location\"];\n\t\tvar heiAs = data[\"heia\"];\n\t\tthis.bet = parseInt(data[\"chip\"]);\n\t\t//开始标记宣牌的状态信息\n\t\tfor(var i = 0;i < heiAs.length;i++){\n\t\t\tvar heiLocation = heiAs[i];\n\t\t\tfor(var j = 0;j < g_players.length;j++){\n\t\t\t\tvar player = g_players[j];\n\t\t\t\tvar player_com = player.getComponent(\"zhq_player\");\n\t\t\t\tif(player_com.position_server == heiLocation && heiLocation != g_myselfPlayerPos){\n\t\t\t\t\tvar lastId = player_com.getNextEmptyCard();\n\t\t\t\t\tvar card = player_com.my_cards[lastId];\n\t\t\t\t\tvar card_com = card.getComponent(\"zhq_card\");\n\t\t\t\t\tif(i == 0){\n\t\t\t\t\t\tcard_com.initCardSprite(4,14);\n\t\t\t\t\t}else if(i == 1){\n\t\t\t\t\t\tcard_com.initCardSprite(2,14);\n\t\t\t\t\t}\n\t\t\t\t\tvar backCardSeq = cc.sequence(cc.delayTime(0.45),cc.hide());\n\t\t\t\t\tvar backCamera = cc.rotateBy(0.45,0,-90);\n\t\t\t\t\tvar backSpawn = cc.spawn(backCardSeq,backCamera);\n\t\t\t\t\tvar frontSeq = cc.sequence(cc.delayTime(0.45),cc.show());\n\t\t\t\t\tvar frontCamera = cc.rotateBy(0.6,0,-360);\n\t\t\t\t\tvar frontSpawn = cc.spawn(frontSeq,frontCamera);\n\t\t\t\t\tcard_com.sprite_back.node.runAction(backSpawn);\n\t\t\t\t\tcard_com.sprite.runAction(frontSpawn);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor(var j = 0;j < g_players.length;j++){\n\t\t\tvar player = g_players[j];\n\t\t\tvar player_com = player.getComponent(\"zhq_player\");\n\t\t\tif(player_com.position_server == locationServer){\n\t\t\t\tif(markPai[\"p\"].length >= 3 && locationServer != g_myselfPlayerPos){\n\t\t\t\t\tfor(var i = 0;i < markPai[\"p\"].length;i++){\n\t\t\t\t\t\tvar lastId = player_com.getNextEmptyCard();\n\t\t\t\t\t\tplayer_com.set_card_sprite(lastId,parseInt(markPai[\"s\"][i]),parseInt(markPai[\"p\"][i]));\n\t\t\t\t\t\tvar card = player_com.my_cards[lastId];\n\t\t\t\t\t\tvar card_com = card.getComponent(\"zhq_card\");\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar backCardSeq = cc.sequence(cc.delayTime(0.45),cc.hide());\n\t\t\t\t\t\tvar backCamera = cc.rotateBy(0.45,0,-90);\n\t\t\t\t\t\tvar backSpawn = cc.spawn(backCardSeq,backCamera);\n\t\t\t\t\t\tvar frontSeq = cc.sequence(cc.delayTime(0.45),cc.show());\n\t\t\t\t\t\tvar frontCamera = cc.rotateBy(0.6,0,-360);\n\t\t\t\t\t\tvar frontSpawn = cc.spawn(frontSeq,frontCamera);\n\t\t\t\t\t\tcard_com.sprite_back.node.runAction(backSpawn);\n\t\t\t\t\t\tcard_com.sprite.runAction(frontSpawn);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tplayer_com.resetSelectCard();\n\t\t\t}\n\t\t\t\n\t\t}\n\t\tthis.touxiang_button.getComponent(cc.Button).interactable = true;\n\t},\n\tonThrow_function(data){\n\t\tcc.log(\"onThrow:\" + JSON.stringify(data));\n\t\tvar playerPosServer = data[\"location\"];\n\t\tvar playerPosServers = data[\"users\"];\n\t\tvar flag = data[\"status\"];\n\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"zhq_player\");\n\t\t\tif(player_com.position_server == playerPosServer){\n\t\t\t\tif(flag == true){\n\t\t\t\t\tplayer_com.setSpriteStatus(\"touxiang\");\n\t\t\t\t}else if(flag == false){\n\t\t\t\t\tplayer_com.setSpriteStatus(\"butouxing\");\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tfor(var j = 0;j < playerPosServers.length;j++){\n\t\t\tif(playerPosServer == playerPosServers[j]){\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(playerPosServers[j] == g_myselfPlayerPos){\n\t\t\t\tthis.touxiang_button.getComponent(cc.Button).interactable = true;\n\t\t\t\tthis.butouxiang_button.getComponent(cc.Button).interactable = true;\n\t\t\t}\n\t\t}\n\t},\n\tonFinish_function(data){\n\t\tconsole.log(\"onFinish:\" + JSON.stringify(data));\n\t\tvar winners = data[\"winner\"];\n\t\tvar loster = data[\"lost\"];\n\t\tvar type = data[\"status\"];\n\t\tthis.bet = data[\"cur_chip\"];\n\t\tthis.myselfCardsReach = false;\n\t\t//和牌\n\t\tif(type == 2){\n\t\t\tfor(var i=0;i<g_players.length;i++){\n\t\t\t\tvar player = g_players[i];\n\t\t\t\tvar player_com = player.getComponent(\"zhq_player\");\n\t\t\t\tplayer_com.setSpriteStatus(\"equal\");\n\t\t\t}\n\t\t}else{\n\t\t\t//黑方获胜\n\t\t\tfor(var i = 0;i < loster.length;i++){\n\t\t\t\tvar loserLocal = loster[i];\n\t\t\t\tvar winLocal = winners[i];\n\t\t\t\tvar loserPlayer = null;\n\t\t\t\tvar winnerPlayer = null;\n\t\t\t\tfor(var j=0;j<g_players.length;j++){\n\t\t\t\t\tvar player = g_players[j];\n\t\t\t\t\tvar player_com = player.getComponent(\"zhq_player\");\n\t\t\t\t\tif(player_com.position_server == loserLocal){\n\t\t\t\t\t\tloserPlayer = player;\n\t\t\t\t\t\tplayer_com.setSpriteStatus(\"loser\");\n\t\t\t\t\t\tplayer_com.resetMoneyLabel(player_com.my_gold - this.bet);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(var j = 0;j < g_players.length;j++){\n\t\t\t\t\tvar player = g_players[j];\n\t\t\t\t\tvar player_com = player.getComponent(\"zhq_player\");\n\t\t\t\t\tif(player_com.position_server == winLocal){\n\t\t\t\t\t\twinnerPlayer = player;\n\t\t\t\t\t\tplayer_com.setSpriteStatus(\"winner\");\n\t\t\t\t\t\tplayer_com.resetMoneyLabel(player_com.my_gold + this.bet);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(loserPlayer != null && winnerPlayer != null){\n\t\t\t\t\tthis.actionBottomBet(loserPlayer.getPosition(),winnerPlayer.getPosition());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.initButtonEnableAfterComeInRoom();\n\t\tif(this.lastPosition != -1){\n\t\t\tconsole.log(\"start remove last pai......\" + this.lastPosition + \" lens:\" + this.lastPai.length);\n\t\t\tfor(var i = 0;i < this.lastPai.length;i++){\n\t\t\t\tvar card = this.lastPai[i];\n\t\t\t\tcard.destroy();\n\t\t\t\t//card.runAction(cc.hide());\n\t\t\t}\n\t\t\tthis.lastPai.splice(0,this.lastPai.length);\n\t\t}\n\t\t\n\t\tthis.lastPosition = -1;\n\t},\n\tonStartChuPai_function(data){\n\t\tconsole.log(\"onStartChuPai:\" + JSON.stringify(data));\n\t\tvar rotationPlayerPositionServer = data[\"location\"];\n\t\t//暂停当前玩家定时器,并初始化玩家按钮定时器\n\t\tfor(var i=0;i<g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"zhq_player\");\n\t\t\tif(player_com.position_server == this.currentGetPowerPlayerPosition){\n\t\t\t\tplayer_com.stop_timer();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t//开启轮换到的玩家 并设置 玩家的状态信息出牌准备 3\n\t\tthis.currentGetPowerPlayerPosition = rotationPlayerPositionServer;\n\t\tvar rotationPlayerIndexOf = -1;\n\t\tfor (var i = 0; i < g_players.length; i++) {\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"zhq_player\");\n\t\t\tif (player_com.position_server == rotationPlayerPositionServer) {\n\t\t\t\trotationPlayerIndexOf = i;\n\t\t\t\tplayer_com.start_timer();\n\t\t\t}\n\t\t\tplayer_com.is_power = 4;\n\t\t\tplayer_com.hide_status_sprite();\n\t\t}\n\t\tif (rotationPlayerIndexOf == -1) {\n\t\t\tconsole.log(\"error outside........................................pomelo.on('onChangePlayer')\");\n\t\t\treturn;\n\t\t}\n\t\tvar player = g_players[rotationPlayerIndexOf];\n\t\tvar player_com = player.getComponent(\"zhq_player\");\n\t\tif(player_com.position_server != g_myselfPlayerPos){\n\t\t\t//设置红桃四的玩家状态\n\t\t\tvar flag = false;\n\t\t\tvar lastId = player_com.getNextEmptyCard();\n\t\t\tfor(var i = 0;i < lastId;i++){\n\t\t\t\tvar card = player_com.my_cards[i];\n\t\t\t\tvar card_com = card.getComponent(\"zhq_card\");\n\t\t\t\tif(card_com.suit == 3 && card_com.rank == 4){\n\t\t\t\t\tflag = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(flag == false){\n\t\t\t\tplayer_com.set_card_sprite(lastId,3,4);\n\t\t\t\tvar card = player_com.my_cards[lastId];\n\t\t\t\tvar card_com = card.getComponent(\"zhq_card\");\n\t\t\t\tvar backCardSeq = cc.sequence(cc.delayTime(0.45),cc.hide());\n\t\t\t\tvar backCamera = cc.rotateBy(0.45,0,-90);\n\t\t\t\tvar backSpawn = cc.spawn(backCardSeq,backCamera);\n\t\t\t\tvar frontSeq = cc.sequence(cc.delayTime(0.45),cc.show());\n\t\t\t\tvar frontCamera = cc.rotateBy(0.6,0,-360);\n\t\t\t\tvar frontSpawn = cc.spawn(frontSeq,frontCamera);\n\t\t\t\tcard_com.sprite_back.node.runAction(backSpawn);\n\t\t\t\tcard_com.sprite.runAction(frontSpawn);\n\t\t\t}\n\t\t}\n\t\tplayer_com.setSpriteStatus(\"chupai\");\n\t\tthis.initButtonEnableChuPai();\n\t},\t\n\tonLeave_function(data){\n\t\tcc.log(\"onLeave:\" + JSON.stringify(data));\n\t\tvar playerName = data[\"user\"];\n\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"zhq_player\");\n\t\t\tif(player_com.id == playerName){\n\t\t\t\tcc.log(\"quit from zjh room g_players\");\n\t\t\t\tplayer_com.remove_cards();\n\t\t\t\tplayer.active = false;\n\t\t\t\tg_players.splice(i,1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tthis.playerNum--;\n\t},\n\tonChangePlayer_function(data){\n\t\tcc.log(\"onChangePlayer:\" + JSON.stringify(data));\n\t\tvar rotationPlayerPositionServer = data[\"location\"];\n\t\t//暂停当前玩家定时器,并初始化玩家按钮定时器\n\t\tvar tmp_allplayers = g_players_noPower.concat(g_players);\n\t\tfor(var i=0;i < g_players.length;i++){\n\t\t\tvar player_com = g_players[i].getComponent(\"zhq_player\");\n\t\t\tif(player_com.position_server == this.currentGetPowerPlayerPosition){\n\t\t\t\tplayer_com.stop_timer();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t//开启轮换到的玩家\n\t\tif(g_players.length >= 2) {\n\t\t\tthis.currentGetPowerPlayerPosition = rotationPlayerPositionServer;\n\t\t\tif (rotationPlayerPositionServer == g_myselfPlayerPos) {\n\t\t\t\tthis.chupai_button.getComponent(cc.Button).interactable = true;\n\t\t\t\tthis.buchupai_button.getComponent(cc.Button).interactable = true;\n\t\t\t\tif(this.lastPosition == this.currentGetPowerPlayerPosition){\n\t\t\t\t\tthis.buchupai_button.getComponent(cc.Button).interactable = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var i = 0; i < g_players.length; i++) {\n\t\t\t\tvar player_com = g_players[i].getComponent(\"zhq_player\");\n\t\t\t\tif (player_com.position_server == rotationPlayerPositionServer) {\n\t\t\t\t\tplayer_com.start_timer();\n\t\t\t\t\tplayer_com.setSpriteStatus(\"chupai\");\n\t\t\t\t}else if(player_com.statusTag == \"chupai\"){\n\t\t\t\t\tplayer_com.hide_status_sprite();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tonUserBroadcast_function(data){\n\t\tcc.log(\"onUserBroadcast:\"+JSON.stringify(data));\n\t\tvar msage_scroll_com = this.msage_scroll.getComponent(\"msage_scroll\");\n\t\tmsage_scroll_com.set_string(data);\n\t},\n\tonNoRound_function(data){\n\t\tconsole.log(\"onNoRound:\"+JSON.stringify(data));\n\t\tvar size = cc.director.getVisibleSize();\n\t\tvar golds_info = data[\"golds\"];\n\t\tvar tplayers = new Array();\n\t\tfor(var key in golds_info){\n\t\t\ttplayers.push(golds_info[key]);\n\t\t}\n\t\tvar pop_game_finish = cc.instantiate(g_assets[\"pop_game_finish\"]);\n\t\tvar pop_game_finish_com = pop_game_finish.getComponent(\"pop_game_finish\");\n\t\tpop_game_finish_com.init_info(tplayers);\n\t\tvar x = size.width/2;\n\t\tvar y = size.height/2;\n\t\tthis.node.addChild(pop_game_finish);\n\t\tpop_game_finish.setPosition(this.node.convertToNodeSpaceAR(cc.p(x,y)));\n\t},\n\tonGetUinfo_function(data){\n\t\tconsole.log(\"onNoRound:\"+JSON.stringify(data));\n\t\tvar size = cc.director.getWinSize();\n\t\t//显示玩家信息\n\t\tif(data[\"send_from\"] == g_myselfPlayerPos){\n\t\t\tthis.uinfo = cc.instantiate(g_assets[\"pop_game_user\"]);\n\t\t\tvar uinfo_com = this.uinfo.getComponent(\"pop_game_user\");\n\t\t\t\n\t\t\tuinfo_com.init_info(data,this.actionSendGift);\n\t\t\tthis.node.addChild(this.uinfo);\n\t\t\tthis.uinfo.setPosition(this.node.convertToNodeSpaceAR(cc.p(size.width/2,size.height/2)));\n\t\t}\n\t},\n\tactionSendGift(pnode,type,send_from,send_to){\n\t\tcc.log(\"actionSendGift\",type,send_from,send_to);\n\t\tvar s_player = null;\n\t\tvar e_player = null;\n\t\tvar all_players = g_players.concat(g_players_noPower);\n\t\tif(send_from == send_to){\n\t\t\treturn false;\n\t\t}\n\t\tfor(var i = 0;i < all_players.length;i++){\n\t\t\tvar player_com = all_players[i].getComponent(\"zhq_player\");\n\t\t\tif(player_com.position_server == send_from){\n\t\t\t\ts_player = all_players[i];\n\t\t\t}\n\t\t\tif(player_com.position_server == send_to){\n\t\t\t\te_player = all_players[i];\n\t\t\t}\n\t\t}\n\t\tvar active = null;\n\t\tvar active_name = null;\n\t\t//送鸡蛋\n\t\tif(type == 1){\n\t\t\tactive = cc.instantiate(g_assets[\"shoe_active\"]);\n\t\t\tactive_name = \"shoe_active\";\n\t\t}else if(type == 2){\n\t\t\tactive = cc.instantiate(g_assets[\"egg_active\"]);\n\t\t\tactive_name = \"egg_active\";\n\t\t}else if(type == 3){\n\t\t\tactive = cc.instantiate(g_assets[\"bomb_active\"]);\n\t\t\tactive_name = \"bomb_active\";\n\t\t}else if(type == 4){\n\t\t\tactive = cc.instantiate(g_assets[\"kiss_active\"]);\n\t\t\tactive_name = \"kiss_active\";\n\t\t}else if(type == 5){\n\t\t\tactive = cc.instantiate(g_assets[\"flower_active\"]);\n\t\t\tactive_name = \"flower_active\";\n\t\t}else if(type == 6){\n\t\t\tactive = cc.instantiate(g_assets[\"cheers_active\"]);\n\t\t\tactive_name = \"cheers_active\";\n\t\t}\n\t\tpnode.addChild(active);\n\t\tactive.setPosition(s_player.getPosition());\n\t\t\n\t\tvar move = cc.moveTo(0.5,e_player.getPosition());\n\t\tvar rotation = cc.rotateBy(0.5,360);\n\t\tvar spawn = cc.spawn(move,rotation);\n\t\tvar self = this;\n\t\tvar sendAction = cc.callFunc(function(){\n\t\t\tvar anim = active.getComponent(cc.Animation);\n\t\t\tanim.on('finished',  function(){\n\t\t\t\tactive.destroy();\n\t\t\t},null);\n\t\t\tvar animStatus = anim.play(active_name);\n\t\t\t// 设置循环模式为 Normal\n\t\t\tanimStatus.wrapMode = cc.WrapMode.Normal;\n\t\t\t// 设置循环模式为 Loop\n\t\t\tanimStatus.wrapMode = cc.WrapMode.Loop;\n\t\t\t// 设置动画循环次数为2次\n\t\t\tanimStatus.repeatCount = 1;\n\t\t});\n\t\tactive.runAction(cc.sequence(spawn,sendAction));\n\t},\n\n\tswitchRadio(event) {\n\t\tvar card_com = event.target.getComponent(\"zhq_card\");\n        var suit = event.target.getComponent(\"zhq_card\").suit;\n\t\tvar rank = event.target.getComponent(\"zhq_card\").rank;\n\t\tcc.log(\"switchRadio : suit:\" + suit + \" rank:\" + rank);\n\t\tvar player_com = null;\n\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"zhq_player\");\n    \t\tif(player_com.position_server == g_myselfPlayerPos){\n    \t\t\tbreak;\n    \t\t}\n    \t}\n\t\tif(player_com == null){\n\t\t\treturn false;\n\t\t}\n\t\tif(card_com.touch_tag == true){\n\t\t\tplayer_com.selected_cards.push(event.target);\n\t\t}else{\n\t\t\tfor(var i = 0;i < player_com.selected_cards.length;i++){\n\t\t\t\tvar card_t = player_com.selected_cards[i];\n\t\t\t\tif(card_t == event.target){\n\t\t\t\t\tplayer_com.selected_cards.splice(i,1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvar selectCards = player_com.selected_cards;\n\t\tif(selectCards.length > 0){\n\t\t\tvar mark = {\"p\":[],\"s\":[]};\n\t\t\tfor(var i = 0;i < selectCards.length;i++){\n\t\t\t\tvar card_com = selectCards[i].getComponent(\"zhq_card\");\n\t\t\t\tmark[\"p\"].push(card_com.rank);\n\t\t\t\tmark[\"s\"].push(card_com.suit);\n\t\t\t}\n\t\t\tpomelo.request(util.getGameRoute(),{\n\t\t\t\tprocess:\"chutip\",\n\t\t\t\tchupai:mark,\n\t\t\t\tlocation:g_myselfPlayerPos\n\t\t\t},function(data){\n\t\t\t\tconsole.log(data.msg);\n\t\t\t});\n\t\t}\n    },\n\tactionFaPai(){\n\t\tcc.log(\"fapai :\" + this.fapai_count);\n    \tvar size = cc.director.getWinSize();\n\t\tvar playerArrayPosition = -1;\n\t\t//递归发牌如果this.count == 0 则停止发牌\n\t\tif(this.fapai_count <= 0){\n\t\t\tthis.initButtonEnableAfterDealCards();\n\t\t\treturn true;\n\t\t}\n\t\tthis.fapai_count = this.fapai_count - 1;\n\t\tfor(var i = 0;i < g_players.length;i++){\n\t\t\tvar player = g_players[i];\n\t\t\tvar player_com = player.getComponent(\"zhq_player\");\n    \t\tif(player_com.position_server == g_myselfPlayerPos){\n    \t\t\tplayerArrayPosition=i;\n    \t\t\tbreak;\n    \t\t}\n    \t}\n\t\tif(playerArrayPosition == -1){\n\t\t\treturn false;\n\t\t}\n\t\t\n    \tvar player = g_players[playerArrayPosition];\n\t\tvar player_com = player.getComponent(\"zhq_player\");\n\t\tvar card_len = player_com.my_cards.length;\n\t\tvar card = player_com.addPlayerCard();\n\t\tvar card_com = card.getComponent(\"zhq_card\");\n\t\tvar position = this.calc_player_card_position(player,card_len);\n\t\tplayer_com.set_card_sprite(card_len,parseInt(this.myselfCards[card_len][0]),\n\t\t\tparseInt(this.myselfCards[card_len][1]));\n\t\tcard.setPosition(position);\n    \tvar callFunc = cc.callFunc(this.actionFaPai,this);\n    \t//card.runAction(cc.sequence(cc.delayTime(0.45),cc.show(),callFunc));\n\t\tcard_com.sprite.runAction(cc.sequence(cc.delayTime(0.45),cc.show(),callFunc));\n    },\n\tactionBottomBet(loserPlayerPosition,winPlayerPosition){\n       var size = cc.director.getWinSize();\n       var countNumber = -1;\n       for(var j = 0;j < g_betArray.length;j++){\n           if(this.bet == g_betArray[j]){\n               j++;\n               countNumber=j;\n               break;\n           }\n       }\n       if(countNumber == -1){\n           console.log(\"error........outside actionBottomBet:function\" + this.bet);\n\t\t   var betNum = this.bet / g_betArray[0];\n\t\t   while(betNum > 0){\n\t\t\t   var chip = cc.instantiate(g_assets[\"chip_100\"]);\n\t\t\t   this.node.addChild(chip);\n\t\t\t   this.betPhotoArray.push(chip);\n\t\t\t   chip.setPosition(loserPlayerPosition);\n\t\t\t   var moveBet = cc.moveTo(0.3,winPlayerPosition);\n\t\t\t   chip.runAction(cc.sequence(cc.delayTime(0.45),moveBet,cc.hide()));\n\t\t\t   betNum = betNum - 1;\n\t\t   }\n       }else{\n\t\t   var chip = cc.instantiate(g_assets[\"chip_\" + this.bet]);\n\t\t   this.node.addChild(chip);\n\t\t   this.betPhotoArray.push(chip);\n\t\t   chip.setPosition(loserPlayerPosition);\n\t\t   var moveBet=cc.moveTo(0.3,winPlayerPosition);\n\t\t   chip.runAction(cc.sequence(cc.delayTime(0.45),moveBet,cc.hide()));\n\t   }\n\t},\n\tcalc_player_card_position(player,m){\n\t\tvar player_com = player.getComponent(\"zhq_player\");\n\t\tvar x = 0;\n\t\tvar y = 0;\n\t\tif(player_com.player_position == 1){\n\t\t\tx = player.getPositionX() + 45 *(m - 1);// - player_com.mobile_sprite.node.getContentSize().width/2;\n\t\t\ty = player.getPositionY() + player_com.mobile_sprite.node.height + 25;\n\t\t}else if(player_com.player_position == 2){\n\t\t\tx = player.getPositionX() - (6-m)*30 + player_com.mobile_sprite.node.getContentSize().width/2 - 40;\n\t\t\ty = player.getPositionY() + player_com.mobile_sprite.node.height + 30;\n\t\t}else if(player_com.player_position == 3){\n\t\t\tx = player.getPositionX() -  (6-m)*30 + player_com.mobile_sprite.node.getContentSize().width/2 - 40;\n\t\t\ty = player.getPositionY() - player_com.mobile_sprite.node.height - 30;\n\t\t}else if(player_com.player_position == 4){\n\t\t\tx = player.getPositionX() + m*30 - player_com.mobile_sprite.node.getContentSize().width/2 + 40;\n\t\t\ty = player.getPositionY() - player_com.mobile_sprite.node.height - 30;\n\t\t}else if(player_com.player_position == 5){\n\t\t\tx = player.getPositionX() + m*30 - player_com.mobile_sprite.node.getContentSize().width/2 + 40;\n\t\t\ty = player.getPositionY() + player_com.mobile_sprite.node.height + 30;\n\t\t}\n\t\tcc.log(\"calc x:\" + x + \" y:\" + y);\n\t\treturn cc.p(x,y);\n\t},\n\tsetPlayerCardsPosition(player,card_len){\n\t\tvar player_com = player.getComponent(\"zhq_player\");\n\t\tfor(var m = 0;m < card_len;m++){\n\t\t\tvar position = this.calc_player_card_position(player,m);\n\t\t\tvar card = player_com.my_cards[m];\n\t\t\tcard.setPosition(position);\n\t\t}\n\t},\n\tshow_error_info(message){\n\t\tvar size = cc.director.getVisibleSize();\n\t\tvar error_tip = cc.instantiate(g_assets[\"prop_error_scene\"]);\n\t\tvar error_tip_com = error_tip.getComponent(\"prop_error_info\");\n\t\terror_tip_com.show_error_info(msg);\n\t\tthis.node.addChild(error_tip);\n\t\terror_tip.setPosition(this.node.convertToNodeSpace(size.width/2,size.height/2));\n\t},\n\tpomelo_removeListener(){\n\t\tcc.log(\"remove listener\");\n\t\tpomelo.removeListener('onStart');\n        pomelo.removeListener('onReady');\n\t\tpomelo.removeListener('onAdd');\n\t\tpomelo.removeListener('onNoRound');\n\t\tpomelo.removeListener('onGetUinfo');\n\t\tpomelo.removeListener('onFaPai');\n        pomelo.removeListener('onShoupai');\n        pomelo.removeListener('onShoupaiFirst');\n        pomelo.removeListener('onPass');\n        pomelo.removeListener('onJieFeng');\n        pomelo.removeListener('onChuPai');\n        pomelo.removeListener('onChuPaiTip');\n        pomelo.removeListener('onMarkA');\n        pomelo.removeListener('onThrow');\n        pomelo.removeListener('onFinish');\n        pomelo.removeListener('onStartChuPai');\n\t\tpomelo.removeListener('onLeave');\n\t\tpomelo.removeListener('onChangePlayer');\n\t\tpomelo.removeListener('onActBroadcast');\n    },\n\n\tonExit(){\n        g_dealCardBack.destroy();\n        g_playerData.splice(0,g_playerData.length);\n        g_roomData.splice(0,g_roomData.length);\n\t\tg_players.splice(0,g_players.length);\n\t\tg_players_noPower.splice(0,g_players_noPower.length);\n\t\tcc.log(\"exit from the room......\");\n        //释放资源\n        //this.releaseMember();\n\n        //注销监听接口\n        this.pomelo_removeListener();\n\t\tthis.destroy();\n    },\n\t\n});\n"]}