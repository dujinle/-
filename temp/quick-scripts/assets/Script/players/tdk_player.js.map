{"version":3,"sources":["tdk_player.js"],"names":["cc","Class","extends","Component","properties","id","nick_name","my_gold","my_scole","position_server","statusTag","player_position","check_card","is_power","abandon","mobile_sprite","Sprite","counter_timer","Node","status_sprite","nick_name_label","Label","gold_label","equalCard","my_cards","type","default","init","params","log","JSON","stringify","getComponent","string","init_cards_info","start_timer","count_timer","stop_timer","setSpriteStatus","status","console","spriteFrame","g_assets","node","active","paiXing","Array","i","p","s","card","instantiate","card_com","initCardSprite","parseInt","parent","addChild","push","addPlayerCard","addEqualCard","init_cards","card_num","set_card_sprite","idx","suit","rank","get_last_card","last_card","length","remove_cards","destroy","splice","hide_status_sprite","resetMoneyLabel","money"],"mappings":"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","file":"tdk_player.js","sourceRoot":"../../../../../assets/Script/players","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n\t\tid:0,\n\t\tnick_name:null,\n\t\tmy_gold:0,\n\t\tmy_scole:0,\n\t\tposition_server:0,\n\t\tstatusTag:null,\n\t\tplayer_position:0,\n\t\tcheck_card:false,\n\t\tis_power:0,\n\t\tabandon:false,\n\t\tmobile_sprite:cc.Sprite,\n\t\tcounter_timer:cc.Node,\n\t\tstatus_sprite:cc.Sprite,\n\t\tnick_name_label:cc.Label,\n\t\tgold_label:cc.Label,\n\t\tequalCard:null,\n\t\tmy_cards:{\n\t\t\ttype:cc.Node,\n\t\t\tdefault:[]\n\t\t},\n    },\n\tinit(params){\n\t\tcc.log(\"tdk_player init: \" + JSON.stringify(params));\n\t\tthis.id = params[0];\n        this.position_server = params[1];\n        this.is_power = params[2];\n\t\tthis.nick_name = params[3];\n\t\tthis.my_gold = params[4];\n\t\tthis.nick_name_label.getComponent(cc.Label).string = this.nick_name;\n\t\tthis.gold_label.getComponent(cc.Label).string = this.my_gold;\n\t\tthis.init_cards_info(params[6]);\n\t},\n\tstart_timer(){\n\t\tvar count_timer = this.counter_timer.getComponent(\"count_timer\");\n\t\tcount_timer.start_timer();\n\t},\n\tstop_timer(){\n\t\tvar count_timer = this.counter_timer.getComponent(\"count_timer\");\n\t\tcount_timer.stop_timer();\n\t},\n    setSpriteStatus(status){\n\t\tconsole.log(\"zjh_player setSpriteStatus:\" + status);\n\t\tthis.statusTag = status;\n\t\tthis.status_sprite.spriteFrame = g_assets[status];\n\t\tthis.status_sprite.node.active = true;\n\t},\n\t\n\tinit_cards_info(paiXing){\n        this.my_cards = new Array();\n\t\tif(paiXing != null && paiXing != \"null\"){\n\t\t\tfor(var i = 1;i < 6;i++){\n\t\t\t\tvar p = paiXing[\"p\" + i];\n\t\t\t\tvar s = paiXing[\"s\" + i];\n\t\t\t\tconsole.log(\"p:\" + p + \" s:\" + s);\n\t\t\t\tif(p){\n\t\t\t\t\tvar card = cc.instantiate(g_assets[\"zjh_card\"]);\n\t\t\t\t\tvar card_com = card.getComponent(\"zjh_card\");\n\t\t\t\t\tcard_com.initCardSprite(parseInt(s),parseInt(p));\n\t\t\t\t\tthis.node.parent.addChild(card);\n\t\t\t\t\tthis.my_cards.push(card);\n\t\t\t\t}else{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n    },\n\taddPlayerCard(){\n\t\tvar card = cc.instantiate(g_assets[\"zjh_card\"]);\n\t\tthis.node.parent.addChild(card);\n\t\tthis.my_cards.push(card);\n\t},\n\taddEqualCard(){\n\t\tthis.equalCard = cc.instantiate(g_assets[\"zjh_card\"]);\n\t\tthis.node.parent.addChild(this.equalCard);\n\t\treturn this.equalCard;\n\t},\n\tinit_cards(card_num){\n\t\tfor(var i = 0;i < card_num;i++){\n\t\t\tvar card = cc.instantiate(g_assets[\"zjh_card\"]);\n\t\t\tthis.node.parent.addChild(card);\n\t\t\tthis.my_cards.push(card);\n\t\t}\n    },\n\tset_card_sprite(idx,suit,rank){\n\t\tvar card = this.my_cards[idx].getComponent(\"zjh_card\");\n\t\tcard.initCardSprite(suit,rank);\n\t},\n\tget_last_card(){\n\t\tvar last_card = null;\n\t\tfor(var i = 0;i < this.my_cards.length;i++){\n\t\t\tlast_card = this.my_cards[i];\n\t\t}\n\t\treturn last_card;\n\t},\n\tremove_cards(){\n\t\tfor(var i = 0;i < this.my_cards.length;i++){\n\t\t\tvar card = this.my_cards[i];\n\t\t\tcard.destroy();\n\t\t}\n\t\tthis.my_cards.splice(0,this.my_cards.length);\n\t},\n\thide_status_sprite(){\n\t\tthis.status_sprite.node.active = false;\n\t},\n\tresetMoneyLabel(money){\n\t\tthis.my_gold = money;\n\t\tthis.gold_label.string = money;\n\t}\n});\n"]}