{"version":3,"sources":["pop_set_scene.js"],"names":["cc","Class","extends","Component","properties","choice_sprite","type","Sprite","default","callback","onLoad","log","self","init_back_info","node","on","switchRadio","bg_sprite","getChildByName","eventManager","addListener","event","EventListener","TOUCH_ONE_BY_ONE","swallowTouches","onTouchBegan","touch","onTouchMoved","onTouchEnded","target","getCurrentTarget","local","convertToNodeSpace","getLocation","s","getContentSize","rect","width","height","rectContainsPoint","active","g_music_key","sys","localStorage","getItem","MUSIC_KEY","g_sound_key","SOUND_KEY","g_chat_key","CHAT_KEY","values","i","length","sprite","BOOL","NO","spriteFrame","g_assets","set_callback","buttonCloseCallback","console","destroy","buttonMusicSettingCallback","YES","setItem","buttonSoundSettingCallback","buttonChatSettingCallback","buttonShockSettingCallback","index","getComponent"],"mappings":"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","file":"pop_set_scene.js","sourceRoot":"../../../../assets/Script","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n\t\tchoice_sprite:{\n\t\t\ttype:cc.Sprite,\n\t\t\tdefault:[],\n\t\t},\n\t\tcallback:null,\n    },\n    onLoad () {\n\t\tcc.log(\"start go into create game js\");\n\t\tvar self = this;\n\t\tthis.init_back_info();\n\t\tself.node.on(\"pressed\", self.switchRadio, self);\n\t\tvar bg_sprite =  self.node.getChildByName(\"bg_sprite\");\n        cc.eventManager.addListener({\n            event: cc.EventListener.TOUCH_ONE_BY_ONE,\n            swallowTouches: true,\n            // 设置是否吞没事件，在 onTouchBegan 方法返回 true 时吞没\n            onTouchBegan: function (touch, event) {\n                return true;\n            },\n            onTouchMoved: function (touch, event) {            // 触摸移动时触发\n            },\n            onTouchEnded: function (touch, event) {            // 点击事件结束处理\n\t\t\t\tvar target=event.getCurrentTarget();\n\t\t\t\tvar local=target.convertToNodeSpace(touch.getLocation());\n\t\t\t\tvar s = target.getContentSize();\n\t\t\t\tvar rect = cc.rect(0, 0, s.width, s.height);\n\t\t\t\tif (cc.rectContainsPoint(rect, local)){\n\t\t\t\t\tcc.log(\"ok touch in the region......\");\n\t\t\t\t}else{\n\t\t\t\t\tcc.log(\"touch remove from parent\");\n\t\t\t\t\tself.node.active = false;\n\t\t\t\t}\n\t\t\t}\n         }, bg_sprite);\n\t},\n\tinit_back_info(){\n\t\tg_music_key = cc.sys.localStorage.getItem(MUSIC_KEY);\n        g_sound_key = cc.sys.localStorage.getItem(SOUND_KEY);\n        g_chat_key = cc.sys.localStorage.getItem(CHAT_KEY);\n\t\tvar values = [g_music_key,g_sound_key,g_chat_key,0];\n\t\tfor(var i = 0;i < this.choice_sprite.length;i++){\n\t\t\tvar sprite = this.choice_sprite[i];\n\t\t\tif(values[i] == BOOL.NO){\n\t\t\t\tsprite.spriteFrame = g_assets[\"set_close\"];\n\t\t\t}else{\n\t\t\t\tsprite.spriteFrame = g_assets[\"set_open\"];\n\t\t\t}\n\t\t}\n\t},\n\tset_callback(callback){\n\t\tthis.callback = callback;\n\t},\n    buttonCloseCallback:function(){\n        console.log(\"running buttonCloseCallback:function()\");\n\t\tthis.node.active = false;\n        this.destroy();\n    },\n    buttonMusicSettingCallback(){\n\t\tvar sprite = this.choice_sprite[0];\n        if(g_music_key == BOOL.NO){\n            g_music_key=BOOL.YES;\n            cc.sys.localStorage.setItem(MUSIC_KEY,BOOL.YES);\n\t\t\tsprite.spriteFrame = g_assets[\"set_open\"];\n        }else{\n            g_music_key=BOOL.NO;\n            cc.sys.localStorage.setItem(MUSIC_KEY,BOOL.NO);\n\t\t\tsprite.spriteFrame = g_assets[\"set_close\"];\n        }\n    },\n    buttonSoundSettingCallback(){\n\t\tvar sprite = this.choice_sprite[1];\n        if(g_sound_key == BOOL.NO){\n            g_sound_key=BOOL.YES;\n            cc.sys.localStorage.setItem(SOUND_KEY,BOOL.YES);\n\t\t\tsprite.spriteFrame = g_assets[\"set_open\"];\n        }else{\n            g_sound_key=BOOL.NO;\n            cc.sys.localStorage.setItem(SOUND_KEY,BOOL.NO);\n\t\t\tsprite.spriteFrame = g_assets[\"set_close\"];\n        }\n    },\n    buttonChatSettingCallback(){\n\t\tvar sprite = this.choice_sprite[2];\n        if(g_chat_key==BOOL.NO){\n            g_chat_key=BOOL.YES;\n            cc.sys.localStorage.setItem(CHAT_KEY,BOOL.YES);\n\t\t\tsprite.spriteFrame = g_assets[\"set_open\"];\n        }else{\n            g_chat_key=BOOL.NO;\n            cc.sys.localStorage.setItem(CHAT_KEY,BOOL.NO);\n\t\t\tsprite.spriteFrame = g_assets[\"set_close\"];\n        }\n    },\n    buttonShockSettingCallback(){\n\n    },\n\tswitchRadio(event) {\n        var index = event.target.getComponent(\"one_choice\").index;\n\t\tvar type = event.target.getComponent(\"one_choice\").type;\n\t\tcc.log(\"switchRadio : index:\" + index + \" type:\" + type);\n\t\tif(index == 0){\n\t\t\tthis.buttonMusicSettingCallback();\n\t\t}else if(index == 1){\n\t\t\tthis.buttonSoundSettingCallback();\n\t\t}else if(index == 2){\n\t\t\tthis.buttonChatSettingCallback();\n\t\t}else if(index == 3){\n\t\t\tthis.buttonShockSettingCallback();\n\t\t}\n\t\tthis.callback(index);\n    },\n});\n"]}