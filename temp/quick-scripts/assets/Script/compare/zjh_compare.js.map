{"version":3,"sources":["zjh_compare.js"],"names":["cc","Class","extends","Component","properties","bg_sprite","Sprite","left_name_label","Label","right_name_label","left_cards","type","default","right_cards","dianshan","is_finish","is_start","anim","animStatus","duration","onLoad","log","getComponent","Animation","on","onFinished","init_info","left_name","right_name","string","bipai_start","time","self","setTimeout","play","wrapMode","WrapMode","Normal","Loop","repeatCount","isValid","node","parent","destroy","get_cur_time","speed","get_card_position","card","cur_node","__cid__","position","p","getPosition","cur_parent","cur_parent_pos","x","y","test"],"mappings":"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","file":"zjh_compare.js","sourceRoot":"../../../../../assets/Script/compare","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n\t\tbg_sprite:cc.Sprite,\n\t\tleft_name_label:cc.Label,\n\t\tright_name_label:cc.Label,\n\t\tleft_cards:{\n\t\t\ttype:cc.Sprite,\n\t\t\tdefault:[]\n\t\t},\n\t\tright_cards:{\n\t\t\ttype:cc.Sprite,\n\t\t\tdefault:[]\n\t\t},\n\t\tdianshan:cc.Sprite,\n\t\tis_finish:false,\n\t\tis_start:false,\n\t\tanim:null,\n\t\tanimStatus:null,\n\t\tduration:0,\n    },\n    onLoad () {\n\t\tcc.log(\"load dianji class\");\n\t\tthis.is_finish = false;\n\t\tthis.anim = this.bg_sprite.getComponent(cc.Animation);\n\t\tthis.anim.on('finished',  this.onFinished,this);\n\t\t//this.test();\n\t},\n\tinit_info(left_name,right_name){\n\t\tthis.left_name_label.string = left_name;\n\t\tthis.right_name_label.string = right_name;\n\t},\n\tbipai_start(time){\n\t\tvar self = this;\n\t\tself.is_finish = false;\n\t\tsetTimeout(function(){\n\t\t\tself.animStatus = self.anim.play(\"dianshan\");\n\t\t\tself.is_start = true;\n\t\t\t// 设置循环模式为 Normal\n\t\t\tself.animStatus.wrapMode = cc.WrapMode.Normal;\n\t\t\t// 设置循环模式为 Loop\n\t\t\tself.animStatus.wrapMode = cc.WrapMode.Loop;\n\t\t\t// 设置动画循环次数为2次\n\t\t\tself.animStatus.repeatCount = 3;\n\t\t},time * 1000);\n\t},\n\tonFinished(){\n\t\tcc.log(\"zjh compare finish\",this.isValid);\n\t\tthis.is_finish = true;\n\t\tthis.is_start = false;\n\t\tthis.node.parent = null;\n\t\tthis.node.destroy();\n\t},\n\tget_cur_time(){\n\t\tif(this.is_start == true){\n\t\t\treturn this.animStatus.time/this.animStatus.speed * 3;\n\t\t}else{\n\t\t\treturn this.animStatus.duration / this.animStatus.speed * 3;\n\t\t}\n\t},\n\tget_card_position(card){\n\t\t//计算节点相对于顶级节点的位置\n\t\tvar cur_node = card;\n\t\tif(cur_node.__cid__ == \"cc.Sprite\"){\n\t\t\tcur_node = cur_node.node;\n\t\t}\n\t\tvar position = cc.p(cur_node.getPosition());\n\t\twhile(cur_node.parent != null){\n\t\t\tif(cur_node.__cid__ == \"cc.Sprite\"){\n\t\t\t\tcur_node = cur_node.node;\n\t\t\t}\n\t\t\tif(cur_node == this.node){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tvar cur_parent = cur_node.parent;\n\t\t\tvar cur_parent_pos = cur_parent.getPosition();\n\t\t\tposition.x = cur_parent_pos.x + position.x;\n\t\t\tposition.y = cur_parent_pos.y + position.y;\n\t\t\tcur_node = cur_parent;\n\t\t}\n\t\treturn position;\n\t},\n\ttest(){\n\t\tthis.bipai_start(1.5);\n\t\tvar self = this;\n\t\tsetTimeout(function(){\n\t\t\tcc.log(self.animStatus.duration,self.animStatus.time,self.animStatus.speed);\n\t\t},2000);\n\t}\n});\n"]}